<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive BOM for KiCAD</title>
  <style type="text/css">
:root {
  --pcb-edge-color: black;
  --pad-color: #878787;
  --pad-hole-color: #CCCCCC;
  --pad-color-highlight: #D04040;
  --pin1-outline-color: #ffb629;
  --pin1-outline-color-highlight: #b4ff03;
  --silkscreen-edge-color: #aa4;
  --silkscreen-polygon-color: #4aa;
  --silkscreen-text-color: #4aa;
  --fabrication-edge-color: #907651;
  --fabrication-polygon-color: #907651;
  --fabrication-text-color: #a27c24;
  --track-color: #def5f1;
  --track-color-highlight: #D04040;
  --zone-color: #def5f1;
  --zone-color-highlight: #d0404080;
}

html, body {
  margin: 0px;
  height: 100%;
  font-family: Verdana, sans-serif;
}

.dark.topmostdiv {
  --pcb-edge-color: #eee;
  --pad-color: #808080;
  --pin1-outline-color: #ffa800;
  --pin1-outline-color-highlight: #ccff00;
  --track-color: #42524f;
  --zone-color: #42524f;
  background-color: #252c30;
  color: #eee;
}

button {
  background-color: #eee;
  border: 1px solid #888;
  color: black;
  height: 44px;
  width: 44px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 14px;
  font-weight: bolder;
}

.dark button {
  /* This will be inverted */
  background-color: #c3b7b5;
}

button.depressed {
  background-color: #0a0;
  color: white;
}

.dark button.depressed {
  /* This will be inverted */
  background-color: #b3b;
}

button:focus {
  outline: 0;
}

button#tb-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8.47 8.47'%3E%3Crect transform='translate(0 -288.53)' ry='1.17' y='288.8' x='.27' height='7.94' width='7.94' fill='%23f9f9f9'/%3E%3Cg transform='translate(0 -288.53)'%3E%3Crect width='7.94' height='7.94' x='.27' y='288.8' ry='1.17' fill='none' stroke='%23000' stroke-width='.4' stroke-linejoin='round'/%3E%3Cpath d='M1.32 290.12h5.82M1.32 291.45h5.82' fill='none' stroke='%23000' stroke-width='.4'/%3E%3Cpath d='M4.37 292.5v4.23M.26 292.63H8.2' fill='none' stroke='%23000' stroke-width='.3'/%3E%3Ctext font-weight='700' font-size='3.17' font-family='sans-serif'%3E%3Ctspan x='1.35' y='295.73'%3EF%3C/tspan%3E%3Ctspan x='5.03' y='295.68'%3EB%3C/tspan%3E%3C/text%3E%3C/g%3E%3C/svg%3E%0A");
}

button#lr-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8.47 8.47'%3E%3Crect transform='translate(0 -288.53)' ry='1.17' y='288.8' x='.27' height='7.94' width='7.94' fill='%23f9f9f9'/%3E%3Cg transform='translate(0 -288.53)'%3E%3Crect width='7.94' height='7.94' x='.27' y='288.8' ry='1.17' fill='none' stroke='%23000' stroke-width='.4' stroke-linejoin='round'/%3E%3Cpath d='M1.06 290.12H3.7m-2.64 1.33H3.7m-2.64 1.32H3.7m-2.64 1.3H3.7m-2.64 1.33H3.7' fill='none' stroke='%23000' stroke-width='.4'/%3E%3Cpath d='M4.37 288.8v7.94m0-4.11h3.96' fill='none' stroke='%23000' stroke-width='.3'/%3E%3Ctext font-weight='700' font-size='3.17' font-family='sans-serif'%3E%3Ctspan x='5.11' y='291.96'%3EF%3C/tspan%3E%3Ctspan x='5.03' y='295.68'%3EB%3C/tspan%3E%3C/text%3E%3C/g%3E%3C/svg%3E%0A");
}

button#bom-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8.47 8.47'%3E%3Crect transform='translate(0 -288.53)' ry='1.17' y='288.8' x='.27' height='7.94' width='7.94' fill='%23f9f9f9'/%3E%3Cg transform='translate(0 -288.53)' fill='none' stroke='%23000' stroke-width='.4'%3E%3Crect width='7.94' height='7.94' x='.27' y='288.8' ry='1.17' stroke-linejoin='round'/%3E%3Cpath d='M1.59 290.12h5.29M1.59 291.45h5.33M1.59 292.75h5.33M1.59 294.09h5.33M1.59 295.41h5.33'/%3E%3C/g%3E%3C/svg%3E");
}

button#bom-grouped-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Cg stroke='%23000' stroke-linejoin='round' class='layer'%3E%3Crect width='29' height='29' x='1.5' y='1.5' stroke-width='2' fill='%23fff' rx='5' ry='5'/%3E%3Cpath stroke-linecap='square' stroke-width='2' d='M6 10h4m4 0h5m4 0h3M6.1 22h3m3.9 0h5m4 0h4m-16-8h4m4 0h4'/%3E%3Cpath stroke-linecap='null' d='M5 17.5h22M5 26.6h22M5 5.5h22'/%3E%3C/g%3E%3C/svg%3E");
}

button#bom-ungrouped-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Cg stroke='%23000' stroke-linejoin='round' class='layer'%3E%3Crect width='29' height='29' x='1.5' y='1.5' stroke-width='2' fill='%23fff' rx='5' ry='5'/%3E%3Cpath stroke-linecap='square' stroke-width='2' d='M6 10h4m-4 8h3m-3 8h4'/%3E%3Cpath stroke-linecap='null' d='M5 13.5h22m-22 8h22M5 5.5h22'/%3E%3C/g%3E%3C/svg%3E");
}

button#bom-netlist-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Cg fill='none' stroke='%23000' class='layer'%3E%3Crect width='29' height='29' x='1.5' y='1.5' stroke-width='2' fill='%23fff' rx='5' ry='5'/%3E%3Cpath stroke-width='2' d='M6 26l6-6v-8m13.8-6.3l-6 6v8'/%3E%3Ccircle cx='11.8' cy='9.5' r='2.8' stroke-width='2'/%3E%3Ccircle cx='19.8' cy='22.8' r='2.8' stroke-width='2'/%3E%3C/g%3E%3C/svg%3E");
}

button#copy {
  background-image: url("data:image/svg+xml,%3Csvg height='48' viewBox='0 0 48 48' width='48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h48v48h-48z' fill='none'/%3E%3Cpath d='M32 2h-24c-2.21 0-4 1.79-4 4v28h4v-28h24v-4zm6 8h-22c-2.21 0-4 1.79-4 4v28c0 2.21 1.79 4 4 4h22c2.21 0 4-1.79 4-4v-28c0-2.21-1.79-4-4-4zm0 32h-22v-28h22v28z'/%3E%3C/svg%3E");
  background-position: 6px 6px;
  background-repeat: no-repeat;
  background-size: 26px 26px;
  border-radius: 6px;
  height: 40px;
  width: 40px;
  margin: 10px 5px;
}

button#copy:active {
    box-shadow: inset 0px 0px 5px #6c6c6c;
}

textarea.clipboard-temp {
  position: fixed;
  top: 0;
  left: 0;
  width: 2em;
  height: 2em;
  padding: 0;
  border: None;
  outline: None;
  box-shadow: None;
  background: transparent;
}

.left-most-button {
  border-right: 0;
  border-top-left-radius: 6px;
  border-bottom-left-radius: 6px;
}

.middle-button {
  border-right: 0;
}

.right-most-button {
  border-top-right-radius: 6px;
  border-bottom-right-radius: 6px;
}

.button-container {
  font-size: 0;
  margin: 10px 10px 10px 0px;
}

.dark .button-container {
  filter: invert(1);
}

.button-container button {
  background-size: 32px 32px;
  background-position: 5px 5px;
  background-repeat: no-repeat;
}

@media print {
  .hideonprint {
    display: none;
  }
}

canvas {
  cursor: crosshair;
}

canvas:active {
  cursor: grabbing;
}

.fileinfo {
  width: 100%;
  max-width: 1000px;
  border: none;
  padding: 5px;
}

.fileinfo .title {
  font-size: 20pt;
  font-weight: bold;
}

.fileinfo td {
  overflow: hidden;
  white-space: nowrap;
  max-width: 1px;
  width: 50%;
  text-overflow: ellipsis;
}

.bom {
  border-collapse: collapse;
  font-family: Consolas, "DejaVu Sans Mono", Monaco, monospace;
  font-size: 10pt;
  table-layout: fixed;
  width: 100%;
  margin-top: 1px;
}

.bom th, .bom td {
  border: 1px solid black;
  padding: 5px;
  word-wrap: break-word;
  text-align: center;
  position: relative;
}

.dark .bom th, .dark .bom td {
  border: 1px solid #777;
}

.bom th {
  background-color: #CCCCCC;
  background-clip: padding-box;
}

.dark .bom th {
  background-color: #3b4749;
}

.bom tr.highlighted:nth-child(n) {
  background-color: #cfc;
}

.dark .bom tr.highlighted:nth-child(n) {
  background-color: #226022;
}

.bom tr:nth-child(even) {
  background-color: #f2f2f2;
}

.dark .bom tr:nth-child(even) {
  background-color: #313b40;
}

.bom tr.checked {
  color: #aaa;
}

.dark .bom tr.checked {
  color: #666;
}

.bom tr {
  transition: background-color 0.2s;
}

.bom .numCol {
  width: 25px;
}

.bom .Description {
  width: 10%;
}

.bom .Part {
  width: 10%;
}

.bom .Value {
  width: 15%;
}

.bom .Quantity {
  width: 65px;
}

.bom th .sortmark {
  position: absolute;
  right: 1px;
  top: 1px;
  margin-top: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #221 transparent;
  transform-origin: 50% 85%;
  transition: opacity 0.2s, transform 0.4s;
}

.dark .bom th .sortmark {
  filter: invert(1);
}

.bom th .sortmark.none {
  opacity: 0;
}

.bom th .sortmark.desc {
  transform: rotate(180deg);
}

.bom th:hover .sortmark.none {
  opacity: 0.5;
}

.bom .bom-checkbox {
  width: 30px;
  position: relative;
  user-select: none;
  -moz-user-select: none;
}

.bom .bom-checkbox:before {
  content: "";
  position: absolute;
  border-width: 15px;
  border-style: solid;
  border-color: #51829f transparent transparent transparent;
  visibility: hidden;
  top: -15px;
}

.bom .bom-checkbox:after {
  content: "Double click to set/unset all";
  position: absolute;
  color: white;
  top: -35px;
  left: -26px;
  background: #51829f;
  padding: 5px 15px;
  border-radius: 8px;
  white-space: nowrap;
  visibility: hidden;
}

.bom .bom-checkbox:hover:before, .bom .bom-checkbox:hover:after {
  visibility: visible;
  transition: visibility 0.2s linear 1s;
}

.split {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  overflow-y: auto;
  overflow-x: hidden;
  background-color: inherit;
}

.split.split-horizontal, .gutter.gutter-horizontal {
  height: 100%;
  float: left;
}

.gutter {
  background-color: #ddd;
  background-repeat: no-repeat;
  background-position: 50%;
  transition: background-color 0.3s;
}

.dark .gutter {
  background-color: #777;
}

.gutter.gutter-horizontal {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==');
  cursor: ew-resize;
  width: 5px;
}

.gutter.gutter-vertical {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=');
  cursor: ns-resize;
  height: 5px;
}

.searchbox {
  float: left;
  height: 40px;
  margin: 10px 5px;
  padding: 12px 32px;
  font-family: Consolas, "DejaVu Sans Mono", Monaco, monospace;
  font-size: 18px;
  box-sizing: border-box;
  border: 1px solid #888;
  border-radius: 6px;
  outline: none;
  background-color: #eee;
  transition: background-color 0.2s, border 0.2s;
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABNklEQVQ4T8XSMUvDQBQH8P/LElFa/AIZHcTBQSz0I/gFstTBRR2KUC4ldDxw7h0Bl3RRUATxi4iiODgoiLNrbQYp5J6cpJJqomkX33Z37/14d/dIa33MzDuYI4johOI4XhyNRteO46zNYjDzAxE1yBZprVeZ+QbAUhXEGJMA2Ox2u4+fQIa0mPmsCgCgJYQ4t7lfgF0opQYAdv9ABkKI/UnOFCClXKjX61cA1osQY8x9kiRNKeV7IWA3oyhaSdP0FkAtjxhj3hzH2RBCPOf3pzqYHCilfAAX+URm9oMguPzeWSGQvUcMYC8rOBJCHBRdqxTo9/vbRHRqi8bj8XKv1xvODbiuW2u32/bvf0SlDv4XYOY7z/Mavu+nM1+BmQ+NMc0wDF/LprP0DbTWW0T00ul0nn4b7Q87+X4Qmfiq2wAAAABJRU5ErkJggg==');
  background-position: 10px 10px;
  background-repeat: no-repeat;
}

.dark .searchbox {
  background-color: #111;
  color: #eee;
}

.searchbox::placeholder {
  color: #ccc;
}

.dark .searchbox::placeholder {
  color: #666;
}

.filter {
  width: calc(60% - 64px);
}

.reflookup {
  width: calc(40% - 10px);
}

input[type=text]:focus {
  background-color: white;
  border: 1px solid #333;
}

.dark input[type=text]:focus {
  background-color: #333;
  border: 1px solid #ccc;
}

mark.highlight {
  background-color: #5050ff;
  color: #fff;
  padding: 2px;
  border-radius: 6px;
}

.dark mark.highlight {
  background-color: #76a6da;
  color: #111;
}

.menubtn {
  background-color: white;
  border: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='36' viewBox='0 0 20 20'%3E%3Cpath fill='none' d='M0 0h20v20H0V0z'/%3E%3Cpath d='M15.95 10.78c.03-.25.05-.51.05-.78s-.02-.53-.06-.78l1.69-1.32c.15-.12.19-.34.1-.51l-1.6-2.77c-.1-.18-.31-.24-.49-.18l-1.99.8c-.42-.32-.86-.58-1.35-.78L12 2.34c-.03-.2-.2-.34-.4-.34H8.4c-.2 0-.36.14-.39.34l-.3 2.12c-.49.2-.94.47-1.35.78l-1.99-.8c-.18-.07-.39 0-.49.18l-1.6 2.77c-.1.18-.06.39.1.51l1.69 1.32c-.04.25-.07.52-.07.78s.02.53.06.78L2.37 12.1c-.15.12-.19.34-.1.51l1.6 2.77c.1.18.31.24.49.18l1.99-.8c.42.32.86.58 1.35.78l.3 2.12c.04.2.2.34.4.34h3.2c.2 0 .37-.14.39-.34l.3-2.12c.49-.2.94-.47 1.35-.78l1.99.8c.18.07.39 0 .49-.18l1.6-2.77c.1-.18.06-.39-.1-.51l-1.67-1.32zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z'/%3E%3C/svg%3E%0A");
  background-position: center;
  background-repeat: no-repeat;
}

.statsbtn {
  background-color: white;
  border: none;
  background-image: url("data:image/svg+xml,%3Csvg width='36' height='36' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4 6h28v24H4V6zm0 8h28v8H4m9-16v24h10V5.8' fill='none' stroke='%23000' stroke-width='2'/%3E%3C/svg%3E");
  background-position: center;
  background-repeat: no-repeat;
}

.iobtn {
  background-color: white;
  border: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='36'%3E%3Cpath fill='none' stroke='%23000' stroke-width='2' d='M3 33v-7l6.8-7h16.5l6.7 7v7H3zM3.2 26H33M21 9l5-5.9 5 6h-2.5V15h-5V9H21zm-4.9 0l-5 6-5-6h2.5V3h5v6h2.5z'/%3E%3Cpath fill='none' stroke='%23000' d='M6.1 29.5H10'/%3E%3C/svg%3E");
  background-position: center;
  background-repeat: no-repeat;
}

.dark .statsbtn, .dark .savebtn, .dark .menubtn, .dark .iobtn {
  filter: invert(1);
}

.flexbox {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
}

.savebtn {
  background-color: #d6d6d6;
  width: auto;
  height: 30px;
  flex-grow: 1;
  margin: 5px;
  border-radius: 4px;
}

.savebtn:active {
  background-color: #0a0;
  color: white;
}

.dark .savebtn:active {
  /* This will be inverted */
  background-color: #b3b;
}

.stats {
  border-collapse: collapse;
  font-size: 12pt;
  table-layout: fixed;
  width: 100%;
  min-width: 450px;
}

.dark .stats td {
  border: 1px solid #bbb;
}

.stats td {
  border: 1px solid black;
  padding: 5px;
  word-wrap: break-word;
  text-align: center;
  position: relative;
}

#checkbox-stats div {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

#checkbox-stats .bar {
  background-color: rgba(28, 251, 0, 0.6);
}

.menu {
  position: relative;
  display: inline-block;
  margin: 10px 10px 10px 0px;
}

.menu-content {
  display: none;
  position: absolute;
  background-color: white;
  right: 0;
  min-width: 300px;
  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
  z-index: 100;
  padding: 8px;
}

.dark .menu-content {
  background-color: #111;
}

.menu:hover .menu-content {
  display: block;
}

.menu:hover .menubtn, .menu:hover .iobtn, .menu:hover .statsbtn {
  background-color: #eee;
}

.menu-label {
  display: inline-block;
  padding: 8px;
  border: 1px solid #ccc;
  border-top: 0;
  width: calc(100% - 18px);
}

.menu-label-top {
  border-top: 1px solid #ccc;
}

.menu-textbox {
  float: left;
  height: 24px;
  margin: 10px 5px;
  padding: 5px 5px;
  font-family: Consolas, "DejaVu Sans Mono", Monaco, monospace;
  font-size: 14px;
  box-sizing: border-box;
  border: 1px solid #888;
  border-radius: 4px;
  outline: none;
  background-color: #eee;
  transition: background-color 0.2s, border 0.2s;
  width: calc(100% - 10px);
}

.menu-textbox.invalid, .dark .menu-textbox.invalid {
  color: red;
}

.dark .menu-textbox {
  background-color: #222;
  color: #eee;
}

.radio-container {
  margin: 4px;
}

.topmostdiv {
  width: 100%;
  height: 100%;
  background-color: white;
  transition: background-color 0.3s;
}

#top {
  height: 78px;
  border-bottom: 2px solid black;
}

.dark #top {
  border-bottom: 2px solid #ccc;
}

#dbg {
  display: block;
}

::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #aaa;
}

::-webkit-scrollbar-thumb {
  background: #666;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #555;
}

.slider {
  -webkit-appearance: none;
  width: 100%;
  margin: 3px 0;
  padding: 0;
  outline: none;
  opacity: 0.7;
  -webkit-transition: .2s;
  transition: opacity .2s;
  border-radius: 3px;
}

.slider:hover {
  opacity: 1;
}

.slider:focus {
  outline: none;
}

.slider::-webkit-slider-runnable-track {
  -webkit-appearance: none;
  width: 100%;
  height: 8px;
  background: #d3d3d3;
  border-radius: 3px;
  border: none;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #0a0;
  cursor: pointer;
  margin-top: -4px;
}

.dark .slider::-webkit-slider-thumb {
  background: #3d3;
}

.slider::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #0a0;
  cursor: pointer;
}

.slider::-moz-range-track {
  height: 8px;
  background: #d3d3d3;
  border-radius: 3px;
}

.dark .slider::-moz-range-thumb {
  background: #3d3;
}

.slider::-ms-track {
  width: 100%;
  height: 8px;
  border-width: 3px 0;
  background: transparent;
  border-color: transparent;
  color: transparent;
  transition: opacity .2s;
}

.slider::-ms-fill-lower {
  background: #d3d3d3;
  border: none;
  border-radius: 3px;
}

.slider::-ms-fill-upper {
  background: #d3d3d3;
  border: none;
  border-radius: 3px;
}

.slider::-ms-thumb {
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #0a0;
  cursor: pointer;
  margin: 0;
}

.shameless-plug {
  font-size: 0.8em;
  text-align: center;
  display: block;
}

a {
  color: #0278a4;
}

.dark a {
  color: #00b9fd;
}

#frontcanvas, #backcanvas {
    touch-action: none;
}

 
  </style>
  <script type="text/javascript" >
///////////////////////////////////////////////
/*
  Split.js - v1.3.5
  MIT License
  https://github.com/nathancahill/Split.js
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Split=t()}(this,function(){"use strict";var e=window,t=e.document,n="addEventListener",i="removeEventListener",r="getBoundingClientRect",s=function(){return!1},o=e.attachEvent&&!e[n],a=["","-webkit-","-moz-","-o-"].filter(function(e){var n=t.createElement("div");return n.style.cssText="width:"+e+"calc(9px)",!!n.style.length}).shift()+"calc",l=function(e){return"string"==typeof e||e instanceof String?t.querySelector(e):e};return function(u,c){function z(e,t,n){var i=A(y,t,n);Object.keys(i).forEach(function(t){return e.style[t]=i[t]})}function h(e,t){var n=B(y,t);Object.keys(n).forEach(function(t){return e.style[t]=n[t]})}function f(e){var t=E[this.a],n=E[this.b],i=t.size+n.size;t.size=e/this.size*i,n.size=i-e/this.size*i,z(t.element,t.size,this.aGutterSize),z(n.element,n.size,this.bGutterSize)}function m(e){var t;this.dragging&&((t="touches"in e?e.touches[0][b]-this.start:e[b]-this.start)<=E[this.a].minSize+M+this.aGutterSize?t=E[this.a].minSize+this.aGutterSize:t>=this.size-(E[this.b].minSize+M+this.bGutterSize)&&(t=this.size-(E[this.b].minSize+this.bGutterSize)),f.call(this,t),c.onDrag&&c.onDrag())}function g(){var e=E[this.a].element,t=E[this.b].element;this.size=e[r]()[y]+t[r]()[y]+this.aGutterSize+this.bGutterSize,this.start=e[r]()[G]}function d(){var t=this,n=E[t.a].element,r=E[t.b].element;t.dragging&&c.onDragEnd&&c.onDragEnd(),t.dragging=!1,e[i]("mouseup",t.stop),e[i]("touchend",t.stop),e[i]("touchcancel",t.stop),t.parent[i]("mousemove",t.move),t.parent[i]("touchmove",t.move),delete t.stop,delete t.move,n[i]("selectstart",s),n[i]("dragstart",s),r[i]("selectstart",s),r[i]("dragstart",s),n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",r.style.userSelect="",r.style.webkitUserSelect="",r.style.MozUserSelect="",r.style.pointerEvents="",t.gutter.style.cursor="",t.parent.style.cursor=""}function S(t){var i=this,r=E[i.a].element,o=E[i.b].element;!i.dragging&&c.onDragStart&&c.onDragStart(),t.preventDefault(),i.dragging=!0,i.move=m.bind(i),i.stop=d.bind(i),e[n]("mouseup",i.stop),e[n]("touchend",i.stop),e[n]("touchcancel",i.stop),i.parent[n]("mousemove",i.move),i.parent[n]("touchmove",i.move),r[n]("selectstart",s),r[n]("dragstart",s),o[n]("selectstart",s),o[n]("dragstart",s),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",i.gutter.style.cursor=j,i.parent.style.cursor=j,g.call(i)}function v(e){e.forEach(function(t,n){if(n>0){var i=F[n-1],r=E[i.a],s=E[i.b];r.size=e[n-1],s.size=t,z(r.element,r.size,i.aGutterSize),z(s.element,s.size,i.bGutterSize)}})}function p(){F.forEach(function(e){e.parent.removeChild(e.gutter),E[e.a].element.style[y]="",E[e.b].element.style[y]=""})}void 0===c&&(c={});var y,b,G,E,w=l(u[0]).parentNode,D=e.getComputedStyle(w).flexDirection,U=c.sizes||u.map(function(){return 100/u.length}),k=void 0!==c.minSize?c.minSize:100,x=Array.isArray(k)?k:u.map(function(){return k}),L=void 0!==c.gutterSize?c.gutterSize:10,M=void 0!==c.snapOffset?c.snapOffset:30,O=c.direction||"horizontal",j=c.cursor||("horizontal"===O?"ew-resize":"ns-resize"),C=c.gutter||function(e,n){var i=t.createElement("div");return i.className="gutter gutter-"+n,i},A=c.elementStyle||function(e,t,n){var i={};return"string"==typeof t||t instanceof String?i[e]=t:i[e]=o?t+"%":a+"("+t+"% - "+n+"px)",i},B=c.gutterStyle||function(e,t){return n={},n[e]=t+"px",n;var n};"horizontal"===O?(y="width","clientWidth",b="clientX",G="left","paddingLeft"):"vertical"===O&&(y="height","clientHeight",b="clientY",G="top","paddingTop");var F=[];return E=u.map(function(e,t){var i,s={element:l(e),size:U[t],minSize:x[t]};if(t>0&&(i={a:t-1,b:t,dragging:!1,isFirst:1===t,isLast:t===u.length-1,direction:O,parent:w},i.aGutterSize=L,i.bGutterSize=L,i.isFirst&&(i.aGutterSize=L/2),i.isLast&&(i.bGutterSize=L/2),"row-reverse"===D||"column-reverse"===D)){var a=i.a;i.a=i.b,i.b=a}if(!o&&t>0){var c=C(t,O);h(c,L),c[n]("mousedown",S.bind(i)),c[n]("touchstart",S.bind(i)),w.insertBefore(c,s.element),i.gutter=c}0===t||t===u.length-1?z(s.element,s.size,L/2):z(s.element,s.size,L);var f=s.element[r]()[y];return f<s.minSize&&(s.minSize=f),t>0&&F.push(i),s}),o?{setSizes:v,destroy:p}:{setSizes:v,getSizes:function(){return E.map(function(e){return e.size})},collapse:function(e){if(e===F.length){var t=F[e-1];g.call(t),o||f.call(t,t.size-t.bGutterSize)}else{var n=F[e];g.call(n),o||f.call(n,n.aGutterSize)}},destroy:p}}});

///////////////////////////////////////////////

///////////////////////////////////////////////
// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>
// This work is free. You can redistribute it and/or modify it
// under the terms of the WTFPL, Version 2
// For more information see LICENSE.txt or http://www.wtfpl.net/
//
// For more information, the home page:
// http://pieroxy.net/blog/pages/lz-string/testing.html
//
// LZ-based compression algorithm, version 1.4.4
var LZString=function(){var o=String.fromCharCode,i={};var n={decompressFromBase64:function(o){return null==o?"":""==o?null:n._decompress(o.length,32,function(n){return function(o,n){if(!i[o]){i[o]={};for(var t=0;t<o.length;t++)i[o][o.charAt(t)]=t}return i[o][n]}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o.charAt(n))})},_decompress:function(i,n,t){var r,e,a,s,p,u,l,f=[],c=4,d=4,h=3,v="",g=[],m={val:t(0),position:n,index:1};for(r=0;r<3;r+=1)f[r]=r;for(a=0,p=Math.pow(2,2),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;switch(a){case 0:for(a=0,p=Math.pow(2,8),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;l=o(a);break;case 1:for(a=0,p=Math.pow(2,16),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;l=o(a);break;case 2:return""}for(f[3]=l,e=l,g.push(l);;){if(m.index>i)return"";for(a=0,p=Math.pow(2,h),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;switch(l=a){case 0:for(a=0,p=Math.pow(2,8),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;f[d++]=o(a),l=d-1,c--;break;case 1:for(a=0,p=Math.pow(2,16),u=1;u!=p;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=t(m.index++)),a|=(s>0?1:0)*u,u<<=1;f[d++]=o(a),l=d-1,c--;break;case 2:return g.join("")}if(0==c&&(c=Math.pow(2,h),h++),f[l])v=f[l];else{if(l!==d)return null;v=e+e.charAt(0)}g.push(v),f[d++]=e+v.charAt(0),e=v,0==--c&&(c=Math.pow(2,h),h++)}}};return n}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module?module.exports=LZString:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return LZString});
///////////////////////////////////////////////

///////////////////////////////////////////////
/*!
 * PEP v0.4.3 | https://github.com/jquery/PEP
 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
 */
! function (a, b) {
  "object" == typeof exports && "undefined" != typeof module ? module.exports = b() : "function" == typeof define && define.amd ? define(b) : a.PointerEventsPolyfill = b()
}(this, function () {
  "use strict";

  function a(a, b) {
    b = b || Object.create(null);
    var c = document.createEvent("Event");
    c.initEvent(a, b.bubbles || !1, b.cancelable || !1);
    for (var d, e = 2; e < m.length; e++) d = m[e], c[d] = b[d] || n[e];
    c.buttons = b.buttons || 0;
    var f = 0;
    return f = b.pressure && c.buttons ? b.pressure : c.buttons ? .5 : 0, c.x = c.clientX, c.y = c.clientY, c.pointerId = b.pointerId || 0, c.width = b.width || 0, c.height = b.height || 0, c.pressure = f, c.tiltX = b.tiltX || 0, c.tiltY = b.tiltY || 0, c.twist = b.twist || 0, c.tangentialPressure = b.tangentialPressure || 0, c.pointerType = b.pointerType || "", c.hwTimestamp = b.hwTimestamp || 0, c.isPrimary = b.isPrimary || !1, c
  }

  function b() {
    this.array = [], this.size = 0
  }

  function c(a, b, c, d) {
    this.addCallback = a.bind(d), this.removeCallback = b.bind(d), this.changedCallback = c.bind(d), A && (this.observer = new A(this.mutationWatcher.bind(this)))
  }

  function d(a) {
    return "body /shadow-deep/ " + e(a)
  }

  function e(a) {
    return '[touch-action="' + a + '"]'
  }

  function f(a) {
    return "{ -ms-touch-action: " + a + "; touch-action: " + a + "; }"
  }

  function g() {
    if (F) {
      D.forEach(function (a) {
        String(a) === a ? (E += e(a) + f(a) + "\n", G && (E += d(a) + f(a) + "\n")) : (E += a.selectors.map(e) + f(a.rule) + "\n", G && (E += a.selectors.map(d) + f(a.rule) + "\n"))
      });
      var a = document.createElement("style");
      a.textContent = E, document.head.appendChild(a)
    }
  }

  function h() {
    if (!window.PointerEvent) {
      if (window.PointerEvent = a, window.navigator.msPointerEnabled) {
        var b = window.navigator.msMaxTouchPoints;
        Object.defineProperty(window.navigator, "maxTouchPoints", {
          value: b,
          enumerable: !0
        }), u.registerSource("ms", _)
      } else Object.defineProperty(window.navigator, "maxTouchPoints", {
        value: 0,
        enumerable: !0
      }), u.registerSource("mouse", N), void 0 !== window.ontouchstart && u.registerSource("touch", V);
      u.register(document)
    }
  }

  function i(a) {
    if (!u.pointermap.has(a)) {
      var b = new Error("InvalidPointerId");
      throw b.name = "InvalidPointerId", b
    }
  }

  function j(a) {
    for (var b = a.parentNode; b && b !== a.ownerDocument;) b = b.parentNode;
    if (!b) {
      var c = new Error("InvalidStateError");
      throw c.name = "InvalidStateError", c
    }
  }

  function k(a) {
    var b = u.pointermap.get(a);
    return 0 !== b.buttons
  }

  function l() {
    window.Element && !Element.prototype.setPointerCapture && Object.defineProperties(Element.prototype, {
      setPointerCapture: {
        value: W
      },
      releasePointerCapture: {
        value: X
      },
      hasPointerCapture: {
        value: Y
      }
    })
  }
  var m = ["bubbles", "cancelable", "view", "detail", "screenX", "screenY", "clientX", "clientY", "ctrlKey", "altKey", "shiftKey", "metaKey", "button", "relatedTarget", "pageX", "pageY"],
    n = [!1, !1, null, null, 0, 0, 0, 0, !1, !1, !1, !1, 0, null, 0, 0],
    o = window.Map && window.Map.prototype.forEach,
    p = o ? Map : b;
  b.prototype = {
    set: function (a, b) {
      return void 0 === b ? this["delete"](a) : (this.has(a) || this.size++, void(this.array[a] = b))
    },
    has: function (a) {
      return void 0 !== this.array[a]
    },
    "delete": function (a) {
      this.has(a) && (delete this.array[a], this.size--)
    },
    get: function (a) {
      return this.array[a]
    },
    clear: function () {
      this.array.length = 0, this.size = 0
    },
    forEach: function (a, b) {
      return this.array.forEach(function (c, d) {
        a.call(b, c, d, this)
      }, this)
    }
  };
  var q = ["bubbles", "cancelable", "view", "detail", "screenX", "screenY", "clientX", "clientY", "ctrlKey", "altKey", "shiftKey", "metaKey", "button", "relatedTarget", "buttons", "pointerId", "width", "height", "pressure", "tiltX", "tiltY", "pointerType", "hwTimestamp", "isPrimary", "type", "target", "currentTarget", "which", "pageX", "pageY", "timeStamp"],
    r = [!1, !1, null, null, 0, 0, 0, 0, !1, !1, !1, !1, 0, null, 0, 0, 0, 0, 0, 0, 0, "", 0, !1, "", null, null, 0, 0, 0, 0],
    s = {
      pointerover: 1,
      pointerout: 1,
      pointerenter: 1,
      pointerleave: 1
    },
    t = "undefined" != typeof SVGElementInstance,
    u = {
      pointermap: new p,
      eventMap: Object.create(null),
      captureInfo: Object.create(null),
      eventSources: Object.create(null),
      eventSourceList: [],
      registerSource: function (a, b) {
        var c = b,
          d = c.events;
        d && (d.forEach(function (a) {
          c[a] && (this.eventMap[a] = c[a].bind(c))
        }, this), this.eventSources[a] = c, this.eventSourceList.push(c))
      },
      register: function (a) {
        for (var b, c = this.eventSourceList.length, d = 0; d < c && (b = this.eventSourceList[d]); d++)
          b.register.call(b, a)
      },
      unregister: function (a) {
        for (var b, c = this.eventSourceList.length, d = 0; d < c && (b = this.eventSourceList[d]); d++)
          b.unregister.call(b, a)
      },
      contains: function (a, b) {
        try {
          return a.contains(b)
        } catch (c) {
          return !1
        }
      },
      down: function (a) {
        a.bubbles = !0, this.fireEvent("pointerdown", a)
      },
      move: function (a) {
        a.bubbles = !0, this.fireEvent("pointermove", a)
      },
      up: function (a) {
        a.bubbles = !0, this.fireEvent("pointerup", a)
      },
      enter: function (a) {
        a.bubbles = !1, this.fireEvent("pointerenter", a)
      },
      leave: function (a) {
        a.bubbles = !1, this.fireEvent("pointerleave", a)
      },
      over: function (a) {
        a.bubbles = !0, this.fireEvent("pointerover", a)
      },
      out: function (a) {
        a.bubbles = !0, this.fireEvent("pointerout", a)
      },
      cancel: function (a) {
        a.bubbles = !0, this.fireEvent("pointercancel", a)
      },
      leaveOut: function (a) {
        this.out(a), this.propagate(a, this.leave, !1)
      },
      enterOver: function (a) {
        this.over(a), this.propagate(a, this.enter, !0)
      },
      eventHandler: function (a) {
        if (!a._handledByPE) {
          var b = a.type,
            c = this.eventMap && this.eventMap[b];
          c && c(a), a._handledByPE = !0
        }
      },
      listen: function (a, b) {
        b.forEach(function (b) {
          this.addEvent(a, b)
        }, this)
      },
      unlisten: function (a, b) {
        b.forEach(function (b) {
          this.removeEvent(a, b)
        }, this)
      },
      addEvent: function (a, b) {
        a.addEventListener(b, this.boundHandler)
      },
      removeEvent: function (a, b) {
        a.removeEventListener(b, this.boundHandler)
      },
      makeEvent: function (b, c) {
        this.captureInfo[c.pointerId] && (c.relatedTarget = null);
        var d = new a(b, c);
        return c.preventDefault && (d.preventDefault = c.preventDefault), d._target = d._target || c.target, d
      },
      fireEvent: function (a, b) {
        var c = this.makeEvent(a, b);
        return this.dispatchEvent(c)
      },
      cloneEvent: function (a) {
        for (var b, c = Object.create(null), d = 0; d < q.length; d++) b = q[d], c[b] = a[b] || r[d], !t || "target" !== b && "relatedTarget" !== b || c[b] instanceof SVGElementInstance && (c[b] = c[b].correspondingUseElement);
        return a.preventDefault && (c.preventDefault = function () {
          a.preventDefault()
        }), c
      },
      getTarget: function (a) {
        var b = this.captureInfo[a.pointerId];
        return b ? a._target !== b && a.type in s ? void 0 : b : a._target
      },
      propagate: function (a, b, c) {
        for (var d = a.target, e = []; d !== document && !d.contains(a.relatedTarget);)
          if (e.push(d), d = d.parentNode, !d) return;
        c && e.reverse(), e.forEach(function (c) {
          a.target = c, b.call(this, a)
        }, this)
      },
      setCapture: function (b, c, d) {
        this.captureInfo[b] && this.releaseCapture(b, d), this.captureInfo[b] = c, this.implicitRelease = this.releaseCapture.bind(this, b, d), document.addEventListener("pointerup", this.implicitRelease), document.addEventListener("pointercancel", this.implicitRelease);
        var e = new a("gotpointercapture");
        e.pointerId = b, e._target = c, d || this.asyncDispatchEvent(e)
      },
      releaseCapture: function (b, c) {
        var d = this.captureInfo[b];
        if (d) {
          this.captureInfo[b] = void 0, document.removeEventListener("pointerup", this.implicitRelease), document.removeEventListener("pointercancel", this.implicitRelease);
          var e = new a("lostpointercapture");
          e.pointerId = b, e._target = d, c || this.asyncDispatchEvent(e)
        }
      },
      dispatchEvent: /*scope.external.dispatchEvent || */ function (a) {
        var b = this.getTarget(a);
        if (b) return b.dispatchEvent(a)
      },
      asyncDispatchEvent: function (a) {
        requestAnimationFrame(this.dispatchEvent.bind(this, a))
      }
    };
  u.boundHandler = u.eventHandler.bind(u);
  var v = {
      shadow: function (a) {
        if (a) return a.shadowRoot || a.webkitShadowRoot
      },
      canTarget: function (a) {
        return a && Boolean(a.elementFromPoint)
      },
      targetingShadow: function (a) {
        var b = this.shadow(a);
        if (this.canTarget(b)) return b
      },
      olderShadow: function (a) {
        var b = a.olderShadowRoot;
        if (!b) {
          var c = a.querySelector("shadow");
          c && (b = c.olderShadowRoot)
        }
        return b
      },
      allShadows: function (a) {
        for (var b = [], c = this.shadow(a); c;) b.push(c), c = this.olderShadow(c);
        return b
      },
      searchRoot: function (a, b, c) {
        if (a) {
          var d, e, f = a.elementFromPoint(b, c);
          for (e = this.targetingShadow(f); e;) {
            if (d = e.elementFromPoint(b, c)) {
              var g = this.targetingShadow(d);
              return this.searchRoot(g, b, c) || d
            }
            e = this.olderShadow(e)
          }
          return f
        }
      },
      owner: function (a) {
        for (var b = a; b.parentNode;) b = b.parentNode;
        return b.nodeType !== Node.DOCUMENT_NODE && b.nodeType !== Node.DOCUMENT_FRAGMENT_NODE && (b = document), b
      },
      findTarget: function (a) {
        var b = a.clientX,
          c = a.clientY,
          d = this.owner(a.target);
        return d.elementFromPoint(b, c) || (d = document), this.searchRoot(d, b, c)
      }
    },
    w = Array.prototype.forEach.call.bind(Array.prototype.forEach),
    x = Array.prototype.map.call.bind(Array.prototype.map),
    y = Array.prototype.slice.call.bind(Array.prototype.slice),
    z = Array.prototype.filter.call.bind(Array.prototype.filter),
    A = window.MutationObserver || window.WebKitMutationObserver,
    B = "[touch-action]",
    C = {
      subtree: !0,
      childList: !0,
      attributes: !0,
      attributeOldValue: !0,
      attributeFilter: ["touch-action"]
    };
  c.prototype = {
    watchSubtree: function (a) {
      //
      this.observer && v.canTarget(a) && this.observer.observe(a, C)
    },
    enableOnSubtree: function (a) {
      this.watchSubtree(a), a === document && "complete" !== document.readyState ? this.installOnLoad() : this.installNewSubtree(a)
    },
    installNewSubtree: function (a) {
      w(this.findElements(a), this.addElement, this)
    },
    findElements: function (a) {
      return a.querySelectorAll ? a.querySelectorAll(B) : []
    },
    removeElement: function (a) {
      this.removeCallback(a)
    },
    addElement: function (a) {
      this.addCallback(a)
    },
    elementChanged: function (a, b) {
      this.changedCallback(a, b)
    },
    concatLists: function (a, b) {
      return a.concat(y(b))
    },
    installOnLoad: function () {
      document.addEventListener("readystatechange", function () {
        "complete" === document.readyState && this.installNewSubtree(document)
      }.bind(this))
    },
    isElement: function (a) {
      return a.nodeType === Node.ELEMENT_NODE
    },
    flattenMutationTree: function (a) {
      var b = x(a, this.findElements, this);
      return b.push(z(a, this.isElement)), b.reduce(this.concatLists, [])
    },
    mutationWatcher: function (a) {
      a.forEach(this.mutationHandler, this)
    },
    mutationHandler: function (a) {
      if ("childList" === a.type) {
        var b = this.flattenMutationTree(a.addedNodes);
        b.forEach(this.addElement, this);
        var c = this.flattenMutationTree(a.removedNodes);
        c.forEach(this.removeElement, this)
      } else "attributes" === a.type && this.elementChanged(a.target, a.oldValue)
    }
  };
  var D = ["none", "auto", "pan-x", "pan-y", {
      rule: "pan-x pan-y",
      selectors: ["pan-x pan-y", "pan-y pan-x"]
    }],
    E = "",
    F = window.PointerEvent || window.MSPointerEvent,
    G = !window.ShadowDOMPolyfill && document.head.createShadowRoot,
    H = u.pointermap,
    I = 25,
    J = [1, 4, 2, 8, 16],
    K = !1;
  try {
    K = 1 === new MouseEvent("test", {
      buttons: 1
    }).buttons
  } catch (L) {}
  var M, N = {
      POINTER_ID: 1,
      POINTER_TYPE: "mouse",
      events: ["mousedown", "mousemove", "mouseup", "mouseover", "mouseout"],
      register: function (a) {
        u.listen(a, this.events)
      },
      unregister: function (a) {
        u.unlisten(a, this.events)
      },
      lastTouches: [],
      isEventSimulatedFromTouch: function (a) {
        for (var b, c = this.lastTouches, d = a.clientX, e = a.clientY, f = 0, g = c.length; f < g && (b = c[f]); f++) {
          var h = Math.abs(d - b.x),
            i = Math.abs(e - b.y);
          if (h <= I && i <= I) return !0
        }
      },
      prepareEvent: function (a) {
        var b = u.cloneEvent(a),
          c = b.preventDefault;
        return b.preventDefault = function () {
          a.preventDefault(), c()
        }, b.pointerId = this.POINTER_ID, b.isPrimary = !0, b.pointerType = this.POINTER_TYPE, b
      },
      prepareButtonsForMove: function (a, b) {
        var c = H.get(this.POINTER_ID);
        0 !== b.which && c ? a.buttons = c.buttons : a.buttons = 0, b.buttons = a.buttons
      },
      mousedown: function (a) {
        if (!this.isEventSimulatedFromTouch(a)) {
          var b = H.get(this.POINTER_ID),
            c = this.prepareEvent(a);
          K || (c.buttons = J[c.button], b && (c.buttons |= b.buttons), a.buttons = c.buttons), H.set(this.POINTER_ID, a), b && 0 !== b.buttons ? u.move(c) : u.down(c)
        }
      },
      mousemove: function (a) {
        if (!this.isEventSimulatedFromTouch(a)) {
          var b = this.prepareEvent(a);
          K || this.prepareButtonsForMove(b, a), b.button = -1, H.set(this.POINTER_ID, a), u.move(b)
        }
      },
      mouseup: function (a) {
        if (!this.isEventSimulatedFromTouch(a)) {
          var b = H.get(this.POINTER_ID),
            c = this.prepareEvent(a);
          if (!K) {
            var d = J[c.button];
            c.buttons = b ? b.buttons & ~d : 0, a.buttons = c.buttons
          }
          H.set(this.POINTER_ID, a),
            c.buttons &= ~J[c.button], 0 === c.buttons ? u.up(c) : u.move(c)
        }
      },
      mouseover: function (a) {
        if (!this.isEventSimulatedFromTouch(a)) {
          var b = this.prepareEvent(a);
          K || this.prepareButtonsForMove(b, a), b.button = -1, H.set(this.POINTER_ID, a), u.enterOver(b)
        }
      },
      mouseout: function (a) {
        if (!this.isEventSimulatedFromTouch(a)) {
          var b = this.prepareEvent(a);
          K || this.prepareButtonsForMove(b, a), b.button = -1, u.leaveOut(b)
        }
      },
      cancel: function (a) {
        var b = this.prepareEvent(a);
        u.cancel(b), this.deactivateMouse()
      },
      deactivateMouse: function () {
        H["delete"](this.POINTER_ID)
      }
    },
    O = u.captureInfo,
    P = v.findTarget.bind(v),
    Q = v.allShadows.bind(v),
    R = u.pointermap,
    S = 2500,
    T = 200,
    U = "touch-action",
    V = {
      events: ["touchstart", "touchmove", "touchend", "touchcancel"],
      register: function (a) {
        M.enableOnSubtree(a)
      },
      unregister: function () {},
      elementAdded: function (a) {
        var b = a.getAttribute(U),
          c = this.touchActionToScrollType(b);
        c && (a._scrollType = c, u.listen(a, this.events),
          Q(a).forEach(function (a) {
            a._scrollType = c, u.listen(a, this.events)
          }, this))
      },
      elementRemoved: function (a) {
        a._scrollType = void 0, u.unlisten(a, this.events),
          Q(a).forEach(function (a) {
            a._scrollType = void 0, u.unlisten(a, this.events)
          }, this)
      },
      elementChanged: function (a, b) {
        var c = a.getAttribute(U),
          d = this.touchActionToScrollType(c),
          e = this.touchActionToScrollType(b);
        d && e ? (a._scrollType = d, Q(a).forEach(function (a) {
          a._scrollType = d
        }, this)) : e ? this.elementRemoved(a) : d && this.elementAdded(a)
      },
      scrollTypes: {
        EMITTER: "none",
        XSCROLLER: "pan-x",
        YSCROLLER: "pan-y",
        SCROLLER: /^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/
      },
      touchActionToScrollType: function (a) {
        var b = a,
          c = this.scrollTypes;
        return "none" === b ? "none" : b === c.XSCROLLER ? "X" : b === c.YSCROLLER ? "Y" : c.SCROLLER.exec(b) ? "XY" : void 0
      },
      POINTER_TYPE: "touch",
      firstTouch: null,
      isPrimaryTouch: function (a) {
        return this.firstTouch === a.identifier
      },
      setPrimaryTouch: function (a) {
        (0 === R.size || 1 === R.size && R.has(1)) && (this.firstTouch = a.identifier, this.firstXY = {
          X: a.clientX,
          Y: a.clientY
        }, this.scrolling = !1, this.cancelResetClickCount())
      },
      removePrimaryPointer: function (a) {
        a.isPrimary && (this.firstTouch = null, this.firstXY = null, this.resetClickCount())
      },
      clickCount: 0,
      resetId: null,
      resetClickCount: function () {
        var a = function () {
          this.clickCount = 0, this.resetId = null
        }.bind(this);
        this.resetId = setTimeout(a, T)
      },
      cancelResetClickCount: function () {
        this.resetId && clearTimeout(this.resetId)
      },
      typeToButtons: function (a) {
        var b = 0;
        return "touchstart" !== a && "touchmove" !== a || (b = 1), b
      },
      touchToPointer: function (a) {
        var b = this.currentTouchEvent,
          c = u.cloneEvent(a),
          d = c.pointerId = a.identifier + 2;
        c.target = O[d] || P(c), c.bubbles = !0, c.cancelable = !0, c.detail = this.clickCount, c.button = 0, c.buttons = this.typeToButtons(b.type), c.width = 2 * (a.radiusX || a.webkitRadiusX || 0), c.height = 2 * (a.radiusY || a.webkitRadiusY || 0), c.pressure = a.force || a.webkitForce || .5, c.isPrimary = this.isPrimaryTouch(a), c.pointerType = this.POINTER_TYPE,
          c.altKey = b.altKey, c.ctrlKey = b.ctrlKey, c.metaKey = b.metaKey, c.shiftKey = b.shiftKey;
        var e = this;
        return c.preventDefault = function () {
          e.scrolling = !1, e.firstXY = null, b.preventDefault()
        }, c
      },
      processTouches: function (a, b) {
        var c = a.changedTouches;
        this.currentTouchEvent = a;
        for (var d, e = 0; e < c.length; e++) d = c[e], b.call(this, this.touchToPointer(d))
      },
      shouldScroll: function (a) {
        if (this.firstXY) {
          var b, c = a.currentTarget._scrollType;
          if ("none" === c)
            b = !1;
          else if ("XY" === c)
            b = !0;
          else {
            var d = a.changedTouches[0],
              e = c,
              f = "Y" === c ? "X" : "Y",
              g = Math.abs(d["client" + e] - this.firstXY[e]),
              h = Math.abs(d["client" + f] - this.firstXY[f]);
            b = g >= h
          }
          return this.firstXY = null, b
        }
      },
      findTouch: function (a, b) {
        for (var c, d = 0, e = a.length; d < e && (c = a[d]); d++)
          if (c.identifier === b) return !0
      },
      vacuumTouches: function (a) {
        var b = a.touches;
        if (R.size >= b.length) {
          var c = [];
          R.forEach(function (a, d) {
            if (1 !== d && !this.findTouch(b, d - 2)) {
              var e = a.out;
              c.push(e)
            }
          }, this), c.forEach(this.cancelOut, this)
        }
      },
      touchstart: function (a) {
        this.vacuumTouches(a), this.setPrimaryTouch(a.changedTouches[0]), this.dedupSynthMouse(a), this.scrolling || (this.clickCount++, this.processTouches(a, this.overDown))
      },
      overDown: function (a) {
        R.set(a.pointerId, {
          target: a.target,
          out: a,
          outTarget: a.target
        }), u.enterOver(a), u.down(a)
      },
      touchmove: function (a) {
        this.scrolling || (this.shouldScroll(a) ? (this.scrolling = !0, this.touchcancel(a)) : (a.preventDefault(), this.processTouches(a, this.moveOverOut)))
      },
      moveOverOut: function (a) {
        var b = a,
          c = R.get(b.pointerId);
        if (c) {
          var d = c.out,
            e = c.outTarget;
          u.move(b), d && e !== b.target && (d.relatedTarget = b.target, b.relatedTarget = e,
            d.target = e, b.target ? (u.leaveOut(d), u.enterOver(b)) : (
              b.target = e, b.relatedTarget = null, this.cancelOut(b))), c.out = b, c.outTarget = b.target
        }
      },
      touchend: function (a) {
        this.dedupSynthMouse(a), this.processTouches(a, this.upOut)
      },
      upOut: function (a) {
        this.scrolling || (u.up(a), u.leaveOut(a)), this.cleanUpPointer(a)
      },
      touchcancel: function (a) {
        this.processTouches(a, this.cancelOut)
      },
      cancelOut: function (a) {
        u.cancel(a), u.leaveOut(a), this.cleanUpPointer(a)
      },
      cleanUpPointer: function (a) {
        R["delete"](a.pointerId), this.removePrimaryPointer(a)
      },
      dedupSynthMouse: function (a) {
        var b = N.lastTouches,
          c = a.changedTouches[0];
        if (this.isPrimaryTouch(c)) {
          var d = {
            x: c.clientX,
            y: c.clientY
          };
          b.push(d);
          var e = function (a, b) {
            var c = a.indexOf(b);
            c > -1 && a.splice(c, 1)
          }.bind(null, b, d);
          setTimeout(e, S)
        }
      }
    };
  M = new c(V.elementAdded, V.elementRemoved, V.elementChanged, V);
  var W, X, Y, Z = u.pointermap,
    $ = window.MSPointerEvent && "number" == typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,
    _ = {
      events: ["MSPointerDown", "MSPointerMove", "MSPointerUp", "MSPointerOut", "MSPointerOver", "MSPointerCancel", "MSGotPointerCapture", "MSLostPointerCapture"],
      register: function (a) {
        u.listen(a, this.events)
      },
      unregister: function (a) {
        u.unlisten(a, this.events)
      },
      POINTER_TYPES: ["", "unavailable", "touch", "pen", "mouse"],
      prepareEvent: function (a) {
        var b = a;
        return $ && (b = u.cloneEvent(a), b.pointerType = this.POINTER_TYPES[a.pointerType]), b
      },
      cleanup: function (a) {
        Z["delete"](a)
      },
      MSPointerDown: function (a) {
        Z.set(a.pointerId, a);
        var b = this.prepareEvent(a);
        u.down(b)
      },
      MSPointerMove: function (a) {
        var b = this.prepareEvent(a);
        u.move(b)
      },
      MSPointerUp: function (a) {
        var b = this.prepareEvent(a);
        u.up(b), this.cleanup(a.pointerId)
      },
      MSPointerOut: function (a) {
        var b = this.prepareEvent(a);
        u.leaveOut(b)
      },
      MSPointerOver: function (a) {
        var b = this.prepareEvent(a);
        u.enterOver(b)
      },
      MSPointerCancel: function (a) {
        var b = this.prepareEvent(a);
        u.cancel(b), this.cleanup(a.pointerId)
      },
      MSLostPointerCapture: function (a) {
        var b = u.makeEvent("lostpointercapture", a);
        u.dispatchEvent(b)
      },
      MSGotPointerCapture: function (a) {
        var b = u.makeEvent("gotpointercapture", a);
        u.dispatchEvent(b)
      }
    },
    aa = window.navigator;
  aa.msPointerEnabled ? (W = function (a) {
    i(a), j(this), k(a) && (u.setCapture(a, this, !0), this.msSetPointerCapture(a))
  }, X = function (a) {
    i(a), u.releaseCapture(a, !0), this.msReleasePointerCapture(a)
  }) : (W = function (a) {
    i(a), j(this), k(a) && u.setCapture(a, this)
  }, X = function (a) {
    i(a), u.releaseCapture(a)
  }), Y = function (a) {
    return !!u.captureInfo[a]
  }, g(), h(), l();
  var ba = {
    dispatcher: u,
    Installer: c,
    PointerEvent: a,
    PointerMap: p,
    targetFinding: v
  };
  return ba
});
///////////////////////////////////////////////

///////////////////////////////////////////////
var config = {"show_fabrication":false,"redraw_on_drag":true,"highlight_pin1":false,"extra_fields":["BOM_Manufacturer","BOM_Manufacturer Part","BOM_Supplier","BOM_Supplier Part"],"dark_mode":false,"bom_view":"left-right","board_rotation":0,"checkboxes":"Sourced,Placed","show_silkscreen":true,"show_pads":true,"layer_view":"FB"};
///////////////////////////////////////////////

///////////////////////////////////////////////
var pcbdata = {"ibom_version":"v2.3-50-g53ae\n","edges_bbox":{"minx":3947.2,"miny":3369.4,"maxx":4113.2,"maxy":3528},"edges":[{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":1,"svgpath":"M4020,3408.5 4098.7402,3408.5 4098.7402,3487.2402 4020,3487.2402 4020,3408.5"},{"type":"circle","start":[4025.906,3414.012],"radius":2.2677,"width":0.5},{"type":"circle","start":[4091.654,3480.154],"radius":2.2677,"width":0.5}],"drawings":{"silkscreen":{"F":[{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4069.217,3455.5588 4069.217,3458.6694"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4073.143,3458.6694 4073.143,3455.5588"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4072.543,3454.9588 4069.817,3454.9588"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4069.217,3463.5612 4069.217,3460.4506"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4073.143,3460.4506 4073.143,3463.5612"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4072.543,3464.1612 4069.817,3464.1612"},{"type":"arc","width":0.6,"svgpath":"M 4073.143 3455.5588 A 0.6 0.6 0 0 0 4072.543 3454.9588","net":""},{"type":"arc","width":0.6,"svgpath":"M 4069.817 3454.9588 A 0.6 0.6 0 0 0 4069.217 3455.5588","net":""},{"type":"arc","width":0.6,"svgpath":"M 4073.143 3463.5612 A 0.6 0.6 0 0 1 4072.543 3464.1612","net":""},{"type":"arc","width":0.6,"svgpath":"M 4069.817 3464.1612 A 0.6 0.6 0 0 1 4069.217 3463.5612","net":""},{"type":"text","svgpath":"M 4057.458 3459.564L4057.258 3459.154 L4056.638 3458.544 L4060.938 3458.544 M 4056.638 3455.964L4056.848 3456.574 L4057.458 3456.984 L4058.478 3457.194 L4059.098 3457.194 L4060.118 3456.984 L4060.728 3456.574 L4060.938 3455.964 L4060.938 3455.554 L4060.728 3454.944 L4060.118 3454.534 L4059.098 3454.324 L4058.478 3454.324 L4057.458 3454.534 L4056.848 3454.944 L4056.638 3455.554 L4056.638 3455.964 M 4058.068 3452.974L4060.118 3452.974 L4060.728 3452.774 L4060.938 3452.364 L4060.938 3451.754 L4060.728 3451.344 L4060.118 3450.724 M 4058.068 3450.724L4060.938 3450.724 M 4056.638 3449.374L4060.938 3449.374 M 4056.638 3449.374L4056.638 3446.714 M 4058.688 3449.374L4058.688 3447.744 ","useTrueTypeFontRendering":false,"thickness":0.6,"width":0.6,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4056.227,3421.2006 4056.227,3424.3112"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4060.153,3424.3112 4060.153,3421.2006"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4056.827,3424.9112 4059.553,3424.9112"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4060.153,3416.3088 4060.153,3419.4194"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4056.227,3419.4194 4056.227,3416.3088"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4056.827,3415.7088 4059.553,3415.7088"},{"type":"arc","width":0.6,"svgpath":"M 4056.227 3424.3112 A 0.6 0.6 0 0 0 4056.827 3424.9112","net":""},{"type":"arc","width":0.6,"svgpath":"M 4059.553 3424.9112 A 0.6 0.6 0 0 0 4060.153 3424.3112","net":""},{"type":"arc","width":0.6,"svgpath":"M 4056.227 3416.3088 A 0.6 0.6 0 0 1 4056.827 3415.7088","net":""},{"type":"arc","width":0.6,"svgpath":"M 4059.553 3415.7088 A 0.6 0.6 0 0 1 4060.153 3416.3088","net":""},{"type":"text","svgpath":"M 4069.258 3437.37L4069.048 3436.96 L4068.438 3436.35 L4072.738 3436.35 M 4068.438 3433.77L4068.638 3434.38 L4069.258 3434.79 L4070.278 3435 L4070.888 3435 L4071.918 3434.79 L4072.528 3434.38 L4072.738 3433.77 L4072.738 3433.36 L4072.528 3432.75 L4071.918 3432.34 L4070.888 3432.13 L4070.278 3432.13 L4069.258 3432.34 L4068.638 3432.75 L4068.438 3433.36 L4068.438 3433.77 M 4068.438 3429.56L4068.638 3430.17 L4069.258 3430.58 L4070.278 3430.78 L4070.888 3430.78 L4071.918 3430.58 L4072.528 3430.17 L4072.738 3429.56 L4072.738 3429.15 L4072.528 3428.53 L4071.918 3428.13 L4070.888 3427.92 L4070.278 3427.92 L4069.258 3428.13 L4068.638 3428.53 L4068.438 3429.15 L4068.438 3429.56 M 4069.868 3426.57L4072.738 3426.57 M 4070.688 3426.57L4070.078 3425.96 L4069.868 3425.55 L4069.868 3424.93 L4070.078 3424.53 L4070.688 3424.32 L4072.738 3424.32 M 4068.438 3422.97L4072.738 3422.97 M 4068.438 3422.97L4068.438 3420.31 M 4070.488 3422.97L4070.488 3421.33 ","useTrueTypeFontRendering":false,"thickness":0.6,"width":0.6,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4041.653,3424.3112 4041.653,3421.2006"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4037.727,3421.2006 4037.727,3424.3112"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4038.327,3424.9112 4041.053,3424.9112"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4041.653,3416.3088 4041.653,3419.4194"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4037.727,3419.4194 4037.727,3416.3088"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4038.327,3415.7088 4041.053,3415.7088"},{"type":"arc","width":0.6,"svgpath":"M 4037.727 3424.3112 A 0.6 0.6 0 0 0 4038.327 3424.9112","net":""},{"type":"arc","width":0.6,"svgpath":"M 4041.053 3424.9112 A 0.6 0.6 0 0 0 4041.653 3424.3112","net":""},{"type":"arc","width":0.6,"svgpath":"M 4037.727 3416.3088 A 0.6 0.6 0 0 1 4038.327 3415.7088","net":""},{"type":"arc","width":0.6,"svgpath":"M 4041.053 3415.7088 A 0.6 0.6 0 0 1 4041.653 3416.3088","net":""},{"type":"text","svgpath":"M 4050.754 3433.156L4050.544 3432.756 L4049.934 3432.136 L4054.234 3432.136 M 4049.934 3429.556L4050.134 3430.176 L4050.754 3430.586 L4051.774 3430.786 L4052.384 3430.786 L4053.414 3430.586 L4054.024 3430.176 L4054.234 3429.556 L4054.234 3429.156 L4054.024 3428.536 L4053.414 3428.126 L4052.384 3427.926 L4051.774 3427.926 L4050.754 3428.126 L4050.134 3428.536 L4049.934 3429.156 L4049.934 3429.556 M 4051.364 3426.576L4053.414 3426.576 L4054.024 3426.366 L4054.234 3425.956 L4054.234 3425.346 L4054.024 3424.936 L4053.414 3424.326 M 4051.364 3424.326L4054.234 3424.326 M 4049.934 3422.976L4054.234 3422.976 M 4049.934 3422.976L4049.934 3420.316 M 4051.984 3422.976L4051.984 3421.336 ","useTrueTypeFontRendering":false,"thickness":0.6,"width":0.6,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4065.273,3424.3112 4065.273,3421.2006"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4061.347,3421.2006 4061.347,3424.3112"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4061.947,3424.9112 4064.673,3424.9112"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4065.273,3416.3088 4065.273,3419.4194"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4061.347,3419.4194 4061.347,3416.3088"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4061.947,3415.7088 4064.673,3415.7088"},{"type":"arc","width":0.6,"svgpath":"M 4061.347 3424.3112 A 0.6 0.6 0 0 0 4061.947 3424.9112","net":""},{"type":"arc","width":0.6,"svgpath":"M 4064.673 3424.9112 A 0.6 0.6 0 0 0 4065.273 3424.3112","net":""},{"type":"arc","width":0.6,"svgpath":"M 4061.347 3416.3088 A 0.6 0.6 0 0 1 4061.947 3415.7088","net":""},{"type":"arc","width":0.6,"svgpath":"M 4064.673 3415.7088 A 0.6 0.6 0 0 1 4065.273 3416.3088","net":""},{"type":"text","svgpath":"M 4074.376 3433.158L4074.166 3432.748 L4073.556 3432.138 L4077.856 3432.138 M 4073.556 3429.558L4073.756 3430.178 L4074.376 3430.588 L4075.396 3430.788 L4076.006 3430.788 L4077.036 3430.588 L4077.646 3430.178 L4077.856 3429.558 L4077.856 3429.148 L4077.646 3428.538 L4077.036 3428.128 L4076.006 3427.928 L4075.396 3427.928 L4074.376 3428.128 L4073.756 3428.538 L4073.556 3429.148 L4073.556 3429.558 M 4074.986 3426.578L4077.036 3426.578 L4077.646 3426.368 L4077.856 3425.958 L4077.856 3425.348 L4077.646 3424.938 L4077.036 3424.328 M 4074.986 3424.328L4077.856 3424.328 M 4073.556 3422.978L4077.856 3422.978 M 4073.556 3422.978L4073.556 3420.318 M 4075.606 3422.978L4075.606 3421.338 ","useTrueTypeFontRendering":false,"thickness":0.6,"width":0.6,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4056.5488,3466.763 4059.6594,3466.763"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4059.6594,3462.837 4056.5488,3462.837"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4055.9488,3463.437 4055.9488,3466.163"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4064.5512,3466.763 4061.4406,3466.763"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4061.4406,3462.837 4064.5512,3462.837"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4065.1512,3463.437 4065.1512,3466.163"},{"type":"arc","width":0.6,"svgpath":"M 4056.5488 3462.837 A 0.6 0.6 0 0 0 4055.9488 3463.437","net":""},{"type":"arc","width":0.6,"svgpath":"M 4055.9488 3466.163 A 0.6 0.6 0 0 0 4056.5488 3466.763","net":""},{"type":"arc","width":0.6,"svgpath":"M 4064.5512 3462.837 A 0.6 0.6 0 0 1 4065.1512 3463.437","net":""},{"type":"arc","width":0.6,"svgpath":"M 4065.1512 3466.163 A 0.6 0.6 0 0 1 4064.5512 3466.763","net":""},{"type":"text","svgpath":"M 4051.92 3475.87L4052.33 3475.66 L4052.94 3475.05 L4052.94 3479.34 M 4054.29 3476.48L4054.29 3479.34 M 4054.29 3477.3L4054.91 3476.68 L4055.32 3476.48 L4055.93 3476.48 L4056.34 3476.68 L4056.54 3477.3 L4056.54 3479.34 M 4057.89 3475.05L4057.89 3479.34 M 4057.89 3475.05L4060.55 3475.05 M 4057.89 3477.09L4059.53 3477.09 ","useTrueTypeFontRendering":false,"thickness":0.6,"width":0.6,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4053.5312,3458.897 4050.4206,3458.897"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4050.4206,3462.823 4053.5312,3462.823"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4054.1312,3462.223 4054.1312,3459.497"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4045.5288,3458.897 4048.6394,3458.897"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4048.6394,3462.823 4045.5288,3462.823"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4044.9288,3462.223 4044.9288,3459.497"},{"type":"arc","width":0.6,"svgpath":"M 4053.5312 3462.823 A 0.6 0.6 0 0 0 4054.1312 3462.223","net":""},{"type":"arc","width":0.6,"svgpath":"M 4054.1312 3459.497 A 0.6 0.6 0 0 0 4053.5312 3458.897","net":""},{"type":"arc","width":0.6,"svgpath":"M 4045.5288 3462.823 A 0.6 0.6 0 0 1 4044.9288 3462.223","net":""},{"type":"arc","width":0.6,"svgpath":"M 4044.9288 3459.497 A 0.6 0.6 0 0 1 4045.5288 3458.897","net":""},{"type":"text","svgpath":"M 4049.53 3447.14L4049.94 3446.93 L4050.55 3446.32 L4050.55 3450.62 M 4051.9 3447.75L4051.9 3450.62 M 4051.9 3448.57L4052.51 3447.96 L4052.92 3447.75 L4053.54 3447.75 L4053.95 3447.96 L4054.15 3448.57 L4054.15 3450.62 M 4055.5 3446.32L4055.5 3450.62 M 4055.5 3446.32L4058.16 3446.32 M 4055.5 3448.37L4057.14 3448.37 ","useTrueTypeFontRendering":false,"thickness":0.6,"width":0.6,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4064.5906,3458.897 4067.4175,3458.897 4067.4175,3462.823 4064.5906,3462.823"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4062.8094,3458.897 4059.9825,3458.897 4059.9825,3462.823 4062.8094,3462.823"},{"type":"text","svgpath":"M4053.33 3478.78C4053.32 3478.54 4053.32 3478.31 4053.32 3478.08L4053.32 3476.70L4053.34 3476.07L4053.28 3476.02L4052.38 3476.26L4052.38 3476.41L4052.96 3476.36L4052.96 3478.08C4052.96 3478.31 4052.96 3478.54 4052.95 3478.78L4052.33 3478.86L4052.33 3479L4053.94 3479L4053.94 3478.86ZM4054.76 3477.51C4054.76 3476.46 4055.02 3476.18 4055.30 3476.18C4055.57 3476.18 4055.82 3476.46 4055.82 3477.51C4055.82 3478.60 4055.57 3478.89 4055.30 3478.89C4055.02 3478.89 4054.76 3478.60 4054.76 3477.51ZM4055.30 3476.01C4054.83 3476.01 4054.38 3476.42 4054.38 3477.51C4054.38 3478.64 4054.83 3479.06 4055.30 3479.06C4055.76 3479.06 4056.21 3478.64 4056.21 3477.51C4056.21 3476.42 4055.76 3476.01 4055.30 3476.01ZM4058.51 3478.82L4057.77 3477.63L4058.28 3477.12L4058.68 3477.07L4058.68 3476.92L4057.68 3476.92L4057.68 3477.07L4058.02 3477.14L4057.23 3477.96L4057.23 3476.42L4057.25 3475.79L4057.19 3475.76L4056.51 3475.94L4056.51 3476.08L4056.87 3476.11L4056.87 3478.08C4056.87 3478.32 4056.86 3478.58 4056.86 3478.82L4056.52 3478.86L4056.52 3479L4057.58 3479L4057.58 3478.86L4057.24 3478.82C4057.23 3478.61 4057.23 3478.39 4057.23 3478.18L4057.52 3477.88L4058.20 3479L4058.80 3479L4058.80 3478.86ZM4061.60 3478.26L4061.49 3478.69L4060.87 3478.69L4060.87 3478.69C4061.32 3478.37 4061.68 3477.90 4061.68 3477.33C4061.68 3476.47 4061.08 3476 4060.40 3476C4059.72 3476 4059.12 3476.47 4059.12 3477.33C4059.12 3477.90 4059.48 3478.37 4059.93 3478.69L4059.93 3478.69L4059.30 3478.69L4059.20 3478.26L4058.97 3478.26L4059.02 3479L4060.19 3479L4060.19 3478.73C4059.78 3478.40 4059.52 3477.88 4059.52 3477.33C4059.52 3476.68 4059.85 3476.19 4060.40 3476.19C4060.95 3476.19 4061.27 3476.68 4061.27 3477.33C4061.27 3477.88 4061.02 3478.40 4060.60 3478.73L4060.60 3479L4061.78 3479L4061.82 3478.26Z","useTrueTypeFontRendering":true,"thickness":null,"width":null,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4064.5906,3454.967 4067.4175,3454.967 4067.4175,3458.893 4064.5906,3458.893"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4062.8094,3454.967 4059.9825,3454.967 4059.9825,3458.893 4062.8094,3458.893"},{"type":"text","svgpath":"M4051.66 3472.41L4052.93 3472.41L4052.93 3472.07L4051.50 3472.07L4051.40 3473.44L4051.52 3473.47C4051.66 3473.43 4051.80 3473.41 4051.94 3473.41C4052.36 3473.41 4052.62 3473.67 4052.62 3474.13C4052.62 3474.59 4052.39 3474.89 4051.96 3474.89C4051.86 3474.89 4051.78 3474.88 4051.68 3474.85L4051.61 3474.58C4051.56 3474.37 4051.50 3474.31 4051.38 3474.31C4051.28 3474.31 4051.20 3474.36 4051.17 3474.45C4051.26 3474.85 4051.54 3475.06 4051.98 3475.06C4052.60 3475.06 4053.01 3474.67 4053.01 3474.10C4053.01 3473.51 4052.62 3473.18 4052.05 3473.18C4051.89 3473.18 4051.75 3473.20 4051.61 3473.24ZM4053.85 3475.06C4054.02 3475.06 4054.15 3474.92 4054.15 3474.76C4054.15 3474.60 4054.02 3474.46 4053.85 3474.46C4053.69 3474.46 4053.56 3474.60 4053.56 3474.76C4053.56 3474.92 4053.69 3475.06 4053.85 3475.06ZM4055.84 3474.78C4055.84 3474.54 4055.83 3474.31 4055.83 3474.08L4055.83 3472.70L4055.85 3472.07L4055.79 3472.02L4054.89 3472.26L4054.89 3472.41L4055.47 3472.36L4055.47 3474.08C4055.47 3474.31 4055.47 3474.54 4055.46 3474.78L4054.84 3474.86L4054.84 3475L4056.46 3475L4056.46 3474.86ZM4058.83 3474.82L4058.09 3473.63L4058.59 3473.12L4059.00 3473.07L4059.00 3472.92L4057.99 3472.92L4057.99 3473.07L4058.34 3473.14L4057.54 3473.96L4057.54 3472.42L4057.56 3471.79L4057.50 3471.76L4056.83 3471.94L4056.83 3472.08L4057.18 3472.11L4057.18 3474.08C4057.18 3474.32 4057.18 3474.58 4057.18 3474.82L4056.83 3474.86L4056.83 3475L4057.90 3475L4057.90 3474.86L4057.55 3474.82C4057.55 3474.61 4057.54 3474.39 4057.54 3474.18L4057.84 3473.88L4058.52 3475L4059.11 3475L4059.11 3474.86ZM4061.91 3474.26L4061.81 3474.69L4061.19 3474.69L4061.19 3474.69C4061.64 3474.37 4062.00 3473.90 4062.00 3473.33C4062.00 3472.47 4061.39 3472 4060.72 3472C4060.03 3472 4059.43 3472.47 4059.43 3473.33C4059.43 3473.90 4059.79 3474.37 4060.24 3474.69L4060.24 3474.69L4059.62 3474.69L4059.52 3474.26L4059.29 3474.26L4059.33 3475L4060.50 3475L4060.50 3474.73C4060.10 3474.40 4059.84 3473.88 4059.84 3473.33C4059.84 3472.68 4060.16 3472.19 4060.72 3472.19C4061.26 3472.19 4061.59 3472.68 4061.59 3473.33C4061.59 3473.88 4061.33 3474.40 4060.92 3474.73L4060.92 3475L4062.10 3475L4062.14 3474.26Z","useTrueTypeFontRendering":true,"thickness":null,"width":null,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4049.4294,3458.893 4046.6025,3458.893 4046.6025,3454.967 4049.4294,3454.967"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4051.2106,3458.893 4054.0375,3458.893 4054.0375,3454.967 4051.2106,3454.967"},{"type":"text","svgpath":"M4052.33 3440.78C4052.32 3440.54 4052.32 3440.31 4052.32 3440.08L4052.32 3438.70L4052.34 3438.07L4052.28 3438.02L4051.38 3438.26L4051.38 3438.41L4051.96 3438.36L4051.96 3440.08C4051.96 3440.31 4051.96 3440.54 4051.95 3440.78L4051.33 3440.86L4051.33 3441L4052.94 3441L4052.94 3440.86ZM4053.76 3439.51C4053.76 3438.46 4054.02 3438.18 4054.30 3438.18C4054.57 3438.18 4054.82 3438.46 4054.82 3439.51C4054.82 3440.60 4054.57 3440.89 4054.30 3440.89C4054.02 3440.89 4053.76 3440.60 4053.76 3439.51ZM4054.30 3438.01C4053.83 3438.01 4053.38 3438.42 4053.38 3439.51C4053.38 3440.64 4053.83 3441.06 4054.30 3441.06C4054.76 3441.06 4055.21 3440.64 4055.21 3439.51C4055.21 3438.42 4054.76 3438.01 4054.30 3438.01ZM4057.51 3440.82L4056.77 3439.63L4057.28 3439.12L4057.68 3439.07L4057.68 3438.92L4056.68 3438.92L4056.68 3439.07L4057.02 3439.14L4056.23 3439.96L4056.23 3438.42L4056.25 3437.79L4056.19 3437.76L4055.51 3437.94L4055.51 3438.08L4055.87 3438.11L4055.87 3440.08C4055.87 3440.32 4055.86 3440.58 4055.86 3440.82L4055.52 3440.86L4055.52 3441L4056.58 3441L4056.58 3440.86L4056.24 3440.82C4056.23 3440.61 4056.23 3440.39 4056.23 3440.18L4056.52 3439.88L4057.20 3441L4057.80 3441L4057.80 3440.86ZM4060.60 3440.26L4060.49 3440.69L4059.87 3440.69L4059.87 3440.69C4060.32 3440.37 4060.68 3439.90 4060.68 3439.33C4060.68 3438.47 4060.08 3438 4059.40 3438C4058.72 3438 4058.12 3438.47 4058.12 3439.33C4058.12 3439.90 4058.48 3440.37 4058.93 3440.69L4058.93 3440.69L4058.30 3440.69L4058.20 3440.26L4057.97 3440.26L4058.02 3441L4059.19 3441L4059.19 3440.73C4058.78 3440.40 4058.52 3439.88 4058.52 3439.33C4058.52 3438.68 4058.85 3438.19 4059.40 3438.19C4059.95 3438.19 4060.27 3438.68 4060.27 3439.33C4060.27 3439.88 4060.02 3440.40 4059.60 3440.73L4059.60 3441L4060.78 3441L4060.82 3440.26Z","useTrueTypeFontRendering":true,"thickness":null,"width":null,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4059.763,3459.5706 4059.763,3462.3975 4055.837,3462.3975 4055.837,3459.5706"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4059.763,3457.7894 4059.763,3454.9625 4055.837,3454.9625 4055.837,3457.7894"},{"type":"text","svgpath":"M4041.63 3457.32C4041.40 3457.33 4041.17 3457.33 4040.93 3457.33L4039.56 3457.33L4038.93 3457.32L4038.88 3457.38L4039.12 3458.28L4039.27 3458.28L4039.21 3457.69L4040.93 3457.69C4041.17 3457.69 4041.40 3457.70 4041.63 3457.70L4041.72 3458.32L4041.86 3458.32L4041.86 3456.71L4041.72 3456.71ZM4040.37 3455.89C4039.32 3455.89 4039.04 3455.63 4039.04 3455.35C4039.04 3455.08 4039.32 3454.83 4040.37 3454.83C4041.46 3454.83 4041.75 3455.08 4041.75 3455.35C4041.75 3455.63 4041.46 3455.89 4040.37 3455.89ZM4038.87 3455.35C4038.87 3455.82 4039.27 3456.28 4040.37 3456.28C4041.50 3456.28 4041.91 3455.82 4041.91 3455.35C4041.91 3454.89 4041.50 3454.44 4040.37 3454.44C4039.27 3454.44 4038.87 3454.89 4038.87 3455.35ZM4041.68 3452.14L4040.49 3452.88L4039.98 3452.38L4039.93 3451.97L4039.78 3451.97L4039.78 3452.98L4039.93 3452.98L4040.00 3452.63L4040.81 3453.42L4039.27 3453.42L4038.65 3453.40L4038.62 3453.46L4038.80 3454.14L4038.93 3454.14L4038.97 3453.78L4040.94 3453.78C4041.17 3453.78 4041.43 3453.79 4041.67 3453.79L4041.72 3454.14L4041.86 3454.14L4041.86 3453.07L4041.72 3453.07L4041.67 3453.42C4041.47 3453.42 4041.25 3453.42 4041.04 3453.42L4040.74 3453.13L4041.86 3452.45L4041.86 3451.86L4041.72 3451.86ZM4041.11 3449.06L4041.55 3449.16L4041.55 3449.78L4041.55 3449.78C4041.23 3449.33 4040.75 3448.97 4040.19 3448.97C4039.33 3448.97 4038.86 3449.58 4038.86 3450.25C4038.86 3450.94 4039.33 3451.54 4040.19 3451.54C4040.76 3451.54 4041.23 3451.18 4041.55 3450.72L4041.55 3450.72L4041.55 3451.35L4041.11 3451.45L4041.11 3451.68L4041.86 3451.64L4041.86 3450.46L4041.59 3450.46C4041.26 3450.87 4040.74 3451.13 4040.19 3451.13C4039.54 3451.13 4039.05 3450.80 4039.05 3450.25C4039.05 3449.70 4039.54 3449.38 4040.19 3449.38C4040.74 3449.38 4041.26 3449.64 4041.59 3450.05L4041.86 3450.05L4041.86 3448.87L4041.11 3448.83Z","useTrueTypeFontRendering":true,"thickness":null,"width":null,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4051.264,3431.5669 4051.264,3432.9449"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4052.6774,3431.5315 4051.2994,3431.5315"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4068.2286,3432.9095 4068.2286,3431.5315"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4068.1932,3431.4961 4066.8152,3431.4961"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4066.8506,3448.4607 4068.2286,3448.4607"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4068.264,3448.4253 4068.264,3447.0473"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4051.3348,3448.4961 4052.7128,3448.4961"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4051.2994,3447.0827 4051.2994,3448.4607"},{"type":"circle","_svgpath":"M 4054.843, 3451.496 m -0.354, 0 a 0.354,0.354 0 1,0 0.708,0 a 0.354,0.354 0 1,0 -0.708,0","start":[4054.843,3451.496],"radius":0.354,"width":1,"net":""},{"type":"text","svgpath":"M 4037.224 3441.9961 L 4041.514 3439.1361 M 4037.224 3439.1361 L 4041.514 3441.9961 M 4037.224 3437.7861 L 4041.514 3437.7861 M 4037.224 3437.7861 L 4037.224 3435.9461 L 4037.424 3435.3261 L 4037.634 3435.1261 L 4038.044 3434.9161 L 4038.454 3434.9161 L 4038.864 3435.1261 L 4039.064 3435.3261 L 4039.264 3435.9461 M 4039.264 3437.7861 L 4039.264 3435.9461 L 4039.474 3435.3261 L 4039.674 3435.1261 L 4040.084 3434.9161 L 4040.704 3434.9161 L 4041.114 3435.1261 L 4041.314 3435.3261 L 4041.514 3435.9461 L 4041.514 3437.7861 M 4037.224 3433.5661 L 4041.514 3433.5661 M 4037.224 3433.5661 L 4037.224 3431.7261 L 4037.424 3431.1161 L 4037.634 3430.9061 L 4038.044 3430.7061 L 4038.454 3430.7061 L 4038.864 3430.9061 L 4039.064 3431.1161 L 4039.264 3431.7261 L 4039.264 3433.5661 M 4039.264 3432.1361 L 4041.514 3430.7061 M 4037.224 3428.3361 L 4037.424 3428.9461 L 4037.834 3429.1461 L 4038.244 3429.1461 L 4038.654 3428.9461 L 4038.864 3428.5361 L 4039.064 3427.7161 L 4039.264 3427.1061 L 4039.674 3426.6961 L 4040.084 3426.4961 L 4040.704 3426.4961 L 4041.114 3426.6961 L 4041.314 3426.8961 L 4041.514 3427.5161 L 4041.514 3428.3361 L 4041.314 3428.9461 L 4041.114 3429.1461 L 4040.704 3429.3561 L 4040.084 3429.3561 L 4039.674 3429.1461 L 4039.264 3428.7461 L 4039.064 3428.1261 L 4038.864 3427.3061 L 4038.654 3426.8961 L 4038.244 3426.6961 L 4037.834 3426.6961 L 4037.424 3426.8961 L 4037.224 3427.5161 L 4037.224 3428.3361 M 4038.044 3425.1461 L 4037.834 3424.7361 L 4037.224 3424.1161 L 4041.514 3424.1161 M 4037.834 3420.3161 L 4037.424 3420.5161 L 4037.224 3421.1361 L 4037.224 3421.5461 L 4037.424 3422.1561 L 4038.044 3422.5661 L 4039.064 3422.7661 L 4040.084 3422.7661 L 4040.904 3422.5661 L 4041.314 3422.1561 L 4041.514 3421.5461 L 4041.514 3421.3361 L 4041.314 3420.7261 L 4040.904 3420.3161 L 4040.294 3420.1061 L 4040.084 3420.1061 L 4039.474 3420.3161 L 4039.064 3420.7261 L 4038.864 3421.3361 L 4038.864 3421.5461 L 4039.064 3422.1561 L 4039.474 3422.5661 L 4040.084 3422.7661 M 4038.244 3415.6961 L 4037.834 3415.8961 L 4037.424 3416.3061 L 4037.224 3416.7161 L 4037.224 3417.5361 L 4037.424 3417.9461 L 4037.834 3418.3461 L 4038.244 3418.5561 L 4038.864 3418.7561 L 4039.884 3418.7561 L 4040.494 3418.5561 L 4040.904 3418.3461 L 4041.314 3417.9461 L 4041.514 3417.5361 L 4041.514 3416.7161 L 4041.314 3416.3061 L 4040.904 3415.8961 L 4040.494 3415.6961","useTrueTypeFontRendering":false,"thickness":0.6,"width":0.6,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4054.985,3421.3979 4054.985,3414.4987 4050.8842,3414.4987"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4042.889,3421.3979 4042.889,3414.4987 4046.9898,3414.4987"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.6,"svgpath":"M4050.7299,3421.3979 4047.1441,3421.3979"},{"type":"text","svgpath":"M 4064.187 3464.2982 L 4068.477 3464.2982 M 4064.187 3464.2982 L 4068.477 3462.6582 M 4064.187 3461.0282 L 4068.477 3462.6582 M 4064.187 3461.0282 L 4068.477 3461.0282 M 4064.187 3459.6782 L 4068.477 3459.6782 M 4064.187 3459.6782 L 4064.187 3457.0182 M 4066.227 3459.6782 L 4066.227 3458.0382 M 4068.477 3459.6782 L 4068.477 3457.0182 M 4064.797 3453.2082 L 4064.387 3453.4182 L 4064.187 3454.0282 L 4064.187 3454.4382 L 4064.387 3455.0482 L 4065.007 3455.4582 L 4066.027 3455.6682 L 4067.047 3455.6682 L 4067.867 3455.4582 L 4068.277 3455.0482 L 4068.477 3454.4382 L 4068.477 3454.2382 L 4068.277 3453.6182 L 4067.867 3453.2082 L 4067.257 3453.0082 L 4067.047 3453.0082 L 4066.437 3453.2082 L 4066.027 3453.6182 L 4065.827 3454.2382 L 4065.827 3454.4382 L 4066.027 3455.0482 L 4066.437 3455.4582 L 4067.047 3455.6682 M 4065.207 3451.4482 L 4065.007 3451.4482 L 4064.597 3451.2482 L 4064.387 3451.0482 L 4064.187 3450.6382 L 4064.187 3449.8182 L 4064.387 3449.4082 L 4064.597 3449.1982 L 4065.007 3448.9982 L 4065.417 3448.9982 L 4065.827 3449.1982 L 4066.437 3449.6082 L 4068.477 3451.6582 L 4068.477 3448.7982 M 4065.007 3447.4482 L 4064.797 3447.0382 L 4064.187 3446.4182 L 4068.477 3446.4182 M 4064.797 3442.6182 L 4064.387 3442.8182 L 4064.187 3443.4382 L 4064.187 3443.8482 L 4064.387 3444.4582 L 4065.007 3444.8682 L 4066.027 3445.0682 L 4067.047 3445.0682 L 4067.867 3444.8682 L 4068.277 3444.4582 L 4068.477 3443.8482 L 4068.477 3443.6382 L 4068.277 3443.0282 L 4067.867 3442.6182 L 4067.257 3442.4082 L 4067.047 3442.4082 L 4066.437 3442.6182 L 4066.027 3443.0282 L 4065.827 3443.6382 L 4065.827 3443.8482 L 4066.027 3444.4582 L 4066.437 3444.8682 L 4067.047 3445.0682 M 4064.187 3439.4282 L 4068.477 3441.0582 M 4064.187 3439.4282 L 4068.477 3437.7882 M 4067.047 3440.4482 L 4067.047 3438.3982 M 4065.007 3436.4382 L 4064.797 3436.0282 L 4064.187 3435.4182 L 4068.477 3435.4182 M 4065.207 3433.8582 L 4065.007 3433.8582 L 4064.597 3433.6582 L 4064.387 3433.4482 L 4064.187 3433.0482 L 4064.187 3432.2282 L 4064.387 3431.8182 L 4064.597 3431.6082 L 4065.007 3431.4082 L 4065.417 3431.4082 L 4065.827 3431.6082 L 4066.437 3432.0182 L 4068.477 3434.0682 L 4068.477 3431.1982 M 4064.187 3429.8482 L 4068.477 3429.8482 M 4064.187 3429.8482 L 4068.477 3428.2182 M 4064.187 3426.5782 L 4068.477 3428.2182 M 4064.187 3426.5782 L 4068.477 3426.5782 M 4064.187 3424.8182 L 4064.187 3422.5682 L 4065.827 3423.7982 L 4065.827 3423.1882 L 4066.027 3422.7782 L 4066.227 3422.5682 L 4066.847 3422.3682 L 4067.257 3422.3682 L 4067.867 3422.5682 L 4068.277 3422.9782 L 4068.477 3423.5982 L 4068.477 3424.2082 L 4068.277 3424.8182 L 4068.077 3425.0282 L 4067.667 3425.2282 M 4065.207 3417.9482 L 4064.797 3418.1482 L 4064.387 3418.5582 L 4064.187 3418.9682 L 4064.187 3419.7882 L 4064.387 3420.1982 L 4064.797 3420.6082 L 4065.207 3420.8082 L 4065.827 3421.0182 L 4066.847 3421.0182 L 4067.457 3420.8082 L 4067.867 3420.6082 L 4068.277 3420.1982 L 4068.477 3419.7882 L 4068.477 3418.9682 L 4068.277 3418.5582 L 4067.867 3418.1482 L 4067.457 3417.9482 L 4066.847 3417.9482 M 4066.847 3418.9682 L 4066.847 3417.9482","useTrueTypeFontRendering":false,"thickness":0.6,"width":0.6,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":1,"svgpath":"M4087.6803,3443.0862 4087.6803,3445.192 4087.2985,3445.192"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":1,"svgpath":"M4087.2985,3437.192 4087.6803,3437.192 4087.6803,3439.2978"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":1,"svgpath":"M4078.6803,3443.2831 4078.6803,3445.192 4079.2581,3445.192"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":1,"svgpath":"M4079.2581,3437.192 4079.1803,3437.192 4078.6803,3437.192 4078.6803,3439.1009"},{"type":"circle","_svgpath":"M 4083.18, 3441.192 m -0.5, 0 a 0.5,0.5 0 1,0 1,0 a 0.5,0.5 0 1,0 -1,0","start":[4083.18,3441.192],"radius":0.5,"width":1,"net":""},{"type":"circle","_svgpath":"M 4077.18, 3444.192 m -0.307, 0 a 0.307,0.307 0 1,0 0.614,0 a 0.307,0.307 0 1,0 -0.614,0","start":[4077.18,3444.192],"radius":0.307,"width":0.5906,"net":""},{"type":"text","svgpath":"M 4082.2783 3423.215 L 4082.2783 3427.505 M 4085.1383 3423.215 L 4082.2783 3426.075 M 4083.2983 3425.055 L 4085.1383 3427.505 M 4086.4883 3423.215 L 4086.4883 3427.505 M 4089.3583 3423.215 L 4089.3583 3427.505 M 4086.4883 3425.255 L 4089.3583 3425.255 M 4090.7083 3425.665 L 4094.3883 3425.665 M 4095.7383 3423.215 L 4095.7383 3427.505 M 4097.0883 3423.215 L 4097.0883 3427.505 M 4097.0883 3423.215 L 4098.9283 3423.215 L 4099.5383 3423.415 L 4099.7483 3423.625 L 4099.9483 3424.035 L 4099.9483 3424.645 L 4099.7483 3425.055 L 4099.5383 3425.255 L 4098.9283 3425.465 L 4097.0883 3425.465 M 4101.2983 3423.215 L 4101.2983 3427.505 M 4101.2983 3423.215 L 4103.9583 3423.215 M 4101.2983 3425.255 L 4102.9383 3425.255 M 4101.2983 3427.505 L 4103.9583 3427.505 M 4105.3083 3423.215 L 4108.1783 3427.505 M 4108.1783 3423.215 L 4105.3083 3427.505 M 4111.5683 3423.215 L 4109.5283 3426.075 L 4112.5883 3426.075 M 4111.5683 3423.215 L 4111.5683 3427.505 M 4113.9383 3425.665 L 4117.6283 3425.665 M 4119.1783 3424.235 L 4119.1783 3424.035 L 4119.3783 3423.625 L 4119.5883 3423.415 L 4119.9983 3423.215 L 4120.8183 3423.215 L 4121.2283 3423.415 L 4121.4283 3423.625 L 4121.6283 3424.035 L 4121.6283 3424.445 L 4121.4283 3424.855 L 4121.0183 3425.465 L 4118.9783 3427.505 L 4121.8383 3427.505 M 4124.4183 3423.215 L 4123.7983 3423.415 L 4123.3883 3424.035 L 4123.1883 3425.055 L 4123.1883 3425.665 L 4123.3883 3426.695 L 4123.7983 3427.305 L 4124.4183 3427.505 L 4124.8283 3427.505 L 4125.4383 3427.305 L 4125.8483 3426.695 L 4126.0483 3425.665 L 4126.0483 3425.055 L 4125.8483 3424.035 L 4125.4383 3423.415 L 4124.8283 3423.215 L 4124.4183 3423.215 M 4127.6083 3424.235 L 4127.6083 3424.035 L 4127.8083 3423.625 L 4128.0183 3423.415 L 4128.4283 3423.215 L 4129.2383 3423.215 L 4129.6483 3423.415 L 4129.8583 3423.625 L 4130.0583 3424.035 L 4130.0583 3424.445 L 4129.8583 3424.855 L 4129.4483 3425.465 L 4127.3983 3427.505 L 4130.2683 3427.505 M 4132.8383 3423.215 L 4132.2283 3423.415 L 4131.8183 3424.035 L 4131.6183 3425.055 L 4131.6183 3425.665 L 4131.8183 3426.695 L 4132.2283 3427.305 L 4132.8383 3427.505 L 4133.2483 3427.505 L 4133.8683 3427.305 L 4134.2783 3426.695 L 4134.4783 3425.665 L 4134.4783 3425.055 L 4134.2783 3424.035 L 4133.8683 3423.415 L 4133.2483 3423.215 L 4132.8383 3423.215","useTrueTypeFontRendering":false,"thickness":0.6,"width":0.6,"val":1},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":1,"svgpath":"M4031.8473,3439.298 4031.8473,3437.1922 4032.2291,3437.1922"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":1,"svgpath":"M4032.2291,3445.1922 4031.8473,3445.1922 4031.8473,3443.0864"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":1,"svgpath":"M4040.8473,3439.1011 4040.8473,3437.1922 4040.2695,3437.1922"},{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":1,"svgpath":"M4040.2695,3445.1922 4040.3473,3445.1922 4040.8473,3445.1922 4040.8473,3443.2833"},{"type":"circle","_svgpath":"M 4036.347, 3441.192 m -0.5, 0 a 0.5,0.5 0 1,0 1,0 a 0.5,0.5 0 1,0 -1,0","start":[4036.347,3441.192],"radius":0.5,"width":1,"net":""},{"type":"circle","_svgpath":"M 4042.347, 3438.192 m -0.307, 0 a 0.307,0.307 0 1,0 0.614,0 a 0.307,0.307 0 1,0 -0.614,0","start":[4042.347,3438.192],"radius":0.307,"width":0.5906,"net":""},{"type":"text","svgpath":"M 3985.0495 3454.8791 L 3985.0495 3459.1691 M 3987.9095 3454.8791 L 3985.0495 3457.7391 M 3986.0695 3456.7191 L 3987.9095 3459.1691 M 3989.2595 3454.8791 L 3989.2595 3459.1691 M 3992.1295 3454.8791 L 3992.1295 3459.1691 M 3989.2595 3456.9191 L 3992.1295 3456.9191 M 3993.4795 3457.3291 L 3997.1595 3457.3291 M 3998.5095 3454.8791 L 3998.5095 3459.1691 M 3999.8595 3454.8791 L 3999.8595 3459.1691 M 3999.8595 3454.8791 L 4001.6995 3454.8791 L 4002.3095 3455.0791 L 4002.5195 3455.2891 L 4002.7195 3455.6991 L 4002.7195 3456.3091 L 4002.5195 3456.7191 L 4002.3095 3456.9191 L 4001.6995 3457.1291 L 3999.8595 3457.1291 M 4004.0695 3454.8791 L 4004.0695 3459.1691 M 4004.0695 3454.8791 L 4006.7295 3454.8791 M 4004.0695 3456.9191 L 4005.7095 3456.9191 M 4004.0695 3459.1691 L 4006.7295 3459.1691 M 4008.0795 3454.8791 L 4010.9495 3459.1691 M 4010.9495 3454.8791 L 4008.0795 3459.1691 M 4014.3395 3454.8791 L 4012.2995 3457.7391 L 4015.3595 3457.7391 M 4014.3395 3454.8791 L 4014.3395 3459.1691 M 4016.7095 3457.3291 L 4020.3995 3457.3291 M 4021.9495 3455.8991 L 4021.9495 3455.6991 L 4022.1495 3455.2891 L 4022.3595 3455.0791 L 4022.7695 3454.8791 L 4023.5895 3454.8791 L 4023.9995 3455.0791 L 4024.1995 3455.2891 L 4024.3995 3455.6991 L 4024.3995 3456.1091 L 4024.1995 3456.5191 L 4023.7895 3457.1291 L 4021.7495 3459.1691 L 4024.6095 3459.1691 M 4027.1895 3454.8791 L 4026.5695 3455.0791 L 4026.1595 3455.6991 L 4025.9595 3456.7191 L 4025.9595 3457.3291 L 4026.1595 3458.3591 L 4026.5695 3458.9691 L 4027.1895 3459.1691 L 4027.5995 3459.1691 L 4028.2095 3458.9691 L 4028.6195 3458.3591 L 4028.8195 3457.3291 L 4028.8195 3456.7191 L 4028.6195 3455.6991 L 4028.2095 3455.0791 L 4027.5995 3454.8791 L 4027.1895 3454.8791 M 4030.3795 3455.8991 L 4030.3795 3455.6991 L 4030.5795 3455.2891 L 4030.7895 3455.0791 L 4031.1995 3454.8791 L 4032.0095 3454.8791 L 4032.4195 3455.0791 L 4032.6295 3455.2891 L 4032.8295 3455.6991 L 4032.8295 3456.1091 L 4032.6295 3456.5191 L 4032.2195 3457.1291 L 4030.1695 3459.1691 L 4033.0395 3459.1691 M 4035.6095 3454.8791 L 4034.9995 3455.0791 L 4034.5895 3455.6991 L 4034.3895 3456.7191 L 4034.3895 3457.3291 L 4034.5895 3458.3591 L 4034.9995 3458.9691 L 4035.6095 3459.1691 L 4036.0195 3459.1691 L 4036.6395 3458.9691 L 4037.0495 3458.3591 L 4037.2495 3457.3291 L 4037.2495 3456.7191 L 4037.0495 3455.6991 L 4036.6395 3455.0791 L 4036.0195 3454.8791 L 4035.6095 3454.8791","useTrueTypeFontRendering":false,"thickness":0.6,"width":0.6,"val":1},{"type":"text","svgpath":"M 4030.2362 3448.0678 L 4030.2362 3455.6978 M 4030.2362 3448.0678 L 4033.5062 3448.0678 L 4034.5962 3448.4278 L 4034.9662 3448.7878 L 4035.3262 3449.5178 L 4035.3262 3450.2478 L 4034.9662 3450.9778 L 4034.5962 3451.3378 L 4033.5062 3451.6978 L 4030.2362 3451.6978 M 4032.7862 3451.6978 L 4035.3262 3455.6978 M 4037.7262 3448.0678 L 4042.8162 3455.6978 M 4042.8162 3448.0678 L 4037.7262 3455.6978","useTrueTypeFontRendering":false,"thickness":0.8,"width":0.8},{"type":"text","svgpath":"M 4079.2429 3448.0678 L 4079.2429 3455.6978 M 4076.6929 3448.0678 L 4081.7829 3448.0678 M 4084.1829 3448.0678 L 4089.2729 3455.6978 M 4089.2729 3448.0678 L 4084.1829 3455.6978","useTrueTypeFontRendering":false,"thickness":0.8,"width":0.8},{"type":"text","svgpath":"M 4035.7484 3469.8072 L 4036.1084 3469.6272 L 4036.6384 3469.0972 L 4036.6384 3472.8572","useTrueTypeFontRendering":false,"thickness":0.8,"width":0.8},{"type":"text","svgpath":"M 4035.4284 3479.9872 L 4035.4284 3479.8072 L 4035.6084 3479.4572 L 4035.7884 3479.2772 L 4036.1384 3479.0972 L 4036.8584 3479.0972 L 4037.2184 3479.2772 L 4037.3984 3479.4572 L 4037.5784 3479.8072 L 4037.5784 3480.1672 L 4037.3984 3480.5272 L 4037.0384 3481.0672 L 4035.2484 3482.8572 L 4037.7584 3482.8572","useTrueTypeFontRendering":false,"thickness":0.8,"width":0.8},{"type":"text","svgpath":"M 4082.2015 3479.0972 L 4081.6715 3479.2772 L 4081.4915 3479.6272 L 4081.4915 3479.9872 L 4081.6715 3480.3472 L 4082.0315 3480.5272 L 4082.7415 3480.7072 L 4083.2815 3480.8872 L 4083.6415 3481.2372 L 4083.8215 3481.5972 L 4083.8215 3482.1372 L 4083.6415 3482.4972 L 4083.4615 3482.6772 L 4082.9215 3482.8572 L 4082.2015 3482.8572 L 4081.6715 3482.6772 L 4081.4915 3482.4972 L 4081.3115 3482.1372 L 4081.3115 3481.5972 L 4081.4915 3481.2372 L 4081.8515 3480.8872 L 4082.3815 3480.7072 L 4083.1015 3480.5272 L 4083.4615 3480.3472 L 4083.6415 3479.9872 L 4083.6415 3479.6272 L 4083.4615 3479.2772 L 4082.9215 3479.0972 L 4082.2015 3479.0972","useTrueTypeFontRendering":false,"thickness":0.8,"width":0.8},{"type":"text","svgpath":"M 4083.8219 3469.2549 L 4082.0319 3473.0149 M 4081.3119 3469.2549 L 4083.8219 3469.2549","useTrueTypeFontRendering":false,"thickness":0.8,"width":0.8},{"type":"text","svgpath":"M 4027.1977 3419.886 L 4026.8677 3419.246 L 4026.2277 3418.596 L 4025.5877 3418.276 L 4024.2977 3418.276 L 4023.6477 3418.596 L 4023.0077 3419.246 L 4022.6877 3419.886 L 4022.3577 3420.856 L 4022.3577 3422.466 L 4022.6877 3423.436 L 4023.0077 3424.076 L 4023.6477 3424.716 L 4024.2977 3425.046 L 4025.5877 3425.046 L 4026.2277 3424.716 L 4026.8677 3424.076 L 4027.1977 3423.436 M 4029.3177 3418.276 L 4030.9277 3425.046 M 4032.5377 3418.276 L 4030.9277 3425.046 M 4032.5377 3418.276 L 4034.1477 3425.046 M 4035.7577 3418.276 L 4034.1477 3425.046","useTrueTypeFontRendering":false,"thickness":1.1811,"width":1.1811}],"B":[{"type":"polyline","net":"","start":[0,0],"end":[0,0],"width":0.8,"svgpath":"M4039.3701,3486.2166 4039.3701,3466.2166 4079.3701,3466.2166 4079.3701,3486.2166 4039.3701,3486.2166"},{"type":"text","svgpath":"M 4164.1 3494.8666 L 4161.24 3499.1566 M 4161.24 3494.8666 L 4164.1 3499.1566 M 4157.43 3494.8666 L 4159.48 3494.8666 L 4159.68 3496.7066 L 4159.48 3496.5066 L 4158.86 3496.2966 L 4158.25 3496.2966 L 4157.64 3496.5066 L 4157.23 3496.9066 L 4157.02 3497.5266 L 4157.02 3497.9366 L 4157.23 3498.5466 L 4157.64 3498.9566 L 4158.25 3499.1566 L 4158.86 3499.1566 L 4159.48 3498.9566 L 4159.68 3498.7566 L 4159.89 3498.3466 M 4153.22 3494.8666 L 4155.26 3494.8666 L 4155.47 3496.7066 L 4155.26 3496.5066 L 4154.65 3496.2966 L 4154.04 3496.2966 L 4153.42 3496.5066 L 4153.01 3496.9066 L 4152.81 3497.5266 L 4152.81 3497.9366 L 4153.01 3498.5466 L 4153.42 3498.9566 L 4154.04 3499.1566 L 4154.65 3499.1566 L 4155.26 3498.9566 L 4155.47 3498.7566 L 4155.67 3498.3466 M 4151.25 3495.8866 L 4151.25 3495.6866 L 4151.05 3495.2766 L 4150.85 3495.0666 L 4150.44 3494.8666 L 4149.62 3494.8666 L 4149.21 3495.0666 L 4149 3495.2766 L 4148.8 3495.6866 L 4148.8 3496.0966 L 4149 3496.5066 L 4149.41 3497.1166 L 4151.46 3499.1566 L 4148.6 3499.1566 M 4147.25 3495.6866 L 4146.84 3495.4766 L 4146.22 3494.8666 L 4146.22 3499.1566 M 4144.87 3494.8666 L 4144.87 3499.1566 M 4144.87 3494.8666 L 4142.21 3494.8666 M 4144.87 3496.9066 L 4143.24 3496.9066 M 4140.86 3494.8666 L 4139.23 3499.1566 M 4137.59 3494.8666 L 4139.23 3499.1566 M 4136.24 3497.3166 L 4132.56 3497.3166 M 4131 3495.8866 L 4131 3495.6866 L 4130.8 3495.2766 L 4130.6 3495.0666 L 4130.19 3494.8666 L 4129.37 3494.8666 L 4128.96 3495.0666 L 4128.75 3495.2766 L 4128.55 3495.6866 L 4128.55 3496.0966 L 4128.75 3496.5066 L 4129.16 3497.1166 L 4131.21 3499.1566 L 4128.35 3499.1566 M 4127 3494.8666 L 4124.13 3499.1566 M 4124.13 3494.8666 L 4127 3499.1566 M 4121.55 3494.8666 L 4122.17 3495.0666 L 4122.58 3495.6866 L 4122.78 3496.7066 L 4122.78 3497.3166 L 4122.58 3498.3466 L 4122.17 3498.9566 L 4121.55 3499.1566 L 4121.15 3499.1566 L 4120.53 3498.9566 L 4120.12 3498.3466 L 4119.92 3497.3166 L 4119.92 3496.7066 L 4120.12 3495.6866 L 4120.53 3495.0666 L 4121.15 3494.8666 L 4121.55 3494.8666 M 4116.52 3494.8666 L 4118.57 3497.7266 L 4115.5 3497.7266 M 4116.52 3494.8666 L 4116.52 3499.1566 M 4114.15 3497.3166 L 4110.47 3497.3166 M 4106.05 3495.8866 L 4106.25 3495.4766 L 4106.66 3495.0666 L 4107.07 3494.8666 L 4107.89 3494.8666 L 4108.3 3495.0666 L 4108.71 3495.4766 L 4108.91 3495.8866 L 4109.12 3496.5066 L 4109.12 3497.5266 L 4108.91 3498.1366 L 4108.71 3498.5466 L 4108.3 3498.9566 L 4107.89 3499.1566 L 4107.07 3499.1566 L 4106.66 3498.9566 L 4106.25 3498.5466 L 4106.05 3498.1366 M 4104.29 3494.8666 L 4102.04 3494.8666 L 4103.27 3496.5066 L 4102.65 3496.5066 L 4102.25 3496.7066 L 4102.04 3496.9066 L 4101.84 3497.5266 L 4101.84 3497.9366 L 4102.04 3498.5466 L 4102.45 3498.9566 L 4103.06 3499.1566 L 4103.68 3499.1566 L 4104.29 3498.9566 L 4104.5 3498.7566 L 4104.7 3498.3466 M 4099.26 3494.8666 L 4099.87 3495.0666 L 4100.28 3495.6866 L 4100.49 3496.7066 L 4100.49 3497.3166 L 4100.28 3498.3466 L 4099.87 3498.9566 L 4099.26 3499.1566 L 4098.85 3499.1566 L 4098.24 3498.9566 L 4097.83 3498.3466 L 4097.62 3497.3166 L 4097.62 3496.7066 L 4097.83 3495.6866 L 4098.24 3495.0666 L 4098.85 3494.8666 L 4099.26 3494.8666 M 4096.27 3494.8666 L 4096.27 3499.1566 M 4096.27 3494.8666 L 4094.84 3494.8666 L 4094.23 3495.0666 L 4093.82 3495.4766 L 4093.61 3495.8866 L 4093.41 3496.5066 L 4093.41 3497.5266 L 4093.61 3498.1366 L 4093.82 3498.5466 L 4094.23 3498.9566 L 4094.84 3499.1566 L 4096.27 3499.1566 M 4089.2 3494.8666 L 4091.24 3499.1566 M 4092.06 3494.8666 L 4089.2 3494.8666 M 4085.8 3494.8666 L 4087.85 3497.7266 L 4084.78 3497.7266 M 4085.8 3494.8666 L 4085.8 3499.1566 M 4083.02 3494.8666 L 4080.77 3494.8666 L 4082 3496.5066 L 4081.38 3496.5066 L 4080.97 3496.7066 L 4080.77 3496.9066 L 4080.56 3497.5266 L 4080.56 3497.9366 L 4080.77 3498.5466 L 4081.18 3498.9566 L 4081.79 3499.1566 L 4082.4 3499.1566 L 4083.02 3498.9566 L 4083.22 3498.7566 L 4083.43 3498.3466 M 4079.21 3497.3166 L 4075.53 3497.3166 M 4072.95 3494.8666 L 4073.57 3495.0666 L 4073.98 3495.6866 L 4074.18 3496.7066 L 4074.18 3497.3166 L 4073.98 3498.3466 L 4073.57 3498.9566 L 4072.95 3499.1566 L 4072.55 3499.1566 L 4071.93 3498.9566 L 4071.52 3498.3466 L 4071.32 3497.3166 L 4071.32 3496.7066 L 4071.52 3495.6866 L 4071.93 3495.0666 L 4072.55 3494.8666 L 4072.95 3494.8666 M 4067.1 3494.8666 L 4069.15 3499.1566 M 4069.97 3494.8666 L 4067.1 3494.8666 M 4063.71 3494.8666 L 4065.75 3497.7266 L 4062.69 3497.7266 M 4063.71 3494.8666 L 4063.71 3499.1566 M 4060.93 3494.8666 L 4058.68 3494.8666 L 4059.9 3496.5066 L 4059.29 3496.5066 L 4058.88 3496.7066 L 4058.68 3496.9066 L 4058.47 3497.5266 L 4058.47 3497.9366 L 4058.68 3498.5466 L 4059.09 3498.9566 L 4059.7 3499.1566 L 4060.31 3499.1566 L 4060.93 3498.9566 L 4061.13 3498.7566 L 4061.34 3498.3466","useTrueTypeFontRendering":false,"thickness":0.6,"width":0.6,"val":1},{"type":"text","svgpath":"M 4036.7716 3469.8858 L 4036.4116 3469.7058 L 4035.8816 3469.1757 L 4035.8816 3472.9358","useTrueTypeFontRendering":false,"thickness":0.8,"width":0.8},{"type":"text","svgpath":"M 4037.4017 3480.0657 L 4037.4017 3479.8858 L 4037.2217 3479.5358 L 4037.0417 3479.3557 L 4036.6917 3479.1757 L 4035.9717 3479.1757 L 4035.6117 3479.3557 L 4035.4317 3479.5358 L 4035.2517 3479.8858 L 4035.2517 3480.2458 L 4035.4317 3480.6057 L 4035.7917 3481.1458 L 4037.5817 3482.9358 L 4035.0717 3482.9358","useTrueTypeFontRendering":false,"thickness":0.8,"width":0.8},{"type":"text","svgpath":"M 4073.9195 3474.6963 L 4073.9195 3476.9864 L 4074.0695 3477.4164 L 4074.2095 3477.5563 L 4074.4995 3477.6963 L 4074.7795 3477.6963 L 4075.0695 3477.5563 L 4075.2095 3477.4164 L 4075.3495 3476.9864 L 4075.3495 3476.6963 M 4072.9795 3474.6963 L 4072.9795 3477.6963 M 4072.9795 3477.6963 L 4071.2595 3477.6963 M 4068.1695 3475.4063 L 4068.3095 3475.1264 L 4068.5995 3474.8364 L 4068.8795 3474.6963 L 4069.4595 3474.6963 L 4069.7395 3474.8364 L 4070.0295 3475.1264 L 4070.1695 3475.4063 L 4070.3195 3475.8364 L 4070.3195 3476.5563 L 4070.1695 3476.9864 L 4070.0295 3477.2663 L 4069.7395 3477.5563 L 4069.4595 3477.6963 L 4068.8795 3477.6963 L 4068.5995 3477.5563 L 4068.3095 3477.2663 L 4068.1695 3476.9864 M 4065.7895 3474.6963 L 4065.7895 3476.9864 L 4065.9295 3477.4164 L 4066.0795 3477.5563 L 4066.3595 3477.6963 L 4066.6495 3477.6963 L 4066.9395 3477.5563 L 4067.0795 3477.4164 L 4067.2195 3476.9864 L 4067.2195 3476.6963 M 4064.8495 3474.6963 L 4064.8495 3477.6963 M 4064.8495 3477.6963 L 4063.1295 3477.6963 M 4060.0395 3475.4063 L 4060.1795 3475.1264 L 4060.4695 3474.8364 L 4060.7495 3474.6963 L 4061.3195 3474.6963 L 4061.6095 3474.8364 L 4061.8995 3475.1264 L 4062.0395 3475.4063 L 4062.1795 3475.8364 L 4062.1795 3476.5563 L 4062.0395 3476.9864 L 4061.8995 3477.2663 L 4061.6095 3477.5563 L 4061.3195 3477.6963 L 4060.7495 3477.6963 L 4060.4695 3477.5563 L 4060.1795 3477.2663 L 4060.0395 3476.9864 M 4057.6595 3474.6963 L 4057.6595 3476.9864 L 4057.7995 3477.4164 L 4057.9495 3477.5563 L 4058.2295 3477.6963 L 4058.5195 3477.6963 L 4058.8095 3477.5563 L 4058.9495 3477.4164 L 4059.0895 3476.9864 L 4059.0895 3476.6963 M 4056.7195 3474.6963 L 4056.7195 3477.6963 M 4056.7195 3477.6963 L 4054.9995 3477.6963 M 4051.8995 3475.4063 L 4052.0495 3475.1264 L 4052.3295 3474.8364 L 4052.6195 3474.6963 L 4053.1895 3474.6963 L 4053.4795 3474.8364 L 4053.7695 3475.1264 L 4053.9095 3475.4063 L 4054.0495 3475.8364 L 4054.0495 3476.5563 L 4053.9095 3476.9864 L 4053.7695 3477.2663 L 4053.4795 3477.5563 L 4053.1895 3477.6963 L 4052.6195 3477.6963 L 4052.3295 3477.5563 L 4052.0495 3477.2663 L 4051.8995 3476.9864 M 4049.5295 3474.6963 L 4049.5295 3476.9864 L 4049.6695 3477.4164 L 4049.8095 3477.5563 L 4050.0995 3477.6963 L 4050.3895 3477.6963 L 4050.6695 3477.5563 L 4050.8195 3477.4164 L 4050.9595 3476.9864 L 4050.9595 3476.6963 M 4048.5795 3474.6963 L 4048.5795 3477.6963 M 4048.5795 3477.6963 L 4046.8695 3477.6963 M 4043.7695 3475.4063 L 4043.9195 3475.1264 L 4044.1995 3474.8364 L 4044.4895 3474.6963 L 4045.0595 3474.6963 L 4045.3495 3474.8364 L 4045.6295 3475.1264 L 4045.7795 3475.4063 L 4045.9195 3475.8364 L 4045.9195 3476.5563 L 4045.7795 3476.9864 L 4045.6295 3477.2663 L 4045.3495 3477.5563 L 4045.0595 3477.6963 L 4044.4895 3477.6963 L 4044.1995 3477.5563 L 4043.9195 3477.2663 L 4043.7695 3476.9864","useTrueTypeFontRendering":false,"thickness":0.8,"width":0.8},{"type":"text","svgpath":"M 4081.1117 3469.5698 L 4082.9017 3473.3299 M 4083.6217 3469.5698 L 4081.1117 3469.5698","useTrueTypeFontRendering":false,"thickness":0.8,"width":0.8},{"type":"text","svgpath":"M 4082.7321 3479.4632 L 4083.2621 3479.6431 L 4083.4421 3479.9931 L 4083.4421 3480.3532 L 4083.2621 3480.7132 L 4082.9021 3480.8931 L 4082.1921 3481.0731 L 4081.6521 3481.2532 L 4081.2921 3481.6032 L 4081.1121 3481.9632 L 4081.1121 3482.5032 L 4081.2921 3482.8632 L 4081.4721 3483.0432 L 4082.0121 3483.2231 L 4082.7321 3483.2231 L 4083.2621 3483.0432 L 4083.4421 3482.8632 L 4083.6221 3482.5032 L 4083.6221 3481.9632 L 4083.4421 3481.6032 L 4083.0821 3481.2532 L 4082.5521 3481.0731 L 4081.8321 3480.8931 L 4081.4721 3480.7132 L 4081.2921 3480.3532 L 4081.2921 3479.9931 L 4081.4721 3479.6431 L 4082.0121 3479.4632 L 4082.7321 3479.4632","useTrueTypeFontRendering":false,"thickness":0.8,"width":0.8}]},"fabrication":{"F":[],"B":[]}},"footprints":[{"ref":"C1","center":[4071.18,3459.56],"bbox":{"pos":[4071.18,3459.56],"angle":90,"relpos":[-4.601199999999608,-1.962999999999738],"size":[9.202400000000125,3.9260000000003856]},"pads":[{"layers":["F"],"pos":[4071.18,3457.414],"size":[3.1106,2.126],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4071.18,"y":3457.4141},"polygon":[{"x":4072.243,"y":3458.9694},{"x":4070.117,"y":3458.9694},{"x":4070.117,"y":3455.8588},{"x":4072.243,"y":3455.8588}],"net":"GND"},{"layers":["F"],"pos":[4071.18,3461.706],"size":[3.1106,2.126],"angle":-90,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4071.18,"y":3461.7059},"polygon":[{"x":4072.243,"y":3460.1506},{"x":4070.117,"y":3460.1506},{"x":4070.117,"y":3463.2612},{"x":4072.243,"y":3463.2612}],"net":"C1_1"}],"drawings":[],"layer":"F"},{"ref":"C7","center":[4058.19,3420.31],"bbox":{"pos":[4058.19,3420.31],"angle":270,"relpos":[-4.601200000000063,-1.9630000000001928],"size":[9.202400000000125,3.925999999999931]},"pads":[{"layers":["F"],"pos":[4058.19,3422.456],"size":[3.1106,2.126],"angle":-270,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4058.19,"y":3422.4559},"polygon":[{"x":4057.127,"y":3420.9006},{"x":4059.253,"y":3420.9006},{"x":4059.253,"y":3424.0112},{"x":4057.127,"y":3424.0112}],"net":"VCC12"},{"layers":["F"],"pos":[4058.19,3418.164],"size":[3.1106,2.126],"angle":-270,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4058.19,"y":3418.1641},"polygon":[{"x":4057.127,"y":3419.7194},{"x":4059.253,"y":3419.7194},{"x":4059.253,"y":3416.6088},{"x":4057.127,"y":3416.6088}],"net":"GND"}],"drawings":[],"layer":"F"},{"ref":"C9","center":[4039.69,3420.31],"bbox":{"pos":[4039.69,3420.31],"angle":270,"relpos":[-4.601200000000063,-1.9630000000001928],"size":[9.202400000000125,3.925999999999931]},"pads":[{"layers":["F"],"pos":[4039.69,3422.456],"size":[3.1106,2.126],"angle":-270,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4039.69,"y":3422.4559},"polygon":[{"x":4038.627,"y":3420.9006},{"x":4040.753,"y":3420.9006},{"x":4040.753,"y":3424.0112},{"x":4038.627,"y":3424.0112}],"net":"VCC33"},{"layers":["F"],"pos":[4039.69,3418.164],"size":[3.1106,2.126],"angle":-270,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4039.69,"y":3418.1641},"polygon":[{"x":4038.627,"y":3419.7194},{"x":4040.753,"y":3419.7194},{"x":4040.753,"y":3416.6088},{"x":4038.627,"y":3416.6088}],"net":"GND"}],"drawings":[],"layer":"F"},{"ref":"C12","center":[4063.31,3420.31],"bbox":{"pos":[4063.31,3420.31],"angle":270,"relpos":[-4.601200000000517,-1.962999999999738],"size":[9.20240000000058,3.925999999999931]},"pads":[{"layers":["F"],"pos":[4063.31,3422.456],"size":[3.1106,2.126],"angle":-270,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4063.31,"y":3422.4559},"polygon":[{"x":4062.247,"y":3420.9006},{"x":4064.373,"y":3420.9006},{"x":4064.373,"y":3424.0112},{"x":4062.247,"y":3424.0112}],"net":"VCC12"},{"layers":["F"],"pos":[4063.31,3418.164],"size":[3.1106,2.126],"angle":-270,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4063.31,"y":3418.1641},"polygon":[{"x":4062.247,"y":3419.7194},{"x":4064.373,"y":3419.7194},{"x":4064.373,"y":3416.6088},{"x":4062.247,"y":3416.6088}],"net":"GND"}],"drawings":[],"layer":"F"},{"ref":"C15","center":[4060.55,3464.8],"bbox":{"pos":[4060.55,3464.8],"angle":180,"relpos":[-4.601200000000063,-1.9629999999992833],"size":[9.20239999999967,3.925999999999931]},"pads":[{"layers":["F"],"pos":[4058.404,3464.8],"size":[3.1106,2.126],"angle":-180,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4058.4041,"y":3464.8},"polygon":[{"x":4059.9594,"y":3463.737},{"x":4059.9594,"y":3465.863},{"x":4056.8488,"y":3465.863},{"x":4056.8488,"y":3463.737}],"net":"C15_2"},{"layers":["F"],"pos":[4062.696,3464.8],"size":[3.1106,2.126],"angle":-180,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4062.6959,"y":3464.8},"polygon":[{"x":4061.1406,"y":3463.737},{"x":4061.1406,"y":3465.863},{"x":4064.2512,"y":3465.863},{"x":4064.2512,"y":3463.737}],"net":"GND"}],"drawings":[],"layer":"F"},{"ref":"C17","center":[4049.53,3460.86],"bbox":{"pos":[4049.53,3460.86],"angle":0,"relpos":[-4.601200000000063,-1.9630000000001928],"size":[9.20239999999967,3.925999999999931]},"pads":[{"layers":["F"],"pos":[4051.676,3460.86],"size":[3.1106,2.126],"angle":0,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4051.6759,"y":3460.86},"polygon":[{"x":4050.1206,"y":3461.923},{"x":4050.1206,"y":3459.797},{"x":4053.2312,"y":3459.797},{"x":4053.2312,"y":3461.923}],"net":"MIXERN"},{"layers":["F"],"pos":[4047.384,3460.86],"size":[3.1106,2.126],"angle":0,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4047.3841,"y":3460.86},"polygon":[{"x":4048.9394,"y":3461.923},{"x":4048.9394,"y":3459.797},{"x":4045.8288,"y":3459.797},{"x":4045.8288,"y":3461.923}],"net":"C17_1"}],"drawings":[],"layer":"F"},{"ref":"R2","center":[4063.7,3460.86],"bbox":{"pos":[4063.7,3460.86],"angle":180,"relpos":[-3.717500000000655,-1.9630000000001928],"size":[7.434999999999945,3.925999999999931]},"pads":[{"layers":["F"],"pos":[4061.996,3460.86],"size":[2.227,2.126],"angle":-180,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4061.996,"y":3460.86},"polygon":[{"x":4063.1094,"y":3459.797},{"x":4063.1094,"y":3461.923},{"x":4060.8825,"y":3461.923},{"x":4060.8825,"y":3459.797}],"net":"R2_2"},{"layers":["F"],"pos":[4065.404,3460.86],"size":[2.227,2.126],"angle":-180,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4065.404,"y":3460.86},"polygon":[{"x":4064.2906,"y":3459.797},{"x":4064.2906,"y":3461.923},{"x":4066.5175,"y":3461.923},{"x":4066.5175,"y":3459.797}],"net":"C1_1"}],"drawings":[],"layer":"F"},{"ref":"R3","center":[4063.7,3456.93],"bbox":{"pos":[4063.7,3456.93],"angle":180,"relpos":[-3.717500000000655,-1.9630000000006476],"size":[7.434999999999945,3.925999999999931]},"pads":[{"layers":["F"],"pos":[4061.996,3456.93],"size":[2.227,2.126],"angle":-180,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4061.996,"y":3456.93},"polygon":[{"x":4063.1094,"y":3455.867},{"x":4063.1094,"y":3457.993},{"x":4060.8825,"y":3457.993},{"x":4060.8825,"y":3455.867}],"net":"R2_2"},{"layers":["F"],"pos":[4065.404,3456.93],"size":[2.227,2.126],"angle":-180,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4065.404,"y":3456.93},"polygon":[{"x":4064.2906,"y":3455.867},{"x":4064.2906,"y":3457.993},{"x":4066.5175,"y":3457.993},{"x":4066.5175,"y":3455.867}],"net":"OPOUT2"}],"drawings":[],"layer":"F"},{"ref":"R8","center":[4050.32,3456.93],"bbox":{"pos":[4050.32,3456.93],"angle":0,"relpos":[-3.7175000000002,-1.962999999999738],"size":[7.434999999999945,3.925999999999931]},"pads":[{"layers":["F"],"pos":[4052.024,3456.93],"size":[2.227,2.126],"angle":0,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4052.024,"y":3456.93},"polygon":[{"x":4050.9106,"y":3457.993},{"x":4050.9106,"y":3455.867},{"x":4053.1375,"y":3455.867},{"x":4053.1375,"y":3457.993}],"net":"MIXERN"},{"layers":["F"],"pos":[4048.616,3456.93],"size":[2.227,2.126],"angle":0,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4048.616,"y":3456.93},"polygon":[{"x":4049.7294,"y":3457.993},{"x":4049.7294,"y":3455.867},{"x":4047.5025,"y":3455.867},{"x":4047.5025,"y":3457.993}],"net":"C17_1"}],"drawings":[],"layer":"F"},{"ref":"R10","center":[4057.8,3458.68],"bbox":{"pos":[4057.8,3458.68],"angle":90,"relpos":[-3.7175000000002,-1.9630000000001928],"size":[7.434999999999945,3.925999999999931]},"pads":[{"layers":["F"],"pos":[4057.8,3456.976],"size":[2.227,2.126],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4057.8,"y":3456.976},"polygon":[{"x":4058.863,"y":3458.0894},{"x":4056.737,"y":3458.0894},{"x":4056.737,"y":3455.8625},{"x":4058.863,"y":3455.8625}],"net":"MIXERP"},{"layers":["F"],"pos":[4057.8,3460.384],"size":[2.227,2.126],"angle":-90,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4057.8,"y":3460.384},"polygon":[{"x":4058.863,"y":3459.2706},{"x":4056.737,"y":3459.2706},{"x":4056.737,"y":3461.4975},{"x":4058.863,"y":3461.4975}],"net":"C15_2"}],"drawings":[],"layer":"F"},{"ref":"H1","center":[4059.3701,3476.2166],"bbox":{"pos":[4059.3701,3476.2166],"angle":180,"relpos":[-20.000000000000455,-10.000000000000455],"size":[40,20]},"pads":[{"layers":["F","B"],"pos":[4074.37,3481.217],"size":[6.2992,6.2992],"angle":-180,"shape":"oval","type":"th","drillsize":[4.3308,4.3308],"holeCenterPoint":{"x":4074.3701,"y":3481.2166},"polygon":[],"net":"GND"},{"layers":["F","B"],"pos":[4074.37,3471.217],"size":[6.2992,6.2992],"angle":-180,"shape":"oval","type":"th","drillsize":[4.3308,4.3308],"holeCenterPoint":{"x":4074.3701,"y":3471.2166},"polygon":[],"net":"GND"},{"layers":["F","B"],"pos":[4064.37,3481.217],"size":[6.2992,6.2992],"angle":-180,"shape":"oval","type":"th","drillsize":[4.3308,4.3308],"holeCenterPoint":{"x":4064.3701,"y":3481.2166},"polygon":[],"net":"GND"},{"layers":["F","B"],"pos":[4064.37,3471.217],"size":[6.2992,6.2992],"angle":-180,"shape":"oval","type":"th","drillsize":[4.3308,4.3308],"holeCenterPoint":{"x":4064.3701,"y":3471.2166},"polygon":[],"net":"OPOUT2"},{"layers":["F","B"],"pos":[4054.37,3481.217],"size":[6.2992,6.2992],"angle":-180,"shape":"oval","type":"th","drillsize":[4.3308,4.3308],"holeCenterPoint":{"x":4054.3701,"y":3481.2166},"polygon":[],"net":"GND"},{"layers":["F","B"],"pos":[4054.37,3471.217],"size":[6.2992,6.2992],"angle":-180,"shape":"oval","type":"th","drillsize":[4.3308,4.3308],"holeCenterPoint":{"x":4054.3701,"y":3471.2166},"polygon":[],"net":"MIXERP"},{"layers":["F","B"],"pos":[4044.37,3481.217],"size":[6.2992,6.2992],"angle":-180,"shape":"oval","type":"th","drillsize":[4.3308,4.3308],"holeCenterPoint":{"x":4044.3701,"y":3481.2166},"polygon":[],"net":"VCC33"},{"layers":["F","B"],"pos":[4044.37,3471.217],"size":[6.2992,6.2992],"angle":-180,"pin1":1,"shape":"rect","type":"th","drillsize":[4.3308,4.3308],"holeCenterPoint":{"x":4044.3701,"y":3471.2166},"polygon":[{"x":4041.2205,"y":3474.3662},{"x":4047.5197,"y":3474.3662},{"x":4047.5197,"y":3468.067},{"x":4041.2205,"y":3468.067}],"net":"MIXERN"}],"drawings":[],"layer":"B"},{"ref":"U1","center":[4059.764,3439.9961],"bbox":{"pos":[4059.764,3439.9961],"angle":90,"relpos":[-11.853900000000522,-8.5],"size":[20.35400000000027,17]},"pads":[{"layers":["F"],"pos":[4051.764,3444.917],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4051.764,"y":3444.9171},"polygon":[{"x":4050.1636,"y":3445.4171},{"x":4050.1636,"y":3444.4171},{"x":4053.3644,"y":3444.4171},{"x":4053.3644,"y":3445.4171}],"net":""},{"layers":["F"],"pos":[4051.764,3442.949],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4051.764,"y":3442.9491},"polygon":[{"x":4050.1636,"y":3443.4491},{"x":4050.1636,"y":3442.4491},{"x":4053.3644,"y":3442.4491},{"x":4053.3644,"y":3443.4491}],"net":""},{"layers":["F"],"pos":[4051.764,3440.98],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4051.764,"y":3440.9801},"polygon":[{"x":4050.1636,"y":3441.4801},{"x":4050.1636,"y":3440.4801},{"x":4053.3644,"y":3440.4801},{"x":4053.3644,"y":3441.4801}],"net":""},{"layers":["F"],"pos":[4051.764,3439.012],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4051.764,"y":3439.0121},"polygon":[{"x":4050.1636,"y":3439.5121},{"x":4050.1636,"y":3438.5121},{"x":4053.3644,"y":3438.5121},{"x":4053.3644,"y":3439.5121}],"net":"U1_21"},{"layers":["F"],"pos":[4051.764,3437.043],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4051.764,"y":3437.0431},"polygon":[{"x":4050.1636,"y":3437.5431},{"x":4050.1636,"y":3436.5431},{"x":4053.3644,"y":3436.5431},{"x":4053.3644,"y":3437.5431}],"net":""},{"layers":["F"],"pos":[4051.764,3435.075],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4051.764,"y":3435.0751},"polygon":[{"x":4050.1636,"y":3435.5751},{"x":4050.1636,"y":3434.5751},{"x":4053.3644,"y":3434.5751},{"x":4053.3644,"y":3435.5751}],"net":""},{"layers":["F"],"pos":[4054.843,3431.996],"size":[3.2,1],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4054.843,"y":3431.9961},"polygon":[{"x":4054.3433,"y":3433.5961},{"x":4054.3433,"y":3430.3961},{"x":4055.3433,"y":3430.3961},{"x":4055.3433,"y":3433.5961}],"net":"VCC12"},{"layers":["F"],"pos":[4056.811,3431.996],"size":[3.2,1],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4056.811,"y":3431.9961},"polygon":[{"x":4056.3108,"y":3433.5961},{"x":4056.3108,"y":3430.3961},{"x":4057.3108,"y":3430.3961},{"x":4057.3108,"y":3433.5961}],"net":"VCC12"},{"layers":["F"],"pos":[4058.78,3431.996],"size":[3.2,1],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4058.78,"y":3431.9961},"polygon":[{"x":4058.2803,"y":3433.5961},{"x":4058.2803,"y":3430.3961},{"x":4059.2803,"y":3430.3961},{"x":4059.2803,"y":3433.5961}],"net":""},{"layers":["F"],"pos":[4060.748,3431.996],"size":[3.2,1],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4060.748,"y":3431.9961},"polygon":[{"x":4060.2477,"y":3433.5961},{"x":4060.2477,"y":3430.3961},{"x":4061.2477,"y":3430.3961},{"x":4061.2477,"y":3433.5961}],"net":"VCC12"},{"layers":["F"],"pos":[4062.717,3431.996],"size":[3.2,1],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4062.717,"y":3431.9961},"polygon":[{"x":4062.2172,"y":3433.5961},{"x":4062.2172,"y":3430.3961},{"x":4063.2172,"y":3430.3961},{"x":4063.2172,"y":3433.5961}],"net":""},{"layers":["F"],"pos":[4064.685,3431.996],"size":[3.2,1],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4064.685,"y":3431.9961},"polygon":[{"x":4064.1847,"y":3433.5961},{"x":4064.1847,"y":3430.3961},{"x":4065.1847,"y":3430.3961},{"x":4065.1847,"y":3433.5961}],"net":"VCC12"},{"layers":["F"],"pos":[4067.764,3435.075],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4067.764,"y":3435.0751},"polygon":[{"x":4066.1636,"y":3435.5751},{"x":4066.1636,"y":3434.5751},{"x":4069.3644,"y":3434.5751},{"x":4069.3644,"y":3435.5751}],"net":""},{"layers":["F"],"pos":[4067.764,3437.043],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4067.764,"y":3437.0431},"polygon":[{"x":4066.1636,"y":3437.5431},{"x":4066.1636,"y":3436.5431},{"x":4069.3644,"y":3436.5431},{"x":4069.3644,"y":3437.5431}],"net":""},{"layers":["F"],"pos":[4067.764,3439.012],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4067.764,"y":3439.0121},"polygon":[{"x":4066.1636,"y":3439.5121},{"x":4066.1636,"y":3438.5121},{"x":4069.3644,"y":3438.5121},{"x":4069.3644,"y":3439.5121}],"net":""},{"layers":["F"],"pos":[4067.764,3440.98],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4067.764,"y":3440.9801},"polygon":[{"x":4066.1636,"y":3441.4801},{"x":4066.1636,"y":3440.4801},{"x":4069.3644,"y":3440.4801},{"x":4069.3644,"y":3441.4801}],"net":"U1_9"},{"layers":["F"],"pos":[4067.764,3442.949],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4067.764,"y":3442.9491},"polygon":[{"x":4066.1636,"y":3443.4491},{"x":4066.1636,"y":3442.4491},{"x":4069.3644,"y":3442.4491},{"x":4069.3644,"y":3443.4491}],"net":""},{"layers":["F"],"pos":[4067.764,3444.917],"size":[1,3.2008],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4067.764,"y":3444.9171},"polygon":[{"x":4066.1636,"y":3445.4171},{"x":4066.1636,"y":3444.4171},{"x":4069.3644,"y":3444.4171},{"x":4069.3644,"y":3445.4171}],"net":""},{"layers":["F"],"pos":[4064.685,3447.996],"size":[3.2,1],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4064.685,"y":3447.9961},"polygon":[{"x":4064.1853,"y":3449.5961},{"x":4064.1853,"y":3446.3961},{"x":4065.1853,"y":3446.3961},{"x":4065.1853,"y":3449.5961}],"net":"OPOUT2"},{"layers":["F"],"pos":[4062.717,3447.996],"size":[3.2,1],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4062.717,"y":3447.9961},"polygon":[{"x":4062.2168,"y":3449.5961},{"x":4062.2168,"y":3446.3961},{"x":4063.2168,"y":3446.3961},{"x":4063.2168,"y":3449.5961}],"net":"R2_2"},{"layers":["F"],"pos":[4060.748,3447.996],"size":[3.2,1],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4060.748,"y":3447.9961},"polygon":[{"x":4060.2483,"y":3449.5961},{"x":4060.2483,"y":3446.3961},{"x":4061.2483,"y":3446.3961},{"x":4061.2483,"y":3449.5961}],"net":""},{"layers":["F"],"pos":[4058.78,3447.996],"size":[3.2,1],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4058.78,"y":3447.9961},"polygon":[{"x":4058.2797,"y":3449.5961},{"x":4058.2797,"y":3446.3961},{"x":4059.2797,"y":3446.3961},{"x":4059.2797,"y":3449.5961}],"net":"MIXERP"},{"layers":["F"],"pos":[4056.811,3447.996],"size":[3.2,1],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4056.811,"y":3447.9961},"polygon":[{"x":4056.3112,"y":3449.5961},{"x":4056.3112,"y":3446.3961},{"x":4057.3112,"y":3446.3961},{"x":4057.3112,"y":3449.5961}],"net":"MIXERN"},{"layers":["F"],"pos":[4054.842,3447.996],"size":[3.2,1],"angle":-90,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4054.8427,"y":3447.9961},"polygon":[{"x":4054.3424,"y":3449.5961},{"x":4054.3424,"y":3446.3961},{"x":4055.3424,"y":3446.3961},{"x":4055.3424,"y":3449.5961}],"net":"C17_1"},{"layers":["F"],"pos":[4059.764,3439.996],"size":[10,10],"angle":-90,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4059.764,"y":3439.9961},"polygon":[{"x":4054.764,"y":3444.9961},{"x":4054.764,"y":3434.9961},{"x":4064.764,"y":3434.9961},{"x":4064.764,"y":3444.9961}],"net":"GND"}],"drawings":[],"layer":"F"},{"ref":"U2","center":[4048.937,3417.9488],"bbox":{"pos":[4048.937,3417.9488],"angle":270,"relpos":[-6.042899999999918,-6.048000000000684],"size":[12.08620000000019,12.096000000000004]},"pads":[{"layers":["F"],"pos":[4045.197,3422.811],"size":[4.2126,2.3622],"angle":-270,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4045.1968,"y":3422.8105},"polygon":[{"x":4046.3781,"y":3420.7047},{"x":4046.3781,"y":3424.9173},{"x":4044.0159,"y":3424.9173},{"x":4044.0159,"y":3420.7047}],"net":"VCC33"},{"layers":["F"],"pos":[4052.677,3422.811],"size":[4.2126,2.3622],"angle":-270,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4052.6772,"y":3422.8105},"polygon":[{"x":4053.8581,"y":3420.7047},{"x":4053.8581,"y":3424.9173},{"x":4051.4959,"y":3424.9173},{"x":4051.4959,"y":3420.7047}],"net":"VCC12"},{"layers":["F"],"pos":[4048.937,3413.087],"size":[4.2126,2.3622],"angle":-270,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4048.937,"y":3413.0861},"polygon":[{"x":4050.1181,"y":3410.9803},{"x":4050.1181,"y":3415.1929},{"x":4047.7559,"y":3415.1929},{"x":4047.7559,"y":3410.9803}],"net":"GND"}],"drawings":[],"layer":"F"},{"ref":"RF1","center":[4084.1733,3441.192],"bbox":{"pos":[4084.1733,3441.192],"angle":0,"relpos":[-7.300299999999879,-4.9217499999999745],"size":[11.228250000000116,9.843500000000404]},"pads":[{"layers":["F"],"pos":[4083.278,3437.412],"size":[6.2205,2.2835],"angle":0,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4083.2783,"y":3437.4125},"polygon":[{"x":4080.1681,"y":3436.2707},{"x":4086.3885,"y":3436.2707},{"x":4086.3885,"y":3438.5542},{"x":4080.1681,"y":3438.5542}],"net":"GND"},{"layers":["F"],"pos":[4087.117,3441.192],"size":[1.9685,1.9685],"angle":0,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4087.1169,"y":3441.192},"polygon":[{"x":4086.133,"y":3440.2078},{"x":4088.1016,"y":3440.2078},{"x":4088.1016,"y":3442.1763},{"x":4086.133,"y":3442.1763}],"net":"GND"},{"layers":["F"],"pos":[4083.278,3444.972],"size":[6.2205,2.2835],"angle":0,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4083.2783,"y":3444.9715},"polygon":[{"x":4080.1681,"y":3443.8298},{"x":4086.3885,"y":3443.8298},{"x":4086.3885,"y":3446.1133},{"x":4080.1681,"y":3446.1133}],"net":"GND"},{"layers":["F"],"pos":[4081.229,3441.192],"size":[5.5118,2.3622],"angle":0,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4081.2293,"y":3441.192},"polygon":[{"x":4078.4734,"y":3440.0109},{"x":4083.9852,"y":3440.0109},{"x":4083.9852,"y":3442.3731},{"x":4078.4734,"y":3442.3731}],"net":"U1_9"}],"drawings":[],"layer":"F"},{"ref":"RF2","center":[4035.3543,3441.1922],"bbox":{"pos":[4035.3543,3441.1922],"angle":180,"relpos":[-7.299700000000485,-4.921550000000934],"size":[11.228250000000116,9.8425000000002]},"pads":[{"layers":["F"],"pos":[4036.249,3444.972],"size":[6.2205,2.2835],"angle":-180,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4036.2493,"y":3444.9717},"polygon":[{"x":4039.3595,"y":3446.1135},{"x":4033.1391,"y":3446.1135},{"x":4033.1391,"y":3443.83},{"x":4039.3595,"y":3443.83}],"net":"GND"},{"layers":["F"],"pos":[4032.41,3441.192],"size":[1.9685,1.9685],"angle":-180,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4032.4107,"y":3441.1922},"polygon":[{"x":4033.3946,"y":3442.1764},{"x":4031.426,"y":3442.1764},{"x":4031.426,"y":3440.2079},{"x":4033.3946,"y":3440.2079}],"net":"GND"},{"layers":["F"],"pos":[4036.249,3437.413],"size":[6.2205,2.2835],"angle":-180,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4036.2493,"y":3437.4127},"polygon":[{"x":4039.3595,"y":3438.5544},{"x":4033.1391,"y":3438.5544},{"x":4033.1391,"y":3436.2709},{"x":4039.3595,"y":3436.2709}],"net":"GND"},{"layers":["F"],"pos":[4038.298,3441.192],"size":[5.5118,2.3622],"angle":-180,"pin1":1,"shape":"rect","type":"smd","drillsize":[0,0],"holeCenterPoint":{"x":4038.2983,"y":3441.1922},"polygon":[{"x":4041.0542,"y":3442.3733},{"x":4035.5424,"y":3442.3733},{"x":4035.5424,"y":3440.0111},{"x":4041.0542,"y":3440.0111}],"net":"U1_21"}],"drawings":[],"layer":"F"}],"metadata":{"title":"PCB_XBR816C_DEMO","revision":"0","company":"Unknown Company","date":"2022-03-07"},"tracks":{"F":[{"type":"polyline","net":"MIXERP","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4057.7953,3456.9756 4056.1701,3456.9756 4055.0394,3458.1063 4055.0394,3466.374 4054.3701,3467.0433 4054.3701,3471.2166"},{"type":"polyline","net":"C1_1","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4075.1181,3462.437 4074.3905,3461.7094 4071.1811,3461.7094"},{"type":"polyline","net":"C1_1","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4065.4048,3460.8622 4065.4048,3463.7473 4066.063,3464.4055"},{"type":"polyline","net":"OPOUT2","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4065.4,3456.93 4068.43,3459.95 4068.43,3467.16 4064.37,3471.22"},{"type":"polyline","net":"OPOUT2","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4064.685,3447.9961 4064.685,3451.6102 4065.4048,3452.33 4065.4048,3456.9252"},{"type":"polyline","net":"R2_2","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4062.717,3447.9961 4062.717,3451.6098 4061.9968,3452.33 4061.9968,3456.9252"},{"type":"polyline","net":"R2_2","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4061.9968,3456.9252 4061.9968,3460.8622"},{"type":"polyline","net":"C15_2","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4057.7953,3460.3836 4057.7953,3464.1893 4058.4052,3464.7992"},{"type":"polyline","net":"MIXERP","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4058.78,3447.9961 4058.78,3451.6098 4057.7953,3452.5945 4057.7953,3456.9756"},{"type":"polyline","net":"MIXERN","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4051.6736,3460.8622 4051.6736,3463.0469 4049.9213,3464.7992 4046.378,3464.7992 4044.3701,3466.8071 4044.3701,3471.2166"},{"type":"polyline","net":"MIXERN","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4052.019,3456.9252 4052.019,3460.5168 4051.6736,3460.8622"},{"type":"polyline","net":"MIXERN","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4056.811,3447.9961 4056.811,3450.4292 4055.4331,3451.8071 4053.8583,3451.8071 4052.019,3453.6464 4052.019,3456.9252"},{"type":"polyline","net":"C17_1","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4048.611,3456.9252 4047.3816,3458.1546 4047.3816,3460.8622"},{"type":"polyline","net":"C17_1","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4054.842,3447.9961 4052.5512,3447.9961 4048.611,3451.9363 4048.611,3456.9252"},{"type":"polyline","net":"U1_9","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4067.764,3440.9801 4080.7177,3440.9801"},{"type":"polyline","net":"U1_21","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4043.5615,3439.0121 4051.764,3439.0121"},{"start":[4066.063,3464.406],"end":[4066.063,3464.406],"width":2.3622,"net":"C1_1"},{"start":[4075.118,3462.437],"end":[4075.118,3462.437],"width":2.3622,"net":"C1_1"},{"start":[4031.811,3428.973],"end":[4031.811,3428.973],"width":2.3622,"net":"GND"},{"start":[4034.567,3428.973],"end":[4034.567,3428.973],"width":2.3622,"net":"GND"},{"start":[4037.323,3428.973],"end":[4037.323,3428.973],"width":2.3622,"net":"GND"},{"start":[4040.079,3428.973],"end":[4040.079,3428.973],"width":2.3622,"net":"GND"},{"start":[4042.835,3428.973],"end":[4042.835,3428.973],"width":2.3622,"net":"GND"},{"start":[4045.591,3428.973],"end":[4045.591,3428.973],"width":2.3622,"net":"GND"},{"start":[4048.346,3428.973],"end":[4048.346,3428.973],"width":2.3622,"net":"GND"},{"start":[4048.346,3431.728],"end":[4048.346,3431.728],"width":2.3622,"net":"GND"},{"start":[4045.591,3431.728],"end":[4045.591,3431.728],"width":2.3622,"net":"GND"},{"start":[4042.835,3431.728],"end":[4042.835,3431.728],"width":2.3622,"net":"GND"},{"start":[4040.079,3431.728],"end":[4040.079,3431.728],"width":2.3622,"net":"GND"},{"start":[4037.323,3431.728],"end":[4037.323,3431.728],"width":2.3622,"net":"GND"},{"start":[4034.567,3431.728],"end":[4034.567,3431.728],"width":2.3622,"net":"GND"},{"start":[4031.811,3431.728],"end":[4031.811,3431.728],"width":2.3622,"net":"GND"},{"start":[4041.654,3434.484],"end":[4041.654,3434.484],"width":2.3622,"net":"GND"},{"start":[4044.41,3434.484],"end":[4044.41,3434.484],"width":2.3622,"net":"GND"},{"start":[4047.165,3434.484],"end":[4047.165,3434.484],"width":2.3622,"net":"GND"},{"start":[4044.41,3442.358],"end":[4044.41,3442.358],"width":2.3622,"net":"GND"},{"start":[4047.165,3442.358],"end":[4047.165,3442.358],"width":2.3622,"net":"GND"},{"start":[4043.622,3445.114],"end":[4043.622,3445.114],"width":2.3622,"net":"GND"},{"start":[4046.378,3445.114],"end":[4046.378,3445.114],"width":2.3622,"net":"GND"},{"start":[4075.512,3437.634],"end":[4075.512,3437.634],"width":2.3622,"net":"GND"},{"start":[4072.756,3437.634],"end":[4072.756,3437.634],"width":2.3622,"net":"GND"},{"start":[4057.008,3437.24],"end":[4057.008,3437.24],"width":2.3622,"net":"GND"},{"start":[4059.764,3437.24],"end":[4059.764,3437.24],"width":2.3622,"net":"GND"},{"start":[4062.52,3437.24],"end":[4062.52,3437.24],"width":2.3622,"net":"GND"},{"start":[4057.008,3439.996],"end":[4057.008,3439.996],"width":2.3622,"net":"GND"},{"start":[4059.764,3439.996],"end":[4059.764,3439.996],"width":2.3622,"net":"GND"},{"start":[4062.52,3439.996],"end":[4062.52,3439.996],"width":2.3622,"net":"GND"},{"start":[4057.008,3442.752],"end":[4057.008,3442.752],"width":2.3622,"net":"GND"},{"start":[4059.764,3442.752],"end":[4059.764,3442.752],"width":2.3622,"net":"GND"},{"start":[4062.52,3442.752],"end":[4062.52,3442.752],"width":2.3622,"net":"GND"},{"start":[4032.863,3457.977],"end":[4032.863,3457.977],"width":2.3622,"net":"GND"},{"start":[4035.619,3457.977],"end":[4035.619,3457.977],"width":2.3622,"net":"GND"},{"start":[4038.374,3457.977],"end":[4038.374,3457.977],"width":2.3622,"net":"GND"},{"start":[4041.13,3457.977],"end":[4041.13,3457.977],"width":2.3622,"net":"GND"},{"start":[4041.13,3460.733],"end":[4041.13,3460.733],"width":2.3622,"net":"GND"},{"start":[4041.13,3463.489],"end":[4041.13,3463.489],"width":2.3622,"net":"GND"},{"start":[4038.374,3463.489],"end":[4038.374,3463.489],"width":2.3622,"net":"GND"},{"start":[4038.374,3460.733],"end":[4038.374,3460.733],"width":2.3622,"net":"GND"},{"start":[4035.619,3460.733],"end":[4035.619,3460.733],"width":2.3622,"net":"GND"},{"start":[4035.619,3463.489],"end":[4035.619,3463.489],"width":2.3622,"net":"GND"},{"start":[4032.863,3463.489],"end":[4032.863,3463.489],"width":2.3622,"net":"GND"},{"start":[4032.863,3460.733],"end":[4032.863,3460.733],"width":2.3622,"net":"GND"},{"start":[4031.024,3467.161],"end":[4031.024,3467.161],"width":2.3622,"net":"GND"},{"start":[4033.78,3467.161],"end":[4033.78,3467.161],"width":2.3622,"net":"GND"},{"start":[4033.78,3469.917],"end":[4033.78,3469.917],"width":2.3622,"net":"GND"},{"start":[4031.024,3472.673],"end":[4031.024,3472.673],"width":2.3622,"net":"GND"},{"start":[4033.78,3472.673],"end":[4033.78,3472.673],"width":2.3622,"net":"GND"},{"start":[4031.024,3469.917],"end":[4031.024,3469.917],"width":2.3622,"net":"GND"},{"start":[4032.469,3412.701],"end":[4032.469,3412.701],"width":2.3622,"net":"GND"},{"start":[4032.469,3415.457],"end":[4032.469,3415.457],"width":2.3622,"net":"GND"},{"start":[4035.225,3412.701],"end":[4035.225,3412.701],"width":2.3622,"net":"GND"},{"start":[4035.225,3415.457],"end":[4035.225,3415.457],"width":2.3622,"net":"GND"},{"start":[4037.981,3412.701],"end":[4037.981,3412.701],"width":2.3622,"net":"GND"},{"start":[4040.737,3412.701],"end":[4040.737,3412.701],"width":2.3622,"net":"GND"},{"start":[4043.493,3412.701],"end":[4043.493,3412.701],"width":2.3622,"net":"GND"},{"start":[4054.516,3412.701],"end":[4054.516,3412.701],"width":2.3622,"net":"GND"},{"start":[4057.272,3412.701],"end":[4057.272,3412.701],"width":2.3622,"net":"GND"},{"start":[4060.028,3412.701],"end":[4060.028,3412.701],"width":2.3622,"net":"GND"},{"start":[4060.028,3476.087],"end":[4060.028,3476.087],"width":2.3622,"net":"GND"},{"start":[4062.784,3412.701],"end":[4062.784,3412.701],"width":2.3622,"net":"GND"},{"start":[4065.54,3412.701],"end":[4065.54,3412.701],"width":2.3622,"net":"GND"},{"start":[4068.296,3412.701],"end":[4068.296,3412.701],"width":2.3622,"net":"GND"},{"start":[4068.296,3415.457],"end":[4068.296,3415.457],"width":2.3622,"net":"GND"},{"start":[4068.296,3418.213],"end":[4068.296,3418.213],"width":2.3622,"net":"GND"},{"start":[4071.052,3412.701],"end":[4071.052,3412.701],"width":2.3622,"net":"GND"},{"start":[4071.052,3415.457],"end":[4071.052,3415.457],"width":2.3622,"net":"GND"},{"start":[4071.052,3418.213],"end":[4071.052,3418.213],"width":2.3622,"net":"GND"},{"start":[4071.052,3420.969],"end":[4071.052,3420.969],"width":2.3622,"net":"GND"},{"start":[4071.052,3423.725],"end":[4071.052,3423.725],"width":2.3622,"net":"GND"},{"start":[4071.052,3426.481],"end":[4071.052,3426.481],"width":2.3622,"net":"GND"},{"start":[4071.052,3429.237],"end":[4071.052,3429.237],"width":2.3622,"net":"GND"},{"start":[4071.052,3448.528],"end":[4071.052,3448.528],"width":2.3622,"net":"GND"},{"start":[4071.052,3451.284],"end":[4071.052,3451.284],"width":2.3622,"net":"GND"},{"start":[4073.808,3412.701],"end":[4073.808,3412.701],"width":2.3622,"net":"GND"},{"start":[4073.808,3415.457],"end":[4073.808,3415.457],"width":2.3622,"net":"GND"},{"start":[4073.808,3418.213],"end":[4073.808,3418.213],"width":2.3622,"net":"GND"},{"start":[4073.808,3420.969],"end":[4073.808,3420.969],"width":2.3622,"net":"GND"},{"start":[4073.808,3423.725],"end":[4073.808,3423.725],"width":2.3622,"net":"GND"},{"start":[4073.808,3426.481],"end":[4073.808,3426.481],"width":2.3622,"net":"GND"},{"start":[4073.808,3429.237],"end":[4073.808,3429.237],"width":2.3622,"net":"GND"},{"start":[4073.808,3431.993],"end":[4073.808,3431.993],"width":2.3622,"net":"GND"},{"start":[4073.808,3434.748],"end":[4073.808,3434.748],"width":2.3622,"net":"GND"},{"start":[4073.808,3445.772],"end":[4073.808,3445.772],"width":2.3622,"net":"GND"},{"start":[4073.808,3448.528],"end":[4073.808,3448.528],"width":2.3622,"net":"GND"},{"start":[4073.808,3451.284],"end":[4073.808,3451.284],"width":2.3622,"net":"GND"},{"start":[4076.563,3412.701],"end":[4076.563,3412.701],"width":2.3622,"net":"GND"},{"start":[4076.563,3415.457],"end":[4076.563,3415.457],"width":2.3622,"net":"GND"},{"start":[4076.563,3418.213],"end":[4076.563,3418.213],"width":2.3622,"net":"GND"},{"start":[4076.563,3420.969],"end":[4076.563,3420.969],"width":2.3622,"net":"GND"},{"start":[4076.563,3423.725],"end":[4076.563,3423.725],"width":2.3622,"net":"GND"},{"start":[4076.563,3426.481],"end":[4076.563,3426.481],"width":2.3622,"net":"GND"},{"start":[4076.563,3429.237],"end":[4076.563,3429.237],"width":2.3622,"net":"GND"},{"start":[4076.563,3431.993],"end":[4076.563,3431.993],"width":2.3622,"net":"GND"},{"start":[4076.563,3434.748],"end":[4076.563,3434.748],"width":2.3622,"net":"GND"},{"start":[4076.563,3445.772],"end":[4076.563,3445.772],"width":2.3622,"net":"GND"},{"start":[4076.563,3451.284],"end":[4076.563,3451.284],"width":2.3622,"net":"GND"},{"start":[4076.563,3454.04],"end":[4076.563,3454.04],"width":2.3622,"net":"GND"},{"start":[4076.563,3456.796],"end":[4076.563,3456.796],"width":2.3622,"net":"GND"},{"start":[4079.319,3412.701],"end":[4079.319,3412.701],"width":2.3622,"net":"GND"},{"start":[4079.319,3415.457],"end":[4079.319,3415.457],"width":2.3622,"net":"GND"},{"start":[4079.319,3418.213],"end":[4079.319,3418.213],"width":2.3622,"net":"GND"},{"start":[4079.319,3420.969],"end":[4079.319,3420.969],"width":2.3622,"net":"GND"},{"start":[4079.319,3423.725],"end":[4079.319,3423.725],"width":2.3622,"net":"GND"},{"start":[4079.319,3426.481],"end":[4079.319,3426.481],"width":2.3622,"net":"GND"},{"start":[4079.319,3429.237],"end":[4079.319,3429.237],"width":2.3622,"net":"GND"},{"start":[4079.319,3431.993],"end":[4079.319,3431.993],"width":2.3622,"net":"GND"},{"start":[4079.319,3459.552],"end":[4079.319,3459.552],"width":2.3622,"net":"GND"},{"start":[4079.319,3465.063],"end":[4079.319,3465.063],"width":2.3622,"net":"GND"},{"start":[4082.075,3412.701],"end":[4082.075,3412.701],"width":2.3622,"net":"GND"},{"start":[4082.075,3415.457],"end":[4082.075,3415.457],"width":2.3622,"net":"GND"},{"start":[4082.075,3418.213],"end":[4082.075,3418.213],"width":2.3622,"net":"GND"},{"start":[4082.075,3420.969],"end":[4082.075,3420.969],"width":2.3622,"net":"GND"},{"start":[4082.075,3423.725],"end":[4082.075,3423.725],"width":2.3622,"net":"GND"},{"start":[4082.075,3426.481],"end":[4082.075,3426.481],"width":2.3622,"net":"GND"},{"start":[4082.075,3429.237],"end":[4082.075,3429.237],"width":2.3622,"net":"GND"},{"start":[4082.075,3431.993],"end":[4082.075,3431.993],"width":2.3622,"net":"GND"},{"start":[4082.075,3451.284],"end":[4082.075,3451.284],"width":2.3622,"net":"GND"},{"start":[4082.075,3454.04],"end":[4082.075,3454.04],"width":2.3622,"net":"GND"},{"start":[4082.075,3456.796],"end":[4082.075,3456.796],"width":2.3622,"net":"GND"},{"start":[4082.075,3459.552],"end":[4082.075,3459.552],"width":2.3622,"net":"GND"},{"start":[4082.075,3462.308],"end":[4082.075,3462.308],"width":2.3622,"net":"GND"},{"start":[4082.075,3465.063],"end":[4082.075,3465.063],"width":2.3622,"net":"GND"},{"start":[4082.075,3467.819],"end":[4082.075,3467.819],"width":2.3622,"net":"GND"},{"start":[4082.075,3476.087],"end":[4082.075,3476.087],"width":2.3622,"net":"GND"},{"start":[4084.831,3412.701],"end":[4084.831,3412.701],"width":2.3622,"net":"GND"},{"start":[4084.831,3415.457],"end":[4084.831,3415.457],"width":2.3622,"net":"GND"},{"start":[4084.831,3418.213],"end":[4084.831,3418.213],"width":2.3622,"net":"GND"},{"start":[4084.831,3420.969],"end":[4084.831,3420.969],"width":2.3622,"net":"GND"},{"start":[4084.831,3423.725],"end":[4084.831,3423.725],"width":2.3622,"net":"GND"},{"start":[4084.831,3426.481],"end":[4084.831,3426.481],"width":2.3622,"net":"GND"},{"start":[4084.831,3429.237],"end":[4084.831,3429.237],"width":2.3622,"net":"GND"},{"start":[4084.831,3431.993],"end":[4084.831,3431.993],"width":2.3622,"net":"GND"},{"start":[4084.831,3459.552],"end":[4084.831,3459.552],"width":2.3622,"net":"GND"},{"start":[4084.831,3462.308],"end":[4084.831,3462.308],"width":2.3622,"net":"GND"},{"start":[4084.831,3465.063],"end":[4084.831,3465.063],"width":2.3622,"net":"GND"},{"start":[4084.831,3467.819],"end":[4084.831,3467.819],"width":2.3622,"net":"GND"},{"start":[4084.831,3470.575],"end":[4084.831,3470.575],"width":2.3622,"net":"GND"},{"start":[4084.831,3473.331],"end":[4084.831,3473.331],"width":2.3622,"net":"GND"},{"start":[4084.831,3476.087],"end":[4084.831,3476.087],"width":2.3622,"net":"GND"},{"start":[4084.831,3478.843],"end":[4084.831,3478.843],"width":2.3622,"net":"GND"},{"start":[4087.587,3412.701],"end":[4087.587,3412.701],"width":2.3622,"net":"GND"},{"start":[4087.587,3415.457],"end":[4087.587,3415.457],"width":2.3622,"net":"GND"},{"start":[4087.587,3418.213],"end":[4087.587,3418.213],"width":2.3622,"net":"GND"},{"start":[4087.587,3420.969],"end":[4087.587,3420.969],"width":2.3622,"net":"GND"},{"start":[4087.587,3423.725],"end":[4087.587,3423.725],"width":2.3622,"net":"GND"},{"start":[4087.587,3426.481],"end":[4087.587,3426.481],"width":2.3622,"net":"GND"},{"start":[4087.587,3429.237],"end":[4087.587,3429.237],"width":2.3622,"net":"GND"},{"start":[4087.587,3431.993],"end":[4087.587,3431.993],"width":2.3622,"net":"GND"},{"start":[4087.587,3456.796],"end":[4087.587,3456.796],"width":2.3622,"net":"GND"},{"start":[4087.587,3459.552],"end":[4087.587,3459.552],"width":2.3622,"net":"GND"},{"start":[4087.587,3462.308],"end":[4087.587,3462.308],"width":2.3622,"net":"GND"},{"start":[4087.587,3465.063],"end":[4087.587,3465.063],"width":2.3622,"net":"GND"},{"start":[4087.587,3467.819],"end":[4087.587,3467.819],"width":2.3622,"net":"GND"},{"start":[4087.587,3470.575],"end":[4087.587,3470.575],"width":2.3622,"net":"GND"},{"start":[4087.587,3473.331],"end":[4087.587,3473.331],"width":2.3622,"net":"GND"},{"start":[4087.587,3476.087],"end":[4087.587,3476.087],"width":2.3622,"net":"GND"},{"start":[4090.343,3412.701],"end":[4090.343,3412.701],"width":2.3622,"net":"GND"},{"start":[4090.343,3415.457],"end":[4090.343,3415.457],"width":2.3622,"net":"GND"},{"start":[4090.343,3418.213],"end":[4090.343,3418.213],"width":2.3622,"net":"GND"},{"start":[4090.343,3420.969],"end":[4090.343,3420.969],"width":2.3622,"net":"GND"},{"start":[4090.343,3423.725],"end":[4090.343,3423.725],"width":2.3622,"net":"GND"},{"start":[4090.343,3426.481],"end":[4090.343,3426.481],"width":2.3622,"net":"GND"},{"start":[4090.343,3429.237],"end":[4090.343,3429.237],"width":2.3622,"net":"GND"},{"start":[4090.343,3431.993],"end":[4090.343,3431.993],"width":2.3622,"net":"GND"},{"start":[4090.343,3434.748],"end":[4090.343,3434.748],"width":2.3622,"net":"GND"},{"start":[4090.343,3437.504],"end":[4090.343,3437.504],"width":2.3622,"net":"GND"},{"start":[4090.343,3445.772],"end":[4090.343,3445.772],"width":2.3622,"net":"GND"},{"start":[4090.343,3451.284],"end":[4090.343,3451.284],"width":2.3622,"net":"GND"},{"start":[4090.343,3454.04],"end":[4090.343,3454.04],"width":2.3622,"net":"GND"},{"start":[4090.343,3456.796],"end":[4090.343,3456.796],"width":2.3622,"net":"GND"},{"start":[4090.343,3459.552],"end":[4090.343,3459.552],"width":2.3622,"net":"GND"},{"start":[4090.343,3462.308],"end":[4090.343,3462.308],"width":2.3622,"net":"GND"},{"start":[4090.343,3465.063],"end":[4090.343,3465.063],"width":2.3622,"net":"GND"},{"start":[4090.343,3467.819],"end":[4090.343,3467.819],"width":2.3622,"net":"GND"},{"start":[4090.343,3470.575],"end":[4090.343,3470.575],"width":2.3622,"net":"GND"},{"start":[4090.343,3473.331],"end":[4090.343,3473.331],"width":2.3622,"net":"GND"},{"start":[4093.099,3412.701],"end":[4093.099,3412.701],"width":2.3622,"net":"GND"},{"start":[4093.099,3415.457],"end":[4093.099,3415.457],"width":2.3622,"net":"GND"},{"start":[4093.099,3418.213],"end":[4093.099,3418.213],"width":2.3622,"net":"GND"},{"start":[4093.099,3420.969],"end":[4093.099,3420.969],"width":2.3622,"net":"GND"},{"start":[4093.099,3423.725],"end":[4093.099,3423.725],"width":2.3622,"net":"GND"},{"start":[4093.099,3426.481],"end":[4093.099,3426.481],"width":2.3622,"net":"GND"},{"start":[4093.099,3429.237],"end":[4093.099,3429.237],"width":2.3622,"net":"GND"},{"start":[4093.099,3431.993],"end":[4093.099,3431.993],"width":2.3622,"net":"GND"},{"start":[4093.099,3434.748],"end":[4093.099,3434.748],"width":2.3622,"net":"GND"},{"start":[4093.099,3437.504],"end":[4093.099,3437.504],"width":2.3622,"net":"GND"},{"start":[4093.099,3440.26],"end":[4093.099,3440.26],"width":2.3622,"net":"GND"},{"start":[4093.099,3443.016],"end":[4093.099,3443.016],"width":2.3622,"net":"GND"},{"start":[4093.099,3445.772],"end":[4093.099,3445.772],"width":2.3622,"net":"GND"},{"start":[4093.099,3448.528],"end":[4093.099,3448.528],"width":2.3622,"net":"GND"},{"start":[4093.099,3451.284],"end":[4093.099,3451.284],"width":2.3622,"net":"GND"},{"start":[4093.099,3454.04],"end":[4093.099,3454.04],"width":2.3622,"net":"GND"},{"start":[4093.099,3456.796],"end":[4093.099,3456.796],"width":2.3622,"net":"GND"},{"start":[4093.099,3459.552],"end":[4093.099,3459.552],"width":2.3622,"net":"GND"},{"start":[4093.099,3462.308],"end":[4093.099,3462.308],"width":2.3622,"net":"GND"},{"start":[4093.099,3465.063],"end":[4093.099,3465.063],"width":2.3622,"net":"GND"},{"start":[4093.099,3467.819],"end":[4093.099,3467.819],"width":2.3622,"net":"GND"},{"start":[4093.099,3470.575],"end":[4093.099,3470.575],"width":2.3622,"net":"GND"},{"start":[4093.099,3473.331],"end":[4093.099,3473.331],"width":2.3622,"net":"GND"}],"B":[{"type":"polyline","net":"C1_1","start":[0,0],"end":[0,0],"width":0.7874,"svgpath":"M4066.063,3464.4055 4073.1496,3464.4055 4075.1181,3462.437"},{"start":[4066.063,3464.406],"end":[4066.063,3464.406],"width":2.3622,"net":"C1_1"},{"start":[4075.118,3462.437],"end":[4075.118,3462.437],"width":2.3622,"net":"C1_1"},{"start":[4031.811,3428.973],"end":[4031.811,3428.973],"width":2.3622,"net":"GND"},{"start":[4034.567,3428.973],"end":[4034.567,3428.973],"width":2.3622,"net":"GND"},{"start":[4037.323,3428.973],"end":[4037.323,3428.973],"width":2.3622,"net":"GND"},{"start":[4040.079,3428.973],"end":[4040.079,3428.973],"width":2.3622,"net":"GND"},{"start":[4042.835,3428.973],"end":[4042.835,3428.973],"width":2.3622,"net":"GND"},{"start":[4045.591,3428.973],"end":[4045.591,3428.973],"width":2.3622,"net":"GND"},{"start":[4048.346,3428.973],"end":[4048.346,3428.973],"width":2.3622,"net":"GND"},{"start":[4048.346,3431.728],"end":[4048.346,3431.728],"width":2.3622,"net":"GND"},{"start":[4045.591,3431.728],"end":[4045.591,3431.728],"width":2.3622,"net":"GND"},{"start":[4042.835,3431.728],"end":[4042.835,3431.728],"width":2.3622,"net":"GND"},{"start":[4040.079,3431.728],"end":[4040.079,3431.728],"width":2.3622,"net":"GND"},{"start":[4037.323,3431.728],"end":[4037.323,3431.728],"width":2.3622,"net":"GND"},{"start":[4034.567,3431.728],"end":[4034.567,3431.728],"width":2.3622,"net":"GND"},{"start":[4031.811,3431.728],"end":[4031.811,3431.728],"width":2.3622,"net":"GND"},{"start":[4041.654,3434.484],"end":[4041.654,3434.484],"width":2.3622,"net":"GND"},{"start":[4044.41,3434.484],"end":[4044.41,3434.484],"width":2.3622,"net":"GND"},{"start":[4047.165,3434.484],"end":[4047.165,3434.484],"width":2.3622,"net":"GND"},{"start":[4044.41,3442.358],"end":[4044.41,3442.358],"width":2.3622,"net":"GND"},{"start":[4047.165,3442.358],"end":[4047.165,3442.358],"width":2.3622,"net":"GND"},{"start":[4043.622,3445.114],"end":[4043.622,3445.114],"width":2.3622,"net":"GND"},{"start":[4046.378,3445.114],"end":[4046.378,3445.114],"width":2.3622,"net":"GND"},{"start":[4075.512,3437.634],"end":[4075.512,3437.634],"width":2.3622,"net":"GND"},{"start":[4072.756,3437.634],"end":[4072.756,3437.634],"width":2.3622,"net":"GND"},{"start":[4057.008,3437.24],"end":[4057.008,3437.24],"width":2.3622,"net":"GND"},{"start":[4059.764,3437.24],"end":[4059.764,3437.24],"width":2.3622,"net":"GND"},{"start":[4062.52,3437.24],"end":[4062.52,3437.24],"width":2.3622,"net":"GND"},{"start":[4057.008,3439.996],"end":[4057.008,3439.996],"width":2.3622,"net":"GND"},{"start":[4059.764,3439.996],"end":[4059.764,3439.996],"width":2.3622,"net":"GND"},{"start":[4062.52,3439.996],"end":[4062.52,3439.996],"width":2.3622,"net":"GND"},{"start":[4057.008,3442.752],"end":[4057.008,3442.752],"width":2.3622,"net":"GND"},{"start":[4059.764,3442.752],"end":[4059.764,3442.752],"width":2.3622,"net":"GND"},{"start":[4062.52,3442.752],"end":[4062.52,3442.752],"width":2.3622,"net":"GND"},{"start":[4032.863,3457.977],"end":[4032.863,3457.977],"width":2.3622,"net":"GND"},{"start":[4035.619,3457.977],"end":[4035.619,3457.977],"width":2.3622,"net":"GND"},{"start":[4038.374,3457.977],"end":[4038.374,3457.977],"width":2.3622,"net":"GND"},{"start":[4041.13,3457.977],"end":[4041.13,3457.977],"width":2.3622,"net":"GND"},{"start":[4041.13,3460.733],"end":[4041.13,3460.733],"width":2.3622,"net":"GND"},{"start":[4041.13,3463.489],"end":[4041.13,3463.489],"width":2.3622,"net":"GND"},{"start":[4038.374,3463.489],"end":[4038.374,3463.489],"width":2.3622,"net":"GND"},{"start":[4038.374,3460.733],"end":[4038.374,3460.733],"width":2.3622,"net":"GND"},{"start":[4035.619,3460.733],"end":[4035.619,3460.733],"width":2.3622,"net":"GND"},{"start":[4035.619,3463.489],"end":[4035.619,3463.489],"width":2.3622,"net":"GND"},{"start":[4032.863,3463.489],"end":[4032.863,3463.489],"width":2.3622,"net":"GND"},{"start":[4032.863,3460.733],"end":[4032.863,3460.733],"width":2.3622,"net":"GND"},{"start":[4031.024,3467.161],"end":[4031.024,3467.161],"width":2.3622,"net":"GND"},{"start":[4033.78,3467.161],"end":[4033.78,3467.161],"width":2.3622,"net":"GND"},{"start":[4033.78,3469.917],"end":[4033.78,3469.917],"width":2.3622,"net":"GND"},{"start":[4031.024,3472.673],"end":[4031.024,3472.673],"width":2.3622,"net":"GND"},{"start":[4033.78,3472.673],"end":[4033.78,3472.673],"width":2.3622,"net":"GND"},{"start":[4031.024,3469.917],"end":[4031.024,3469.917],"width":2.3622,"net":"GND"},{"start":[4032.469,3412.701],"end":[4032.469,3412.701],"width":2.3622,"net":"GND"},{"start":[4032.469,3415.457],"end":[4032.469,3415.457],"width":2.3622,"net":"GND"},{"start":[4035.225,3412.701],"end":[4035.225,3412.701],"width":2.3622,"net":"GND"},{"start":[4035.225,3415.457],"end":[4035.225,3415.457],"width":2.3622,"net":"GND"},{"start":[4037.981,3412.701],"end":[4037.981,3412.701],"width":2.3622,"net":"GND"},{"start":[4040.737,3412.701],"end":[4040.737,3412.701],"width":2.3622,"net":"GND"},{"start":[4043.493,3412.701],"end":[4043.493,3412.701],"width":2.3622,"net":"GND"},{"start":[4054.516,3412.701],"end":[4054.516,3412.701],"width":2.3622,"net":"GND"},{"start":[4057.272,3412.701],"end":[4057.272,3412.701],"width":2.3622,"net":"GND"},{"start":[4060.028,3412.701],"end":[4060.028,3412.701],"width":2.3622,"net":"GND"},{"start":[4060.028,3476.087],"end":[4060.028,3476.087],"width":2.3622,"net":"GND"},{"start":[4062.784,3412.701],"end":[4062.784,3412.701],"width":2.3622,"net":"GND"},{"start":[4065.54,3412.701],"end":[4065.54,3412.701],"width":2.3622,"net":"GND"},{"start":[4068.296,3412.701],"end":[4068.296,3412.701],"width":2.3622,"net":"GND"},{"start":[4068.296,3415.457],"end":[4068.296,3415.457],"width":2.3622,"net":"GND"},{"start":[4068.296,3418.213],"end":[4068.296,3418.213],"width":2.3622,"net":"GND"},{"start":[4071.052,3412.701],"end":[4071.052,3412.701],"width":2.3622,"net":"GND"},{"start":[4071.052,3415.457],"end":[4071.052,3415.457],"width":2.3622,"net":"GND"},{"start":[4071.052,3418.213],"end":[4071.052,3418.213],"width":2.3622,"net":"GND"},{"start":[4071.052,3420.969],"end":[4071.052,3420.969],"width":2.3622,"net":"GND"},{"start":[4071.052,3423.725],"end":[4071.052,3423.725],"width":2.3622,"net":"GND"},{"start":[4071.052,3426.481],"end":[4071.052,3426.481],"width":2.3622,"net":"GND"},{"start":[4071.052,3429.237],"end":[4071.052,3429.237],"width":2.3622,"net":"GND"},{"start":[4071.052,3448.528],"end":[4071.052,3448.528],"width":2.3622,"net":"GND"},{"start":[4071.052,3451.284],"end":[4071.052,3451.284],"width":2.3622,"net":"GND"},{"start":[4073.808,3412.701],"end":[4073.808,3412.701],"width":2.3622,"net":"GND"},{"start":[4073.808,3415.457],"end":[4073.808,3415.457],"width":2.3622,"net":"GND"},{"start":[4073.808,3418.213],"end":[4073.808,3418.213],"width":2.3622,"net":"GND"},{"start":[4073.808,3420.969],"end":[4073.808,3420.969],"width":2.3622,"net":"GND"},{"start":[4073.808,3423.725],"end":[4073.808,3423.725],"width":2.3622,"net":"GND"},{"start":[4073.808,3426.481],"end":[4073.808,3426.481],"width":2.3622,"net":"GND"},{"start":[4073.808,3429.237],"end":[4073.808,3429.237],"width":2.3622,"net":"GND"},{"start":[4073.808,3431.993],"end":[4073.808,3431.993],"width":2.3622,"net":"GND"},{"start":[4073.808,3434.748],"end":[4073.808,3434.748],"width":2.3622,"net":"GND"},{"start":[4073.808,3445.772],"end":[4073.808,3445.772],"width":2.3622,"net":"GND"},{"start":[4073.808,3448.528],"end":[4073.808,3448.528],"width":2.3622,"net":"GND"},{"start":[4073.808,3451.284],"end":[4073.808,3451.284],"width":2.3622,"net":"GND"},{"start":[4076.563,3412.701],"end":[4076.563,3412.701],"width":2.3622,"net":"GND"},{"start":[4076.563,3415.457],"end":[4076.563,3415.457],"width":2.3622,"net":"GND"},{"start":[4076.563,3418.213],"end":[4076.563,3418.213],"width":2.3622,"net":"GND"},{"start":[4076.563,3420.969],"end":[4076.563,3420.969],"width":2.3622,"net":"GND"},{"start":[4076.563,3423.725],"end":[4076.563,3423.725],"width":2.3622,"net":"GND"},{"start":[4076.563,3426.481],"end":[4076.563,3426.481],"width":2.3622,"net":"GND"},{"start":[4076.563,3429.237],"end":[4076.563,3429.237],"width":2.3622,"net":"GND"},{"start":[4076.563,3431.993],"end":[4076.563,3431.993],"width":2.3622,"net":"GND"},{"start":[4076.563,3434.748],"end":[4076.563,3434.748],"width":2.3622,"net":"GND"},{"start":[4076.563,3445.772],"end":[4076.563,3445.772],"width":2.3622,"net":"GND"},{"start":[4076.563,3451.284],"end":[4076.563,3451.284],"width":2.3622,"net":"GND"},{"start":[4076.563,3454.04],"end":[4076.563,3454.04],"width":2.3622,"net":"GND"},{"start":[4076.563,3456.796],"end":[4076.563,3456.796],"width":2.3622,"net":"GND"},{"start":[4079.319,3412.701],"end":[4079.319,3412.701],"width":2.3622,"net":"GND"},{"start":[4079.319,3415.457],"end":[4079.319,3415.457],"width":2.3622,"net":"GND"},{"start":[4079.319,3418.213],"end":[4079.319,3418.213],"width":2.3622,"net":"GND"},{"start":[4079.319,3420.969],"end":[4079.319,3420.969],"width":2.3622,"net":"GND"},{"start":[4079.319,3423.725],"end":[4079.319,3423.725],"width":2.3622,"net":"GND"},{"start":[4079.319,3426.481],"end":[4079.319,3426.481],"width":2.3622,"net":"GND"},{"start":[4079.319,3429.237],"end":[4079.319,3429.237],"width":2.3622,"net":"GND"},{"start":[4079.319,3431.993],"end":[4079.319,3431.993],"width":2.3622,"net":"GND"},{"start":[4079.319,3459.552],"end":[4079.319,3459.552],"width":2.3622,"net":"GND"},{"start":[4079.319,3465.063],"end":[4079.319,3465.063],"width":2.3622,"net":"GND"},{"start":[4082.075,3412.701],"end":[4082.075,3412.701],"width":2.3622,"net":"GND"},{"start":[4082.075,3415.457],"end":[4082.075,3415.457],"width":2.3622,"net":"GND"},{"start":[4082.075,3418.213],"end":[4082.075,3418.213],"width":2.3622,"net":"GND"},{"start":[4082.075,3420.969],"end":[4082.075,3420.969],"width":2.3622,"net":"GND"},{"start":[4082.075,3423.725],"end":[4082.075,3423.725],"width":2.3622,"net":"GND"},{"start":[4082.075,3426.481],"end":[4082.075,3426.481],"width":2.3622,"net":"GND"},{"start":[4082.075,3429.237],"end":[4082.075,3429.237],"width":2.3622,"net":"GND"},{"start":[4082.075,3431.993],"end":[4082.075,3431.993],"width":2.3622,"net":"GND"},{"start":[4082.075,3451.284],"end":[4082.075,3451.284],"width":2.3622,"net":"GND"},{"start":[4082.075,3454.04],"end":[4082.075,3454.04],"width":2.3622,"net":"GND"},{"start":[4082.075,3456.796],"end":[4082.075,3456.796],"width":2.3622,"net":"GND"},{"start":[4082.075,3459.552],"end":[4082.075,3459.552],"width":2.3622,"net":"GND"},{"start":[4082.075,3462.308],"end":[4082.075,3462.308],"width":2.3622,"net":"GND"},{"start":[4082.075,3465.063],"end":[4082.075,3465.063],"width":2.3622,"net":"GND"},{"start":[4082.075,3467.819],"end":[4082.075,3467.819],"width":2.3622,"net":"GND"},{"start":[4082.075,3476.087],"end":[4082.075,3476.087],"width":2.3622,"net":"GND"},{"start":[4084.831,3412.701],"end":[4084.831,3412.701],"width":2.3622,"net":"GND"},{"start":[4084.831,3415.457],"end":[4084.831,3415.457],"width":2.3622,"net":"GND"},{"start":[4084.831,3418.213],"end":[4084.831,3418.213],"width":2.3622,"net":"GND"},{"start":[4084.831,3420.969],"end":[4084.831,3420.969],"width":2.3622,"net":"GND"},{"start":[4084.831,3423.725],"end":[4084.831,3423.725],"width":2.3622,"net":"GND"},{"start":[4084.831,3426.481],"end":[4084.831,3426.481],"width":2.3622,"net":"GND"},{"start":[4084.831,3429.237],"end":[4084.831,3429.237],"width":2.3622,"net":"GND"},{"start":[4084.831,3431.993],"end":[4084.831,3431.993],"width":2.3622,"net":"GND"},{"start":[4084.831,3459.552],"end":[4084.831,3459.552],"width":2.3622,"net":"GND"},{"start":[4084.831,3462.308],"end":[4084.831,3462.308],"width":2.3622,"net":"GND"},{"start":[4084.831,3465.063],"end":[4084.831,3465.063],"width":2.3622,"net":"GND"},{"start":[4084.831,3467.819],"end":[4084.831,3467.819],"width":2.3622,"net":"GND"},{"start":[4084.831,3470.575],"end":[4084.831,3470.575],"width":2.3622,"net":"GND"},{"start":[4084.831,3473.331],"end":[4084.831,3473.331],"width":2.3622,"net":"GND"},{"start":[4084.831,3476.087],"end":[4084.831,3476.087],"width":2.3622,"net":"GND"},{"start":[4084.831,3478.843],"end":[4084.831,3478.843],"width":2.3622,"net":"GND"},{"start":[4087.587,3412.701],"end":[4087.587,3412.701],"width":2.3622,"net":"GND"},{"start":[4087.587,3415.457],"end":[4087.587,3415.457],"width":2.3622,"net":"GND"},{"start":[4087.587,3418.213],"end":[4087.587,3418.213],"width":2.3622,"net":"GND"},{"start":[4087.587,3420.969],"end":[4087.587,3420.969],"width":2.3622,"net":"GND"},{"start":[4087.587,3423.725],"end":[4087.587,3423.725],"width":2.3622,"net":"GND"},{"start":[4087.587,3426.481],"end":[4087.587,3426.481],"width":2.3622,"net":"GND"},{"start":[4087.587,3429.237],"end":[4087.587,3429.237],"width":2.3622,"net":"GND"},{"start":[4087.587,3431.993],"end":[4087.587,3431.993],"width":2.3622,"net":"GND"},{"start":[4087.587,3456.796],"end":[4087.587,3456.796],"width":2.3622,"net":"GND"},{"start":[4087.587,3459.552],"end":[4087.587,3459.552],"width":2.3622,"net":"GND"},{"start":[4087.587,3462.308],"end":[4087.587,3462.308],"width":2.3622,"net":"GND"},{"start":[4087.587,3465.063],"end":[4087.587,3465.063],"width":2.3622,"net":"GND"},{"start":[4087.587,3467.819],"end":[4087.587,3467.819],"width":2.3622,"net":"GND"},{"start":[4087.587,3470.575],"end":[4087.587,3470.575],"width":2.3622,"net":"GND"},{"start":[4087.587,3473.331],"end":[4087.587,3473.331],"width":2.3622,"net":"GND"},{"start":[4087.587,3476.087],"end":[4087.587,3476.087],"width":2.3622,"net":"GND"},{"start":[4090.343,3412.701],"end":[4090.343,3412.701],"width":2.3622,"net":"GND"},{"start":[4090.343,3415.457],"end":[4090.343,3415.457],"width":2.3622,"net":"GND"},{"start":[4090.343,3418.213],"end":[4090.343,3418.213],"width":2.3622,"net":"GND"},{"start":[4090.343,3420.969],"end":[4090.343,3420.969],"width":2.3622,"net":"GND"},{"start":[4090.343,3423.725],"end":[4090.343,3423.725],"width":2.3622,"net":"GND"},{"start":[4090.343,3426.481],"end":[4090.343,3426.481],"width":2.3622,"net":"GND"},{"start":[4090.343,3429.237],"end":[4090.343,3429.237],"width":2.3622,"net":"GND"},{"start":[4090.343,3431.993],"end":[4090.343,3431.993],"width":2.3622,"net":"GND"},{"start":[4090.343,3434.748],"end":[4090.343,3434.748],"width":2.3622,"net":"GND"},{"start":[4090.343,3437.504],"end":[4090.343,3437.504],"width":2.3622,"net":"GND"},{"start":[4090.343,3445.772],"end":[4090.343,3445.772],"width":2.3622,"net":"GND"},{"start":[4090.343,3451.284],"end":[4090.343,3451.284],"width":2.3622,"net":"GND"},{"start":[4090.343,3454.04],"end":[4090.343,3454.04],"width":2.3622,"net":"GND"},{"start":[4090.343,3456.796],"end":[4090.343,3456.796],"width":2.3622,"net":"GND"},{"start":[4090.343,3459.552],"end":[4090.343,3459.552],"width":2.3622,"net":"GND"},{"start":[4090.343,3462.308],"end":[4090.343,3462.308],"width":2.3622,"net":"GND"},{"start":[4090.343,3465.063],"end":[4090.343,3465.063],"width":2.3622,"net":"GND"},{"start":[4090.343,3467.819],"end":[4090.343,3467.819],"width":2.3622,"net":"GND"},{"start":[4090.343,3470.575],"end":[4090.343,3470.575],"width":2.3622,"net":"GND"},{"start":[4090.343,3473.331],"end":[4090.343,3473.331],"width":2.3622,"net":"GND"},{"start":[4093.099,3412.701],"end":[4093.099,3412.701],"width":2.3622,"net":"GND"},{"start":[4093.099,3415.457],"end":[4093.099,3415.457],"width":2.3622,"net":"GND"},{"start":[4093.099,3418.213],"end":[4093.099,3418.213],"width":2.3622,"net":"GND"},{"start":[4093.099,3420.969],"end":[4093.099,3420.969],"width":2.3622,"net":"GND"},{"start":[4093.099,3423.725],"end":[4093.099,3423.725],"width":2.3622,"net":"GND"},{"start":[4093.099,3426.481],"end":[4093.099,3426.481],"width":2.3622,"net":"GND"},{"start":[4093.099,3429.237],"end":[4093.099,3429.237],"width":2.3622,"net":"GND"},{"start":[4093.099,3431.993],"end":[4093.099,3431.993],"width":2.3622,"net":"GND"},{"start":[4093.099,3434.748],"end":[4093.099,3434.748],"width":2.3622,"net":"GND"},{"start":[4093.099,3437.504],"end":[4093.099,3437.504],"width":2.3622,"net":"GND"},{"start":[4093.099,3440.26],"end":[4093.099,3440.26],"width":2.3622,"net":"GND"},{"start":[4093.099,3443.016],"end":[4093.099,3443.016],"width":2.3622,"net":"GND"},{"start":[4093.099,3445.772],"end":[4093.099,3445.772],"width":2.3622,"net":"GND"},{"start":[4093.099,3448.528],"end":[4093.099,3448.528],"width":2.3622,"net":"GND"},{"start":[4093.099,3451.284],"end":[4093.099,3451.284],"width":2.3622,"net":"GND"},{"start":[4093.099,3454.04],"end":[4093.099,3454.04],"width":2.3622,"net":"GND"},{"start":[4093.099,3456.796],"end":[4093.099,3456.796],"width":2.3622,"net":"GND"},{"start":[4093.099,3459.552],"end":[4093.099,3459.552],"width":2.3622,"net":"GND"},{"start":[4093.099,3462.308],"end":[4093.099,3462.308],"width":2.3622,"net":"GND"},{"start":[4093.099,3465.063],"end":[4093.099,3465.063],"width":2.3622,"net":"GND"},{"start":[4093.099,3467.819],"end":[4093.099,3467.819],"width":2.3622,"net":"GND"},{"start":[4093.099,3470.575],"end":[4093.099,3470.575],"width":2.3622,"net":"GND"},{"start":[4093.099,3473.331],"end":[4093.099,3473.331],"width":2.3622,"net":"GND"}]},"zones":{"F":[],"B":[]},"pads":[],"nets":["C1_1","MIXERP","OPOUT2","R2_2","C15_2","MIXERN","C17_1","U1_9","U1_21","GND","VCC12","VCC33"],"bom":{"both":[[3,"10uF","C0402",[["C1",0],["C9",2],["C12",3]],["SAMSUNG","CL05A106MQ5NUNC","LCSC","C15525"]],[1,"100nF","C0402_NEW",[["C7",1]],["SAMSUNG","CL05B104KO5NNNC","LCSC","C1525"]],[2,"1nF","C0402",[["C15",4],["C17",5]],["FH","0402B102K500NT","LCSC","C1523"]],[3,"10k","R0402",[["R2",6],["R8",8],["R10",9]],["UniOhm","0402WGF1002TCE","LCSC","C25744"]],[1,"5.1k","R0402",[["R3",7]],["UniOhm","0402WGF5101TCE","LCSC","C25905"]],[1,"X5521FV-2X04-C30D743-0743","HDR-TH_8P-P2.54-V-F-R2-C4-S2.54-3",[["H1",10]],["XKB Connectivity()","X5521FV-2X04-C30D743-0743","LCSC","C2764577"]],[1,"XBR816C","QFN24_L4.0-W4.0-P0.5-TL-EP2.45",[["U1",11]],["phosense","XBR816C","LCSC","XBR816C"]],[1,"ME6216A12M3G","SOT-23-3_L2.9-W1.6-P1.90-LS2.8-BR",[["U2",12]],["Nanjing Micro One Elec","ME6216A12M3G","LCSC","C236663"]],[2,"KH-IPEX4-2020","IPEX4-SMD_4P-L1.8-W1.7-LS2.0-L_KH-IPEX4-2020",[["RF1",13],["RF2",14]],["Shenzhen Kinghelm Elec","KH-IPEX4-2020","LCSC","C530666"]]],"F":[[3,"10uF","C0402",[["C1",0],["C9",2],["C12",3]],["SAMSUNG","CL05A106MQ5NUNC","LCSC","C15525"]],[1,"100nF","C0402_NEW",[["C7",1]],["SAMSUNG","CL05B104KO5NNNC","LCSC","C1525"]],[2,"1nF","C0402",[["C15",4],["C17",5]],["FH","0402B102K500NT","LCSC","C1523"]],[3,"10k","R0402",[["R2",6],["R8",8],["R10",9]],["UniOhm","0402WGF1002TCE","LCSC","C25744"]],[1,"5.1k","R0402",[["R3",7]],["UniOhm","0402WGF5101TCE","LCSC","C25905"]],[1,"XBR816C","QFN24_L4.0-W4.0-P0.5-TL-EP2.45",[["U1",11]],["phosense","XBR816C","LCSC","XBR816C"]],[1,"ME6216A12M3G","SOT-23-3_L2.9-W1.6-P1.90-LS2.8-BR",[["U2",12]],["Nanjing Micro One Elec","ME6216A12M3G","LCSC","C236663"]],[2,"KH-IPEX4-2020","IPEX4-SMD_4P-L1.8-W1.7-LS2.0-L_KH-IPEX4-2020",[["RF1",13],["RF2",14]],["Shenzhen Kinghelm Elec","KH-IPEX4-2020","LCSC","C530666"]]],"B":[[1,"X5521FV-2X04-C30D743-0743","HDR-TH_8P-P2.54-V-F-R2-C4-S2.54-3",[["H1",10]],["XKB Connectivity()","X5521FV-2X04-C30D743-0743","LCSC","C2764577"]]],"skipped":[],"customColumns":["BOM_Manufacturer","BOM_Manufacturer Part","BOM_Supplier","BOM_Supplier Part"]}};
///////////////////////////////////////////////

///////////////////////////////////////////////
/* Utility functions */

var storagePrefix = 'ibom__' + pcbdata.metadata.title + '__' +
  pcbdata.metadata.revision + '__#';

function buildKeyForLocalStorageDict() {  
  return storagePrefix;
}

var storage;
var _isLocalStorageUsed = false;

function initStorage(key) {
  try {
    window.localStorage.getItem("blank");
    storage = window.localStorage;    
    _isLocalStorageUsed = true;
  } catch (e) {
    // localStorage not available
  }
  if (!storage) {
    try {
      window.sessionStorage.getItem("blank");
      storage = window.sessionStorage;      
    } catch (e) {
      // sessionStorage also not available
    }
  }
}



function readStorage(key) {
  if(!storage) {
    return null;
  }

  if(!_isLocalStorageUsed) {    
    return storage.getItem(storagePrefix + key);
  }

  try {
    var dictKey = buildKeyForLocalStorageDict();
    var obj = JSON.parse(storage.getItem(dictKey));    
    if(!obj || !obj.hasOwnProperty(key)) {
      return null;
    }

    return JSON.parse(storage.getItem(dictKey))[key];
  } catch(e) {
    console.log('[ibom]: Unable to obtain a value from local storage!');
    console.log(e);
  }
  
  // Original implementation
  // return storage.getItem(storagePrefix + key);
}


function writeStorage(key, value) {
  if(!storage) {
    return;
  }

  if(!_isLocalStorageUsed) {
    storage.setItem(storagePrefix + key, value);
    return;
  }

  try {
    var dictKey = buildKeyForLocalStorageDict();
    if(!storage.getItem(dictKey)) {
      storage.setItem(dictKey,JSON.stringify({
        _storagePrefix: storagePrefix
      }));
    }

    var obj = JSON.parse(storage.getItem(dictKey));
    obj[key] = value;
    storage.setItem(dictKey,JSON.stringify(obj));            
  } catch(e) {
    console.log('[ibom]: Unable to write key to local storage!');
    console.log(e);
  }
  
  // Original implementation
  // storage.setItem(storagePrefix + key, value);
}

function fancyDblClickHandler(el, onsingle, ondouble) {
  return function() {
    if (el.getAttribute("data-dblclick") == null) {
      el.setAttribute("data-dblclick", 1);
      setTimeout(function() {
        if (el.getAttribute("data-dblclick") == 1) {
          onsingle();
        }
        el.removeAttribute("data-dblclick");
      }, 200);
    } else {
      el.removeAttribute("data-dblclick");
      ondouble();
    }
  }
}

function smoothScrollToRow(rowid) {
  document.getElementById(rowid).scrollIntoView({
    behavior: "smooth",
    block: "center",
    inline: "nearest"
  });
}

function focusInputField(input) {
  input.scrollIntoView(false);
  input.focus();
  input.select();
}

function copyToClipboard() {
  var text = '';
  for (var node of bomhead.childNodes[0].childNodes) {
    if (node.firstChild) {
      text = text + node.firstChild.nodeValue;
    }
    if (node != bomhead.childNodes[0].lastChild) {
      text += '\t';
    }
  }
  text += '\n';
  for (var row of bombody.childNodes) {
    for (var cell of row.childNodes) {
      for (var node of cell.childNodes) {
        if (node.nodeName == "INPUT") {
          if (node.checked) {
            text = text + '';
          }
        } else if (node.nodeName == "MARK") {
          text = text + node.firstChild.nodeValue;
        } else {
          text = text + node.nodeValue;
        }
      }
      if (cell != row.lastChild) {
        text += '\t';
      }
    }
    text += '\n';
  }
  var textArea = document.createElement("textarea");
  textArea.classList.add('clipboard-temp');
  textArea.value = text;

  document.body.appendChild(textArea);
  textArea.focus();
  textArea.select();

  try {
    if (document.execCommand('copy')) {
      console.log('Bom copied to clipboard.');
    }
  } catch (err) {
    console.log('Can not copy to clipboard.');
  }

  document.body.removeChild(textArea);
}

function removeGutterNode(node) {
  for (var i = 0; i < node.childNodes.length; i++) {
    if (node.childNodes[i].classList &&
      node.childNodes[i].classList.contains("gutter")) {
      node.removeChild(node.childNodes[i]);
      break;
    }
  }
}

function cleanGutters() {
  removeGutterNode(document.getElementById("bot"));
  removeGutterNode(document.getElementById("canvasdiv"));
}

var units = {
  prefixes: {
    giga: ["G", "g", "giga", "Giga", "GIGA"],
    mega: ["M", "mega", "Mega", "MEGA"],
    kilo: ["K", "k", "kilo", "Kilo", "KILO"],
    milli: ["m", "milli", "Milli", "MILLI"],
    micro: ["U", "u", "micro", "Micro", "MICRO", "", ""], // different utf8 
    nano: ["N", "n", "nano", "Nano", "NANO"],
    pico: ["P", "p", "pico", "Pico", "PICO"],
  },
  unitsShort: ["R", "r", "", "F", "f", "H", "h"],
  unitsLong: [
    "OHM", "Ohm", "ohm", "ohms",
    "FARAD", "Farad", "farad",
    "HENRY", "Henry", "henry"
  ],
  getMultiplier: function(s) {
    if (this.prefixes.giga.includes(s)) return 1e9;
    if (this.prefixes.mega.includes(s)) return 1e6;
    if (this.prefixes.kilo.includes(s)) return 1e3;
    if (this.prefixes.milli.includes(s)) return 1e-3;
    if (this.prefixes.micro.includes(s)) return 1e-6;
    if (this.prefixes.nano.includes(s)) return 1e-9;
    if (this.prefixes.pico.includes(s)) return 1e-12;
    return 1;
  },
  valueRegex: null,
}

function initUtils() {
  var allPrefixes = units.prefixes.giga
                    .concat(units.prefixes.mega)
                    .concat(units.prefixes.kilo)
                    .concat(units.prefixes.milli)
                    .concat(units.prefixes.micro)
                    .concat(units.prefixes.nano)
                    .concat(units.prefixes.pico);
  var allUnits = units.unitsShort.concat(units.unitsLong);
  units.valueRegex = new RegExp("^([0-9\.]+)" +
                         "\\s*(" + allPrefixes.join("|") + ")?" +
                         "(" + allUnits.join("|") + ")?" +
                         "(\\b.*)?$", "");
  units.valueAltRegex = new RegExp("^([0-9]*)" +
                         "(" + units.unitsShort.join("|") + ")?" +
                         "([GgMmKkUuNnPp])?" +
                         "([0-9]*)" +
                         "(\\b.*)?$", "");
  for (var bom_type of ["both", "F", "B"]) {
    for (var row of pcbdata.bom[bom_type]) {
      row.push(parseValue(row[1], row[3][0][0]));
    }
  }
}

function parseValue(val, ref) {
  var inferUnit = (unit, ref) => {
    if (unit) {
      unit = unit.toLowerCase();
      if (unit == '' || unit == "ohm" || unit == "ohms") {
        unit = 'r';
      }
      unit = unit[0];
    } else {
      ref = /^([a-z]+)\d+$/i.exec(ref);
      if (ref) {
        ref = ref[1].toLowerCase();
        if (ref == "c") unit = 'f';
        else if (ref == "l") unit = 'h';
        else if (ref == "r" || ref == "rv") unit = 'r';
        else unit = null;
      }
    }
    return unit;
  };
  val = val.replace(/,/g, "");
  var match = units.valueRegex.exec(val);
  var unit;
  if (match) {
    val = parseFloat(match[1]);
    if (match[2]) {
      val = val * units.getMultiplier(match[2]);
    }
    unit = inferUnit(match[3], ref);
    if (!unit) return null;
    else return {
      val: val,
      unit: unit,
      extra: match[4],
    }
  }
  match = units.valueAltRegex.exec(val);
  if (match && (match[1] || match[4])) {
    val = parseFloat(match[1] + "." + match[4]);
    if (match[3]) {
      val = val * units.getMultiplier(match[3]);
    }
    unit = inferUnit(match[2], ref);
    if (!unit) return null;
    else return {
      val: val,
      unit: unit,
      extra: match[5],
    }
  }
  return null;
}

function valueCompare(a, b, stra, strb) {
  if (a === null && b === null) {
    // Failed to parse both values, compare them as strings.
    if (stra != strb) return stra > strb ? 1 : -1;
    else return 0;
  } else if (a === null) {
    return 1;
  } else if (b === null) {
    return -1;
  } else {
    if (a.unit != b.unit) return a.unit > b.unit ? 1 : -1;
    else if (a.val != b.val) return a.val > b.val ? 1 : -1;
    else if (a.extra != b.extra) return a.extra > b.extra ? 1 : -1;
    else return 0;
  }
}

function validateSaveImgDimension(element) {
  var valid = false;
  var intValue = 0;
  if (/^[1-9]\d*$/.test(element.value)) {
    intValue = parseInt(element.value);
    if (intValue <= 16000) {
      valid = true;
    }
  }
  if (valid) {
    element.classList.remove("invalid");
  } else {
    element.classList.add("invalid");
  }
  return intValue;
}

function saveImage(layer) {
  var width = validateSaveImgDimension(document.getElementById("render-save-width"));
  var height = validateSaveImgDimension(document.getElementById("render-save-height"));
  var bgcolor = null;
  if (!document.getElementById("render-save-transparent").checked) {
    var style = getComputedStyle(topmostdiv);
    bgcolor = style.getPropertyValue("background-color");
  }
  if (!width || !height) return;

  // Prepare image
  var canvas = document.createElement("canvas");
  var layerdict = {
    transform: {
      x: 0,
      y: 0,
      s: 1,
      panx: 0,
      pany: 0,
      zoom: 1,
    },
    bg: canvas,
    fab: canvas,
    silk: canvas,
    highlight: canvas,
    layer: layer,
  }
  // Do the rendering
  recalcLayerScale(layerdict, width, height);
  prepareLayer(layerdict);
  clearCanvas(canvas, bgcolor);
  drawBackground(layerdict, false);
  drawHighlightsOnLayer(layerdict, false);

  // Save image
  var imgdata = canvas.toDataURL("image/png");

  var filename = pcbdata.metadata.title;
  if (pcbdata.metadata.revision) {
    filename += `.${pcbdata.metadata.revision}`;
  }
  filename += `.${layer}.png`;
  saveFile(filename, dataURLtoBlob(imgdata));
}

function saveSettings() {
  var data = {
    type: "InteractiveHtmlBom settings",
    version: 1,
    pcbmetadata: pcbdata.metadata,
    settings: settings,
  }
  var blob = new Blob([JSON.stringify(data, null, 4)], {type: "application/json"});
  saveFile(`${pcbdata.metadata.title}.settings.json`, blob);
}

function loadSettings() {
  var input = document.createElement("input");
  input.type = "file";
  input.accept = ".settings.json";
  input.onchange = function(e) {
    var file = e.target.files[0];
    var reader = new FileReader();
    reader.onload = readerEvent => {
      var content = readerEvent.target.result;
      var newSettings;
      try {
        newSettings = JSON.parse(content);
      } catch(e) {
        alert("Selected file is not InteractiveHtmlBom settings file.");
        return;
      }
      if (newSettings.type != "InteractiveHtmlBom settings") {
        alert("Selected file is not InteractiveHtmlBom settings file.");
        return;
      }
      var metadataMatches = newSettings.hasOwnProperty("pcbmetadata");
      if (metadataMatches) {
        for (var k in pcbdata.metadata) {
          if (!newSettings.pcbmetadata.hasOwnProperty(k) || newSettings.pcbmetadata[k] != pcbdata.metadata[k]) {
            metadataMatches = false;
          }
        }
      }
      if (!metadataMatches) {
        var currentMetadata = JSON.stringify(pcbdata.metadata, null, 4);
        var fileMetadata = JSON.stringify(newSettings.pcbmetadata, null, 4);
        if (!confirm(
          `Settins file metadata does not match current metadata.\n\n` +
          `Page metadata:\n${currentMetadata}\n\n` +
          `Settings file metadata:\n${fileMetadata}\n\n` +
          `Press OK if you would like to import settings anyway.`)) {
          return;
        }
      }
      overwriteSettings(newSettings.settings);
    }
    reader.readAsText(file, 'UTF-8');
  }
  input.click();
}

function overwriteSettings(newSettings) {

  initDone = false;
  Object.assign(settings, newSettings);
  writeStorage("bomlayout", settings.bomlayout);
  writeStorage("bommode", settings.bommode);
  writeStorage("canvaslayout", settings.canvaslayout);
  writeStorage("bomCheckboxes", settings.checkboxes.join(","));
  document.getElementById("bomCheckboxes").value = settings.checkboxes.join(",");
  for (var checkbox of settings.checkboxes) {
    writeStorage("checkbox_" + checkbox, settings.checkboxStoredRefs[checkbox]);
  }
  writeStorage("darkenWhenChecked", settings.darkenWhenChecked);
  padsVisible(settings.renderPads);
  document.getElementById("padsCheckbox").checked = settings.renderPads;
  fabricationVisible(settings.renderFabrication);
  document.getElementById("fabricationCheckbox").checked = settings.renderFabrication;
  silkscreenVisible(settings.renderSilkscreen);
  document.getElementById("silkscreenCheckbox").checked = settings.renderSilkscreen;
  referencesVisible(settings.renderReferences);
  document.getElementById("referencesCheckbox").checked = settings.renderReferences;
  valuesVisible(settings.renderValues);
  document.getElementById("valuesCheckbox").checked = settings.renderValues;
  tracksVisible(settings.renderTracks);
  document.getElementById("tracksCheckbox").checked = settings.renderTracks;
  zonesVisible(settings.renderZones);
  document.getElementById("zonesCheckbox").checked = settings.renderZones;
  dnpOutline(settings.renderDnpOutline);
  document.getElementById("dnpOutlineCheckbox").checked = settings.renderDnpOutline;
  setRedrawOnDrag(settings.redrawOnDrag);
  document.getElementById("dragCheckbox").checked = settings.redrawOnDrag;
  setShowCrosshair(settings.showCrosshair);
  document.getElementById("crosshairCheckbox").checked = settings.showCrosshair;
  setDarkMode(settings.darkMode);
  document.getElementById("darkmodeCheckbox").checked = settings.darkMode;
  setHighlightPin1(settings.highlightpin1);
  document.getElementById("highlightpin1Checkbox").checked = settings.highlightpin1;
  writeStorage("boardRotation", settings.boardRotation);
  document.getElementById("boardRotation").value = settings.boardRotation / 5;
  document.getElementById("rotationDegree").textContent = settings.boardRotation;
  initDone = true;
  prepCheckboxes();
  changeBomLayout(settings.bomlayout);
}

function saveFile(filename, blob) {
  var link = document.createElement("a");
  var objurl = URL.createObjectURL(blob);
  link.download = filename;
  link.href = objurl;
  link.click();
}

function dataURLtoBlob(dataurl) {
  var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],
      bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
  while(n--){
      u8arr[n] = bstr.charCodeAt(n);
  }
  return new Blob([u8arr], {type:mime});
}

var settings = {
  canvaslayout: "default",
  bomlayout: "default",
  bommode: "grouped",
  checkboxes: [],
  checkboxStoredRefs: {},
  darkMode: false,
  highlightpin1: false,
  redrawOnDrag: true,
  boardRotation: 0,
  renderPads: true,
  renderReferences: true,
  renderValues: true,
  renderSilkscreen: true,
  renderFabrication: true,
  renderDnpOutline: false,
  renderTracks: true,
  renderZones: true,
}

function initDefaults() {
  settings.bomlayout = readStorage("bomlayout");
  if (settings.bomlayout === null) {
    settings.bomlayout = config.bom_view;
  }
  if (!['bom-only', 'left-right', 'top-bottom'].includes(settings.bomlayout)) {
    settings.bomlayout = config.bom_view;
  }
  settings.bommode = readStorage("bommode");
  if (settings.bommode === null) {
    settings.bommode = "grouped";
  }
  if (!["grouped", "ungrouped", "netlist"].includes(settings.bommode)) {
    settings.bommode = "grouped";
  }
  settings.canvaslayout = readStorage("canvaslayout");
  if (settings.canvaslayout === null) {
    settings.canvaslayout = config.layer_view;
  }
  var bomCheckboxes = readStorage("bomCheckboxes");
  if (bomCheckboxes === null) {
    bomCheckboxes = config.checkboxes;
  }
  settings.checkboxes = bomCheckboxes.split(",").filter((e) => e);
  document.getElementById("bomCheckboxes").value = bomCheckboxes;

  settings.darkenWhenChecked = readStorage("darkenWhenChecked") || "";
  populateDarkenWhenCheckedOptions();

  function initBooleanSetting(storageString, def, elementId, func) {    
    var b = readStorage(storageString);
    if (b === null) {
      b = def;
    } else {
      b = (b === true);
    }
    document.getElementById(elementId).checked = b;
    func(b);
  }

  initBooleanSetting("padsVisible", config.show_pads, "padsCheckbox", padsVisible);
  initBooleanSetting("fabricationVisible", config.show_fabrication, "fabricationCheckbox", fabricationVisible);
  initBooleanSetting("silkscreenVisible", config.show_silkscreen, "silkscreenCheckbox", silkscreenVisible);
  initBooleanSetting("referencesVisible", true, "referencesCheckbox", referencesVisible);
  initBooleanSetting("valuesVisible", false, "valuesCheckbox", valuesVisible);
  if ("tracks" in pcbdata) {
    initBooleanSetting("tracksVisible", true, "tracksCheckbox", tracksVisible);
    initBooleanSetting("zonesVisible", true, "zonesCheckbox", zonesVisible);
  } else {
    document.getElementById("tracksAndZonesCheckboxes").style.display = "none";
    tracksVisible(false);
    zonesVisible(false);
  }
  initBooleanSetting("dnpOutline", false, "dnpOutlineCheckbox", dnpOutline);
  initBooleanSetting("redrawOnDrag", config.redraw_on_drag, "dragCheckbox", setRedrawOnDrag);
  initBooleanSetting("showCrosshair", config.show_crosshair, "crosshairCheckbox", setShowCrosshair);
  initBooleanSetting("darkmode", config.dark_mode, "darkmodeCheckbox", setDarkMode);
  initBooleanSetting("highlightpin1", config.highlight_pin1, "highlightpin1Checkbox", setHighlightPin1);
  settings.boardRotation = readStorage("boardRotation");
  if (settings.boardRotation === null) {
    settings.boardRotation = config.board_rotation * 5;
  } else {
    settings.boardRotation = parseInt(settings.boardRotation);
  }
  document.getElementById("boardRotation").value = settings.boardRotation / 5;
  document.getElementById("rotationDegree").textContent = settings.boardRotation;
}

// Helper classes for user js callbacks.

const IBOM_EVENT_TYPES = {
  ALL: "all",
  HIGHLIGHT_EVENT: "highlightEvent",
  CHECKBOX_CHANGE_EVENT: "checkboxChangeEvent",
  BOM_BODY_CHANGE_EVENT: "bomBodyChangeEvent",
}

const EventHandler = {
  callbacks: {},
  init: function() {
    for (eventType of Object.values(IBOM_EVENT_TYPES))
      this.callbacks[eventType] = [];
  },
  registerCallback: function(eventType, callback) {
    this.callbacks[eventType].push(callback);
  },
  emitEvent: function(eventType, eventArgs) {
    event = {
      eventType: eventType,
      args: eventArgs,
    }
    var callback;
    for(callback of this.callbacks[eventType])
      callback(event);
    for(callback of this.callbacks[IBOM_EVENT_TYPES.ALL])
      callback(event);
  }
}
EventHandler.init();

///////////////////////////////////////////////

///////////////////////////////////////////////
/* PCB rendering code */

var emptyContext2d = document.createElement("canvas").getContext("2d");
var hitTestContext2d = document.createElement("canvas").getContext("2d");

function deg2rad(deg) {
  return deg * Math.PI / 180;
}

function calcFontPoint(linepoint, text, offsetx, offsety, tilt) {
  var point = [
    linepoint[0] * text.width + offsetx,
    linepoint[1] * text.height + offsety
  ];
  // This approximates pcbnew behavior with how text tilts depending on horizontal justification
  point[0] -= (linepoint[1] + 0.5 * (1 + text.justify[0])) * text.height * tilt;
  return point;
}

function drawText(ctx, text, color) {
  if ("ref" in text && !settings.renderReferences) return;
  if ("val" in text && !settings.renderValues) return;
  ctx.save();
  ctx.fillStyle = color;
  ctx.strokeStyle = color;
  ctx.lineCap = "round";
  ctx.lineJoin = "round";
  ctx.lineWidth = text.thickness;

  if ("svgpath" in text) {    
    // TODO: This path must be cached!
    const path = new Path2D(text.svgpath);
    if(text.useTrueTypeFontRendering) {            
      ctx.fill(path);
    } else {
      ctx.stroke(path);
    }
    
    ctx.restore();
    return;
  }

  ctx.translate(...text.pos);
  ctx.translate(text.thickness * 0.5, 0);
  var angle = -text.angle;
  if (text.attr.includes("mirrored")) {
    ctx.scale(-1, 1);
    angle = -angle;
  }
  var tilt = 0;
  if (text.attr.includes("italic")) {
    tilt = 0.125;
  }
  var interline = text.height * 1.5 + text.thickness;
  var txt = text.text.split("\n");
  // KiCad ignores last empty line.
  if (txt[txt.length - 1] == '') txt.pop();
  ctx.rotate(deg2rad(angle));
  var offsety = (1 - text.justify[1]) / 2 * text.height; // One line offset
  offsety -= (txt.length - 1) * (text.justify[1] + 1) / 2 * interline; // Multiline offset
  for (var i in txt) {
    var lineWidth = text.thickness + interline / 2 * tilt;
    for (var j = 0; j < txt[i].length; j++) {
      if (txt[i][j] == '\t') {
        var fourSpaces = 4 * pcbdata.font_data[' '].w * text.width;
        lineWidth += fourSpaces - lineWidth % fourSpaces;
      } else {
        if (txt[i][j] == '~') {
          j++;
          if (j == txt[i].length)
            break;
        }
        lineWidth += pcbdata.font_data[txt[i][j]].w * text.width;
      }
    }
    var offsetx = -lineWidth * (text.justify[0] + 1) / 2;
    var inOverbar = false;
    for (var j = 0; j < txt[i].length; j++) {
      if (txt[i][j] == '\t') {
        var fourSpaces = 4 * pcbdata.font_data[' '].w * text.width;
        offsetx += fourSpaces - offsetx % fourSpaces;
        continue;
      } else if (txt[i][j] == '~') {
        j++;
        if (j == txt[i].length)
          break;
        if (txt[i][j] != '~') {
          inOverbar = !inOverbar;
        }
      }
      var glyph = pcbdata.font_data[txt[i][j]];
      if (inOverbar) {
        var overbarStart = [offsetx, -text.height * 1.4 + offsety];
        var overbarEnd = [offsetx + text.width * glyph.w, overbarStart[1]];

        if (!lastHadOverbar) {
          overbarStart[0] += text.height * 1.4 * tilt;
          lastHadOverbar = true;
        }
        ctx.beginPath();
        ctx.moveTo(...overbarStart);
        ctx.lineTo(...overbarEnd);
        ctx.stroke();
      } else {
        lastHadOverbar = false;
      }
      for (var line of glyph.l) {
        ctx.beginPath();
        ctx.moveTo(...calcFontPoint(line[0], text, offsetx, offsety, tilt));
        for (var k = 1; k < line.length; k++) {
          ctx.lineTo(...calcFontPoint(line[k], text, offsetx, offsety, tilt));
        }
        ctx.stroke();
      }
      offsetx += glyph.w * text.width;
    }
    offsety += interline;
  }
  ctx.restore();
}

function drawedge(ctx, scalefactor, edge, color) {
  ctx.strokeStyle = color;
  ctx.lineWidth = Math.max(1 / scalefactor, edge.width);
  ctx.lineCap = "round";
  if ("svgpath" in edge) {
    ctx.stroke(new Path2D(edge.svgpath));
  } else {
    ctx.beginPath();
    if (edge.type == "segment") {
      ctx.moveTo(...edge.start);
      ctx.lineTo(...edge.end);
    }
    if (edge.type == "rect") {
      ctx.moveTo(...edge.start);
      ctx.lineTo(edge.start[0], edge.end[1]);
      ctx.lineTo(...edge.end);
      ctx.lineTo(edge.end[0], edge.start[1]);
      ctx.lineTo(...edge.start);
    }
    if (edge.type == "arc") {
      ctx.arc(
        ...edge.start,
        edge.radius,
        deg2rad(edge.startangle),
        deg2rad(edge.endangle));
    }
    if (edge.type == "circle") {
      ctx.arc(
        ...edge.start,
        edge.radius,
        0, 2 * Math.PI);
      ctx.closePath();
    }
    if (edge.type == "curve") {
      ctx.moveTo(...edge.start);
      ctx.bezierCurveTo(...edge.cpa, ...edge.cpb, ...edge.end);
    }
    ctx.stroke();
  }
}

function getChamferedRectPath(size, radius, chamfpos, chamfratio) {
  // chamfpos is a bitmask, left = 1, right = 2, bottom left = 4, bottom right = 8
  var path = new Path2D();
  var width = size[0];
  var height = size[1];
  var x = width * -0.5;
  var y = height * -0.5;
  var chamfOffset = Math.min(width, height) * chamfratio;
  path.moveTo(x, 0);
  if (chamfpos & 4) {
    path.lineTo(x, y + height - chamfOffset);
    path.lineTo(x + chamfOffset, y + height);
    path.lineTo(0, y + height);
  } else {
    path.arcTo(x, y + height, x + width, y + height, radius);
  }
  if (chamfpos & 8) {
    path.lineTo(x + width - chamfOffset, y + height);
    path.lineTo(x + width, y + height - chamfOffset);
    path.lineTo(x + width, 0);
  } else {
    path.arcTo(x + width, y + height, x + width, y, radius);
  }
  if (chamfpos & 2) {
    path.lineTo(x + width, y + chamfOffset);
    path.lineTo(x + width - chamfOffset, y);
    path.lineTo(0, y);
  } else {
    path.arcTo(x + width, y, x, y, radius);
  }
  if (chamfpos & 1) {
    path.lineTo(x + chamfOffset, y);
    path.lineTo(x, y + chamfOffset);
    path.lineTo(x, 0);
  } else {
    path.arcTo(x, y, x, y + height, radius);
  }
  path.closePath();
  return path;
}

function getOblongPath(size) {
  return getChamferedRectPath(size, Math.min(size[0], size[1]) / 2, 0, 0);
}

function getPolygonsPath(shape) {
  if (shape.path2d) {
    return shape.path2d;
  }
  if ("svgpath" in shape) {
    shape.path2d = new Path2D(shape.svgpath);
  } else {
    var path = new Path2D();
    for (var polygon of shape.polygons) {
      path.moveTo(...polygon[0]);
      for (var i = 1; i < polygon.length; i++) {
        path.lineTo(...polygon[i]);
      }
      path.closePath();
    }
    shape.path2d = path;
  }
  return shape.path2d;
}

function drawPolygonShape(ctx, shape, color) {
  ctx.save();
  ctx.fillStyle = color;
  if (!("svgpath" in shape)) {
    ctx.translate(...shape.pos);
    ctx.rotate(deg2rad(-shape.angle));
  }
  ctx.fill(getPolygonsPath(shape));
  ctx.restore();
}


function drawPolylineShape(ctx, shape, color) {
  ctx.save();
  ctx.strokeStyle = color;
  ctx.lineWidth = shape.width;
  if (!("svgpath" in shape)) {
    ctx.translate(...shape.pos);
    ctx.rotate(deg2rad(-shape.angle));
  }
  ctx.stroke(getPolygonsPath(shape));
  ctx.restore();
}

function drawDrawing(ctx, scalefactor, drawing, color) {  
  if (["segment", "arc", "circle", "curve"].includes(drawing.type)) {
    drawedge(ctx, scalefactor, drawing, color);
  } else if (drawing.type == "polygon") {
    drawPolygonShape(ctx, drawing, color);
  } else if (drawing.type == "text") {    
    drawText(ctx, drawing, color);
  } else if (drawing.type == "polyline") {    
    drawPolylineShape(ctx, drawing, color);
  }
}

function getCirclePath(radius) {
  var path = new Path2D();
  path.arc(0, 0, radius, 0, 2 * Math.PI);
  path.closePath();
  return path;
}

function getCachedPadPath(pad) {
  if (!pad.path2d) {
    // if path2d is not set, build one and cache it on pad object
    if (pad.shape == "rect") {
      pad.path2d = new Path2D();
      pad.path2d.rect(...pad.size.map(c => -c * 0.5), ...pad.size);
    } else if (pad.shape == "oval") {
      pad.path2d = getOblongPath(pad.size);
    } else if (pad.shape == "circle") {
      pad.path2d = getCirclePath(pad.size[0] / 2);
    } else if (pad.shape == "roundrect") {
      pad.path2d = getChamferedRectPath(pad.size, pad.radius, 0, 0);
    } else if (pad.shape == "chamfrect") {
      pad.path2d = getChamferedRectPath(pad.size, pad.radius, pad.chamfpos, pad.chamfratio)
    } else if (pad.shape == "custom") {
      pad.path2d = getPolygonsPath(pad);
    } else if(pad.shape === "polygon") {      
      pad.path2d = new Path2D();
      if(pad.polygon.length > 1) {
        const pos = {
          x: pad.pos[0],
          y: pad.pos[1]
        };

        pad.path2d.moveTo(pad.polygon[0].x - pos.x, pad.polygon[0].y - pos.y);
        for (var i = 1; i < pad.polygon.length; i++) {
          const point = pad.polygon[i];          
          pad.path2d.lineTo(point.x - pos.x, point.y - pos.y);
        }
        pad.path2d.closePath();              
      }
    }
  }
  return pad.path2d;
}

function drawPad(ctx, pad, color, outline) {
  ctx.save();
  ctx.translate(...pad.pos);
  if(pad.shape !== 'polygon') {
    ctx.rotate(deg2rad(pad.angle));  
  } else {
    ctx.rotate(deg2rad(0));  
  }
  
  if (pad.offset) {
    ctx.translate(...pad.offset);
  }
  ctx.fillStyle = color;
  ctx.strokeStyle = color;
  var path = getCachedPadPath(pad);
  if (outline) {
    ctx.stroke(path);
  } else {
    ctx.fill(path);
  }
  ctx.restore();
}

function drawPadHole(ctx, pad, padHoleColor) {
  if (pad.type != "th") {
    return
  };

  ctx.save();
  ctx.translate(pad.holeCenterPoint.x, pad.holeCenterPoint.y);    
  ctx.rotate(deg2rad(pad.angle));
  ctx.fillStyle = padHoleColor;
  if (pad.drillshape == "oblong") {
    ctx.fill(getOblongPath(pad.drillsize));
  } else {
    ctx.fill(getCirclePath(pad.drillsize[0] / 2));
  }
  ctx.restore();
}

function drawFootprint(ctx, layer, scalefactor, footprint, padColor, padHoleColor, outlineColor, highlight, outline) {
  if (highlight) {
    // draw bounding box
    if (footprint.layer == layer) {
      ctx.save();
      ctx.globalAlpha = 0.2;
      ctx.translate(...footprint.bbox.pos);
      ctx.rotate(deg2rad(-footprint.bbox.angle));
      ctx.translate(...footprint.bbox.relpos);
      ctx.fillStyle = padColor;
      ctx.fillRect(0, 0, ...footprint.bbox.size);
      ctx.globalAlpha = 1;
      ctx.strokeStyle = padColor;
      ctx.strokeRect(0, 0, ...footprint.bbox.size);
      ctx.restore();
    }
  }
  // draw drawings
  for (var drawing of footprint.drawings) {
    if (drawing.layer == layer) {
      drawDrawing(ctx, scalefactor, drawing.drawing, padColor);
    }
  }
  // draw pads
  if (settings.renderPads) {
    for (var pad of footprint.pads) {
      if (pad.layers.includes(layer)) {
        drawPad(ctx, pad, padColor, outline);
        if (pad.pin1 && settings.highlightpin1) {
          drawPad(ctx, pad, outlineColor, true);
        }
      }
    }
    for (var pad of footprint.pads) {
      drawPadHole(ctx, pad, padHoleColor);
    }
  }
}

function drawCrosshair(canvas, x, y, scalefactor, color) {
  if(!settings.showCrosshair) {
    return;
  }

  var ctx = canvas.getContext("2d");

  HTMLFormControlsCollection.log
  
  ctx.save();
  ctx.globalAlpha = 0.75;
  ctx.lineWidth = 2 / scalefactor;
  ctx.strokeStyle = color;

  // TODO: Should calculate a proper bbox for the view port.
  const dummyOffset = 4000;

  // horz line
  ctx.beginPath();
  ctx.moveTo(x - dummyOffset, y);
  ctx.lineTo(x + dummyOffset, y);
  ctx.stroke();

  // vert line
  ctx.beginPath();
  ctx.moveTo(x, y - dummyOffset);
  ctx.lineTo(x, y + dummyOffset);
  ctx.stroke();

  ctx.globalAlpha = 1;
  ctx.restore();
}

function drawEdgeCuts(canvas, scalefactor) {
  var ctx = canvas.getContext("2d");
  var edgecolor = getComputedStyle(topmostdiv).getPropertyValue('--pcb-edge-color');
  for (var edge of pcbdata.edges) {
    drawedge(ctx, scalefactor, edge, edgecolor);
  }
}

function drawOrphanPads(canvas, layer, scalefactor, highlight, highlightedPads) {
  if (!settings.renderPads) {
    return;
  }

  highlightedPads = highlightedPads || [];

  var ctx = canvas.getContext("2d");
  ctx.save();
  ctx.lineWidth = 3 / scalefactor;
  var style = getComputedStyle(topmostdiv);
  var padColor = style.getPropertyValue('--pad-color');
  var padHoleColor = style.getPropertyValue('--pad-hole-color');  
  if (highlight) {
    padColor = style.getPropertyValue('--pad-color-highlight');
    outlineColor = style.getPropertyValue('--pin1-outline-color-highlight');
  }

  var i = 0;
  for (var pad of pcbdata.pads) {
    if (pad.layers.includes(layer)) {
      var outline = settings.renderDnpOutline;
      if (!highlight || highlightedPads.includes(i)) {
        drawPad(ctx, pad, padColor, outline); 
      }     
    }

    i++;
  }
  
  for (var pad of pcbdata.pads) {
    drawPadHole(ctx, pad, padHoleColor);
  }  

  ctx.restore();
}

function drawFootprints(canvas, layer, scalefactor, highlight) {
  var ctx = canvas.getContext("2d");
  ctx.save();
  ctx.lineWidth = 3 / scalefactor;
  var style = getComputedStyle(topmostdiv);
  var padColor = style.getPropertyValue('--pad-color');
  var padHoleColor = style.getPropertyValue('--pad-hole-color');
  var outlineColor = style.getPropertyValue('--pin1-outline-color');
  if (highlight) {
    padColor = style.getPropertyValue('--pad-color-highlight');
    outlineColor = style.getPropertyValue('--pin1-outline-color-highlight');
  }
  for (var i = 0; i < pcbdata.footprints.length; i++) {
    var mod = pcbdata.footprints[i];
    var outline = settings.renderDnpOutline && pcbdata.bom.skipped.includes(i);
    if (!highlight || highlightedFootprints.includes(i)) {
      drawFootprint(ctx, layer, scalefactor, mod, padColor, padHoleColor, outlineColor, highlight, outline);
    }
  }
  ctx.restore();
}

function drawBgLayer(layername, canvas, layer, scalefactor, edgeColor, polygonColor, textColor) {
  var ctx = canvas.getContext("2d");
  for (var d of pcbdata.drawings[layername][layer]) {
    if (["segment", "arc", "circle", "curve", "rect","polyline"].includes(d.type)) {
      drawedge(ctx, scalefactor, d, edgeColor);
    } else if (d.type == "polygon") {
      drawPolygonShape(ctx, d, polygonColor);
    } else if (d.type == "text") {
      drawText(ctx, d, polygonColor);
    }
  }
}

function drawTracks(canvas, layer, color, highlight) {
  ctx = canvas.getContext("2d");
  ctx.strokeStyle = color;
  ctx.lineCap = "round";
  for(var track of pcbdata.tracks[layer]) {
    if (highlight && highlightedNet != track.net) continue;
    ctx.lineWidth = track.width;

    if(track.type === 'polyline') {
      drawPolylineShape(ctx,track,color);
    } else if(track.type === 'polygon') {
      drawPolygonShape(ctx, track, color);
    } else if(track.type === 'text') {
      drawText(ctx, track, color);
    } else {
      if ('radius' in track) {
        ctx.beginPath();
        ctx.arc(
            ...track.center,
            track.radius,
            deg2rad(track.startangle),
            deg2rad(track.endangle));
        ctx.stroke();
      } else if('start' in track && 'end' in track) {
        ctx.beginPath();
        ctx.moveTo(...track.start);
        ctx.lineTo(...track.end);
        ctx.stroke();
      }
      
    }

  }
}

function drawZones(canvas, layer, color, highlight) {
  ctx = canvas.getContext("2d");
  ctx.save();
  ctx.strokeStyle = color;
  ctx.fillStyle = color;
  ctx.lineJoin = "round";
  for(var zone of pcbdata.zones[layer]) {
    if (!zone.path2d) {
      zone.path2d = getPolygonsPath(zone);
    }
    if (highlight && highlightedNet != zone.net) continue;
    ctx.fill(zone.path2d);
    if (zone.width > 0) {
      ctx.lineWidth = zone.width;
      ctx.stroke(zone.path2d);
    }
  }
  ctx.restore();
}

function clearCanvas(canvas, color = null) {
  var ctx = canvas.getContext("2d");
  ctx.save();
  ctx.setTransform(1, 0, 0, 1, 0, 0);
  if (color) {
    ctx.fillStyle = color;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
  } else {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }
  ctx.restore();
}

function drawNets(canvas, layer, highlight) {
  var style = getComputedStyle(topmostdiv);
  if (settings.renderTracks) {
    var trackColor = style.getPropertyValue(highlight ? '--track-color-highlight' : '--track-color');
    drawTracks(canvas, layer, trackColor, highlight);
  }
  if (settings.renderZones) {
    var zoneColor = style.getPropertyValue(highlight ? '--zone-color-highlight' : '--zone-color');
    drawZones(canvas, layer, zoneColor, highlight);
  }
  if (highlight && settings.renderPads) {
    var padColor = style.getPropertyValue('--pad-color-highlight');
    var padHoleColor = style.getPropertyValue('--pad-hole-color');
    var ctx = canvas.getContext("2d");
    for (var footprint of pcbdata.footprints) {
      // draw pads
      var padDrawn = false;
      for (var pad of footprint.pads) {
        if (highlightedNet != pad.net) continue;
        if (pad.layers.includes(layer)) {
          drawPad(ctx, pad, padColor, false);
          padDrawn = true;
        }
      }
      if (padDrawn) {
        // redraw all pad holes because some pads may overlap
        for (var pad of footprint.pads) {
          drawPadHole(ctx, pad, padHoleColor);
        }
      }
    }
  }
}

function drawHighlightsOnLayer(canvasdict, clear = true) {
  if (clear) {
    clearCanvas(canvasdict.highlight);
  }
  
  if (highlightedFootprints.length > 0) {
    drawFootprints(canvasdict.highlight, canvasdict.layer,
      canvasdict.transform.s * canvasdict.transform.zoom, true);
  }

  // Draw crosshairs
  if (highlightedFootprints.length > 0) {
    for(var i = 0; i < pcbdata.footprints.length; i++) {
      const footprint = pcbdata.footprints[i];
      if(highlightedFootprints.includes(i) && footprint.layer === canvasdict.layer) {
        drawCrosshair(canvasdict.highlight, footprint.center[0], footprint.center[1], canvasdict.transform.s * canvasdict.transform.zoom, 'red');
      }
    }
  }

  if (highlightedNet !== null) {
    var highlightedPads = [];
    for(var i = 0; i < pcbdata.pads.length; i++) {
      var pad = pcbdata.pads[i];
      if(pad.net === highlightedNet) {
        highlightedPads.push(i);
      }
    }
    
    drawOrphanPads(canvasdict.highlight, canvasdict.layer,
      canvasdict.transform.s * canvasdict.transform.zoom, true, highlightedPads);

    drawNets(canvasdict.highlight, canvasdict.layer, true);
  }
}

function drawHighlights() {
  drawHighlightsOnLayer(allcanvas.front);
  drawHighlightsOnLayer(allcanvas.back);
}

function drawBackground(canvasdict, clear = true) {
  if (clear) {
    clearCanvas(canvasdict.bg);
    clearCanvas(canvasdict.fab);
    clearCanvas(canvasdict.silk);
  }

  drawNets(canvasdict.bg, canvasdict.layer, false);

  drawOrphanPads(canvasdict.bg, canvasdict.layer, canvasdict.transform.s * canvasdict.transform.zoom, false);

  drawFootprints(canvasdict.bg, canvasdict.layer, canvasdict.transform.s * canvasdict.transform.zoom, false);

  drawEdgeCuts(canvasdict.bg, canvasdict.transform.s);

  var style = getComputedStyle(topmostdiv);
  var edgeColor = style.getPropertyValue('--silkscreen-edge-color');
  var polygonColor = style.getPropertyValue('--silkscreen-polygon-color');
  var textColor = style.getPropertyValue('--silkscreen-text-color');
  if (settings.renderSilkscreen) {
    drawBgLayer(
      "silkscreen", canvasdict.silk, canvasdict.layer,
      canvasdict.transform.s * canvasdict.transform.zoom,
      edgeColor, polygonColor, textColor);
  }
  edgeColor = style.getPropertyValue('--fabrication-edge-color');
  polygonColor = style.getPropertyValue('--fabrication-polygon-color');
  textColor = style.getPropertyValue('--fabrication-text-color');
  if (settings.renderFabrication) {
    drawBgLayer(
      "fabrication", canvasdict.fab, canvasdict.layer,
      canvasdict.transform.s * canvasdict.transform.zoom,
      edgeColor, polygonColor, textColor);
  }
}

function prepareCanvas(canvas, flip, transform) {
  var ctx = canvas.getContext("2d");
  ctx.setTransform(1, 0, 0, 1, 0, 0);
  var fontsize = 1.55;
  ctx.scale(transform.zoom, transform.zoom);
  ctx.translate(transform.panx, transform.pany);
  if (flip) {
    ctx.scale(-1, 1);
  }
  ctx.translate(transform.x, transform.y);
  ctx.rotate(deg2rad(settings.boardRotation));
  ctx.scale(transform.s, transform.s);
}

function prepareLayer(canvasdict) {
  var flip = (canvasdict.layer == "B");
  for (var c of ["bg", "fab", "silk", "highlight"]) {
    prepareCanvas(canvasdict[c], flip, canvasdict.transform);
  }
}

function rotateVector(v, angle) {
  angle = deg2rad(angle);
  return [
    v[0] * Math.cos(angle) - v[1] * Math.sin(angle),
    v[0] * Math.sin(angle) + v[1] * Math.cos(angle)
  ];
}

function applyRotation(bbox) {
  var corners = [
    [bbox.minx, bbox.miny],
    [bbox.minx, bbox.maxy],
    [bbox.maxx, bbox.miny],
    [bbox.maxx, bbox.maxy],
  ];
  corners = corners.map((v) => rotateVector(v, settings.boardRotation));
  return {
    minx: corners.reduce((a, v) => Math.min(a, v[0]), Infinity),
    miny: corners.reduce((a, v) => Math.min(a, v[1]), Infinity),
    maxx: corners.reduce((a, v) => Math.max(a, v[0]), -Infinity),
    maxy: corners.reduce((a, v) => Math.max(a, v[1]), -Infinity),
  }
}

function recalcLayerScale(layerdict, width, height) {
  var bbox = applyRotation(pcbdata.edges_bbox);
  var scalefactor = 0.98 * Math.min(
    width / (bbox.maxx - bbox.minx),
    height / (bbox.maxy - bbox.miny)
  );
  if (scalefactor < 0.1) {
    scalefactor = 1;
  }
  layerdict.transform.s = scalefactor;
  var flip = (layerdict.layer == "B");
  if (flip) {
    layerdict.transform.x = -((bbox.maxx + bbox.minx) * scalefactor + width) * 0.5;
  } else {
    layerdict.transform.x = -((bbox.maxx + bbox.minx) * scalefactor - width) * 0.5;
  }
  layerdict.transform.y = -((bbox.maxy + bbox.miny) * scalefactor - height) * 0.5;
  for (var c of ["bg", "fab", "silk", "highlight"]) {
    canvas = layerdict[c];
    canvas.width = width;
    canvas.height = height;
    canvas.style.width = (width / devicePixelRatio) + "px";
    canvas.style.height = (height / devicePixelRatio) + "px";
  }
}

function redrawCanvas(layerdict) {
  prepareLayer(layerdict);
  drawBackground(layerdict);
  drawHighlightsOnLayer(layerdict);
}

function resizeCanvas(layerdict) {
  var canvasdivid = {
    "F": "frontcanvas",
    "B": "backcanvas"
  } [layerdict.layer];
  var width = document.getElementById(canvasdivid).clientWidth * devicePixelRatio;
  var height = document.getElementById(canvasdivid).clientHeight * devicePixelRatio;
  recalcLayerScale(layerdict, width, height);
  redrawCanvas(layerdict);
}

function resizeAll() {
  resizeCanvas(allcanvas.front);
  resizeCanvas(allcanvas.back);
}

function pointWithinDistanceToSegment(x, y, x1, y1, x2, y2, d) {
  var A = x - x1;
  var B = y - y1;
  var C = x2 - x1;
  var D = y2 - y1;

  var dot = A * C + B * D;
  var len_sq = C * C + D * D;
  var dx, dy;
  if (len_sq == 0) {
    // start and end of the segment coincide
    dx = x - x1;
    dy = y - y1;
  } else {
    var param = dot / len_sq;
    var xx, yy;
    if (param < 0) {
      xx = x1;
      yy = y1;
    } else if (param > 1) {
      xx = x2;
      yy = y2;
    } else {
      xx = x1 + param * C;
      yy = y1 + param * D;
    }
    dx = x - xx;
    dy = y - yy;
  }
  return dx * dx + dy * dy <= d * d;
}

function modulo(n, mod) {
  return ((n % mod) + mod ) % mod;
}

function pointWithinDistanceToArc(x, y, xc, yc, radius, startangle, endangle, d) {
  var dx = x - xc;
  var dy = y - yc;
  var r_sq = dx * dx + dy * dy;
  var rmin = Math.max(0, radius-d);
  var rmax = radius + d;

  if (r_sq < rmin * rmin || r_sq > rmax * rmax)
    return false;

  var angle1 = modulo(deg2rad(startangle), 2 * Math.PI);
  var dx1 = xc + radius * Math.cos(angle1) - x;
  var dy1 = yc + radius * Math.sin(angle1) - y;
  if (dx1 * dx1 + dy1 * dy1 <= d * d)
    return true;

  var angle2 = modulo(deg2rad(endangle), 2 * Math.PI);
  var dx2 = xc + radius * Math.cos(angle2) - x;
  var dy2 = yc + radius * Math.sin(angle2) - y;
  if (dx2 * dx2 + dy2 * dy2 <= d * d)
    return true;

  var angle = modulo(Math.atan2(dy, dx), 2 * Math.PI);
  if (angle1 > angle2)
    return (angle >= angle2 || angle <= angle1);
  else
    return (angle >= angle1 && angle <= angle2);
}

function pointWithinPad(x, y, pad) {
  var v = [x - pad.pos[0], y - pad.pos[1]];
  v = rotateVector(v, -pad.angle);
  if (pad.offset) {
    v[0] -= pad.offset[0];
    v[1] -= pad.offset[1];
  }
  return emptyContext2d.isPointInPath(getCachedPadPath(pad), ...v);
}

function netHitScan(layer, x, y) {
  // TODO: Should be refactored

  // Check track segments
  if (settings.renderTracks && pcbdata.tracks) {
    for(var track of pcbdata.tracks[layer]) {
      if(track.type === 'polyline') {
        const path = getPolygonsPath(track);
        if(path) {
          hitTestContext2d.save();
          hitTestContext2d.lineWidth = track.width;
          
          if(hitTestContext2d.isPointInStroke(path,x,y)) {
            hitTestContext2d.restore();
            return track.net;            
          }
          
          hitTestContext2d.restore();          
        }        

      } else if(track.type === 'polygon') {
        const path = getPolygonsPath(track);
        if(path && hitTestContext2d.isPointInPath(path,x,y)) {          
          return track.net;                      
        }                     
      } else if(track.type === 'text') {
        // TODO: To implement taking in account TrueType fonts.
      } else if ('radius' in track) {
        if (pointWithinDistanceToArc(x, y, ...track.center, track.radius, track.startangle, track.endangle, track.width / 2)) {
          return track.net;
        }
      } else if('start' in track && 'end' in track) {
        if (pointWithinDistanceToSegment(x, y, ...track.start, ...track.end, track.width / 2)) {
          return track.net;
        }
      }
    }
  }
  // Check pads
  if (settings.renderPads) {

    // Footprints containing pads
    for (var footprint of pcbdata.footprints) {
      for(var pad of footprint.pads) {
        if (pad.layers.includes(layer) && pointWithinPad(x, y, pad)) {
          return pad.net;
        }
      }
    }

    // Orphan pads
    for(var pad of pcbdata.pads) {
      if (pad.layers.includes(layer) && pointWithinPad(x, y, pad)) {
        return pad.net;
      }
    }
  }
  return null;
}

function pointWithinFootprintBbox(x, y, bbox) {
  var v = [x - bbox.pos[0], y - bbox.pos[1]];
  v = rotateVector(v, bbox.angle);
  return bbox.relpos[0] <= v[0] && v[0] <= bbox.relpos[0] + bbox.size[0] &&
         bbox.relpos[1] <= v[1] && v[1] <= bbox.relpos[1] + bbox.size[1];
}

function bboxHitScan(layer, x, y) {
  var result = [];
  for (var i = 0; i < pcbdata.footprints.length; i++) {
    var footprint = pcbdata.footprints[i];
    if (footprint.layer == layer) {
      if (pointWithinFootprintBbox(x, y, footprint.bbox)) {
        result.push(i);
      }
    }
  }
  return result;
}

function handlePointerDown(e, layerdict) {
  if (e.button != 0 && e.button != 1) {
    return;
  }
  e.preventDefault();
  e.stopPropagation();

  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  layerdict.pointerStates[e.pointerId] = {
    distanceTravelled: 0,
    lastX: e.offsetX,
    lastY: e.offsetY,
    downTime: Date.now(),
  };
}

function handleMouseClick(e, layerdict) {
  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  var x = e.offsetX;
  var y = e.offsetY;
  var t = layerdict.transform;
  if (layerdict.layer == "B") {
    x = (devicePixelRatio * x / t.zoom - t.panx + t.x) / -t.s;
  } else {
    x = (devicePixelRatio * x / t.zoom - t.panx - t.x) / t.s;
  }
  y = (devicePixelRatio * y / t.zoom - t.y - t.pany) / t.s;
  var v = rotateVector([x, y], -settings.boardRotation);
  if ("nets" in pcbdata) {
    var net = netHitScan(layerdict.layer, ...v);
    if (net !== highlightedNet) {
      netClicked(net);
    }
  }
  if (highlightedNet === null) {
    var footprints = bboxHitScan(layerdict.layer, ...v);
    if (footprints.length > 0) {
      footprintsClicked(footprints);
    }
  }
}

function handlePointerLeave(e, layerdict) {
  e.preventDefault();
  e.stopPropagation();

  if (!settings.redrawOnDrag) {
    redrawCanvas(layerdict);
  }

  delete layerdict.pointerStates[e.pointerId];
}

function resetTransform(layerdict) {
  layerdict.transform.panx = 0;
  layerdict.transform.pany = 0;
  layerdict.transform.zoom = 1;
  redrawCanvas(layerdict);
}

function handlePointerUp(e, layerdict) {
  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  e.preventDefault();
  e.stopPropagation();

  if (e.button == 2) {
    // Reset pan and zoom on right click.
    resetTransform(layerdict);
    layerdict.anotherPointerTapped = false;
    return;
  }

  // We haven't necessarily had a pointermove event since the interaction started, so make sure we update this now
  var ptr = layerdict.pointerStates[e.pointerId];
  ptr.distanceTravelled += Math.abs(e.offsetX - ptr.lastX) + Math.abs(e.offsetY - ptr.lastY);

  if (e.button == 0 && ptr.distanceTravelled < 10 && Date.now() - ptr.downTime <= 500) {
    if (Object.keys(layerdict.pointerStates).length == 1) {
      if (layerdict.anotherPointerTapped) {
        // This is the second pointer coming off of a two-finger tap
        resetTransform(layerdict);
      } else {
        // This is just a regular tap
        handleMouseClick(e, layerdict);
      }
      layerdict.anotherPointerTapped = false;
    } else {
      // This is the first finger coming off of what could become a two-finger tap
      layerdict.anotherPointerTapped = true;
    }
  } else {
    if (!settings.redrawOnDrag) {
      redrawCanvas(layerdict);
    }
    layerdict.anotherPointerTapped = false;
  }

  delete layerdict.pointerStates[e.pointerId];
}

function handlePointerMove(e, layerdict) {
  if (!layerdict.pointerStates.hasOwnProperty(e.pointerId)) {
    return;
  }
  e.preventDefault();
  e.stopPropagation();

  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  var thisPtr = layerdict.pointerStates[e.pointerId];

  var dx = e.offsetX - thisPtr.lastX;
  var dy = e.offsetY - thisPtr.lastY;

  // If this number is low on pointer up, we count the action as a click
  thisPtr.distanceTravelled += Math.abs(dx) + Math.abs(dy);

  if (Object.keys(layerdict.pointerStates).length == 1) {
    // This is a simple drag
    layerdict.transform.panx += devicePixelRatio * dx / layerdict.transform.zoom;
    layerdict.transform.pany += devicePixelRatio * dy / layerdict.transform.zoom;
  } else if (Object.keys(layerdict.pointerStates).length == 2) {
    var otherPtr = Object.values(layerdict.pointerStates).filter((ptr) => ptr != thisPtr)[0];

    var oldDist = Math.sqrt(Math.pow(thisPtr.lastX - otherPtr.lastX, 2) + Math.pow(thisPtr.lastY - otherPtr.lastY, 2));
    var newDist = Math.sqrt(Math.pow(e.offsetX - otherPtr.lastX, 2)     + Math.pow(e.offsetY - otherPtr.lastY, 2));

    var scaleFactor = newDist/oldDist;

    if (scaleFactor != NaN) {
      layerdict.transform.zoom *= scaleFactor;

      var zoomd = (1 - scaleFactor) / layerdict.transform.zoom;
      layerdict.transform.panx += devicePixelRatio * otherPtr.lastX * zoomd;
      layerdict.transform.pany += devicePixelRatio * otherPtr.lastY * zoomd;
    }
  }

  thisPtr.lastX = e.offsetX;
  thisPtr.lastY = e.offsetY;

  if (settings.redrawOnDrag) {
    redrawCanvas(layerdict);
  }
}

function handleMouseWheel(e, layerdict) {
  e.preventDefault();
  e.stopPropagation();
  var t = layerdict.transform;
  var wheeldelta = e.deltaY;
  if (e.deltaMode == 1) {
    // FF only, scroll by lines
    wheeldelta *= 30;
  } else if (e.deltaMode == 2) {
    wheeldelta *= 300;
  }
  var m = Math.pow(1.1, -wheeldelta / 40);
  // Limit amount of zoom per tick.
  if (m > 2) {
    m = 2;
  } else if (m < 0.5) {
    m = 0.5;
  }
  t.zoom *= m;
  var zoomd = (1 - m) / t.zoom;
  t.panx += devicePixelRatio * e.offsetX * zoomd;
  t.pany += devicePixelRatio * e.offsetY * zoomd;
  redrawCanvas(layerdict);
}

function addMouseHandlers(div, layerdict) {
  div.addEventListener("pointerdown", function(e) {
    handlePointerDown(e, layerdict);
  });
  div.addEventListener("pointermove", function(e) {
    handlePointerMove(e, layerdict);
  });
  div.addEventListener("pointerup", function(e) {
    handlePointerUp(e, layerdict);
  });
  var pointerleave = function(e) {
    handlePointerLeave(e, layerdict);
  }
  div.addEventListener("pointercancel", pointerleave);
  div.addEventListener("pointerleave", pointerleave);
  div.addEventListener("pointerout", pointerleave);

  div.onwheel = function(e) {
    handleMouseWheel(e, layerdict);
  }
  for (var element of [div, layerdict.bg, layerdict.fab, layerdict.silk, layerdict.highlight]) {
    element.addEventListener("contextmenu", function(e) {
      e.preventDefault();
    }, false);
  }
}

function setRedrawOnDrag(value) {
  settings.redrawOnDrag = value;
  writeStorage("redrawOnDrag", value);
}

function setShowCrosshair(value) {
  settings.showCrosshair = value;
  writeStorage("showCrosshair", value);
}

function setBoardRotation(value) {
  settings.boardRotation = value * 5;
  writeStorage("boardRotation", settings.boardRotation);
  document.getElementById("rotationDegree").textContent = settings.boardRotation;
  resizeAll();
}

function initRender() {
  allcanvas = {
    front: {
      transform: {
        x: 0,
        y: 0,
        s: 1,
        panx: 0,
        pany: 0,
        zoom: 1,
      },
      pointerStates: {},
      anotherPointerTapped: false,
      bg: document.getElementById("F_bg"),
      fab: document.getElementById("F_fab"),
      silk: document.getElementById("F_slk"),
      highlight: document.getElementById("F_hl"),
      layer: "F",
    },
    back: {
      transform: {
        x: 0,
        y: 0,
        s: 1,
        panx: 0,
        pany: 0,
        zoom: 1,
      },
      pointerStates: {},
      anotherPointerTapped: false,
      bg: document.getElementById("B_bg"),
      fab: document.getElementById("B_fab"),
      silk: document.getElementById("B_slk"),
      highlight: document.getElementById("B_hl"),
      layer: "B",
    }
  };
  addMouseHandlers(document.getElementById("frontcanvas"), allcanvas.front);
  addMouseHandlers(document.getElementById("backcanvas"), allcanvas.back);
}

///////////////////////////////////////////////

///////////////////////////////////////////////
/* DOM manipulation and misc code */

var bomsplit;
var canvassplit;
var initDone = false;
var bomSortFunction = null;
var currentSortColumn = null;
var currentSortOrder = null;
var currentHighlightedRowId;
var highlightHandlers = [];
var footprintIndexToHandler = {};
var netsToHandler = {};
var highlightedFootprints = [];
var highlightedOrphanPads = [];
var highlightedNet = null;
var lastClicked;

function dbg(html) {
  dbgdiv.innerHTML = html;
}

function redrawIfInitDone() {
  if (initDone) {
    redrawCanvas(allcanvas.front);
    redrawCanvas(allcanvas.back);
  }
}

function padsVisible(value) {
  writeStorage("padsVisible", value);
  settings.renderPads = value;
  redrawIfInitDone();
}

function referencesVisible(value) {
  writeStorage("referencesVisible", value);
  settings.renderReferences = value;
  redrawIfInitDone();
}

function valuesVisible(value) {
  writeStorage("valuesVisible", value);
  settings.renderValues = value;
  redrawIfInitDone();
}

function tracksVisible(value) {
  writeStorage("tracksVisible", value);
  settings.renderTracks = value;
  redrawIfInitDone();
}

function zonesVisible(value) {
  writeStorage("zonesVisible", value);
  settings.renderZones = value;
  redrawIfInitDone();
}

function dnpOutline(value) {
  writeStorage("dnpOutline", value);
  settings.renderDnpOutline = value;
  redrawIfInitDone();
}

function setDarkMode(value) {
  if (value) {
    topmostdiv.classList.add("dark");
  } else {
    topmostdiv.classList.remove("dark");
  }
  writeStorage("darkmode", value);
  settings.darkMode = value;
  redrawIfInitDone();
}

function setFullscreen(value) {
  if (value) {
    document.documentElement.requestFullscreen();
  } else {
    document.exitFullscreen();
  }
}

function fabricationVisible(value) {
  writeStorage("fabricationVisible", value);
  settings.renderFabrication = value;
  redrawIfInitDone();
}

function silkscreenVisible(value) {
  writeStorage("silkscreenVisible", value);
  settings.renderSilkscreen = value;
  redrawIfInitDone();
}

function setHighlightPin1(value) {
  writeStorage("highlightpin1", value);
  settings.highlightpin1 = value;
  redrawIfInitDone();
}

function getStoredCheckboxRefs(checkbox) {
  function convert(ref) {
    var intref = parseInt(ref);
    if (isNaN(intref)) {
      for (var i = 0; i < pcbdata.footprints.length; i++) {
        if (pcbdata.footprints[i].ref == ref) {
          return i;
        }
      }
      return -1;
    } else {
      return intref;
    }
  }
  if (!(checkbox in settings.checkboxStoredRefs)) {
    var val = readStorage("checkbox_" + checkbox);
    settings.checkboxStoredRefs[checkbox] = val ? val : "";
  }
  if (!settings.checkboxStoredRefs[checkbox]) {
    return new Set();
  } else {
    return new Set(settings.checkboxStoredRefs[checkbox].split(",").map(r => convert(r)).filter(a => a >= 0));
  }
}

function getCheckboxState(checkbox, references) {
  var storedRefsSet = getStoredCheckboxRefs(checkbox);
  var currentRefsSet = new Set(references.map(r => r[1]));
  // Get difference of current - stored
  var difference = new Set(currentRefsSet);
  for (ref of storedRefsSet) {
    difference.delete(ref);
  }
  if (difference.size == 0) {
    // All the current refs are stored
    return "checked";
  } else if (difference.size == currentRefsSet.size) {
    // None of the current refs are stored
    return "unchecked";
  } else {
    // Some of the refs are stored
    return "indeterminate";
  }
}

function setBomCheckboxState(checkbox, element, references) {
  var state = getCheckboxState(checkbox, references);
  element.checked = (state == "checked");
  element.indeterminate = (state == "indeterminate");
}

function createCheckboxChangeHandler(checkbox, references, row) {
  return function() {
    refsSet = getStoredCheckboxRefs(checkbox);
    var darkenWhenChecked = settings.darkenWhenChecked == checkbox;
    eventArgs = {
      checkbox: checkbox,
      refs: references,
    }
    if (this.checked) {
      // checkbox ticked
      for (var ref of references) {
        refsSet.add(ref[1]);
      }
      if (darkenWhenChecked) {
        row.classList.add("checked");
      }
      eventArgs.state = 'checked';
    } else {
      // checkbox unticked
      for (var ref of references) {
        refsSet.delete(ref[1]);
      }
      if (darkenWhenChecked) {
        row.classList.remove("checked");
      }
      eventArgs.state = 'unchecked';
    }
    settings.checkboxStoredRefs[checkbox] = [...refsSet].join(",");
    writeStorage("checkbox_" + checkbox, settings.checkboxStoredRefs[checkbox]);
    updateCheckboxStats(checkbox);
    EventHandler.emitEvent(IBOM_EVENT_TYPES.CHECKBOX_CHANGE_EVENT, eventArgs);
  }
}

function clearHighlightedFootprints() {
  if (currentHighlightedRowId) {
    document.getElementById(currentHighlightedRowId).classList.remove("highlighted");
    currentHighlightedRowId = null;
    highlightedFootprints = [];  
    highlightedOrphanPads = [];  
    highlightedNet = null;
  }
}

function createRowHighlightHandler(rowid, refs, net) {
  return function() {
    if (currentHighlightedRowId) {
      if (currentHighlightedRowId == rowid) {
        return;
      }
      document.getElementById(currentHighlightedRowId).classList.remove("highlighted");
    }
    document.getElementById(rowid).classList.add("highlighted");
    currentHighlightedRowId = rowid;
    highlightedFootprints = refs ? refs.map(r => r[1]) : [];
    highlightedNet = net;
    drawHighlights();
    EventHandler.emitEvent(
      IBOM_EVENT_TYPES.HIGHLIGHT_EVENT,
      {
        rowid: rowid,
        refs: refs,
        net: net
      });
  }
}

function entryMatches(entry) {
  if (settings.bommode == "netlist") {
    // entry is just a net name
    return entry.toLowerCase().indexOf(filter) >= 0;
  }
  // check refs
  for (var ref of entry[3]) {
    if (ref[0].toLowerCase().indexOf(filter) >= 0) {
      return true;
    }
  }
  // check extra fields
  for (var i in config.extra_fields) {
    if (entry[4][i].toLowerCase().indexOf(filter) >= 0) {
      return true;
    }
  }
  // check value
  if (entry[1].toLowerCase().indexOf(filter) >= 0) {
    return true;
  }
  // check footprint
  if (entry[2].toLowerCase().indexOf(filter) >= 0) {
    return true;
  }
  return false;
}

function findRefInEntry(entry) {
  return entry[3].filter(r => r[0].toLowerCase() == reflookup);
}

function highlightFilter(s) {
  if (!filter) {
    return s;
  }
  var parts = s.toLowerCase().split(filter);
  if (parts.length == 1) {
    return s;
  }
  var r = "";
  var pos = 0;
  for (var i in parts) {
    if (i > 0) {
      r += '<mark class="highlight">' +
        s.substring(pos, pos + filter.length) +
        '</mark>';
      pos += filter.length;
    }
    r += s.substring(pos, pos + parts[i].length);
    pos += parts[i].length;
  }
  return r;
}

function checkboxSetUnsetAllHandler(checkboxname) {
  return function() {
    var checkboxnum = 0;
    while (checkboxnum < settings.checkboxes.length &&
      settings.checkboxes[checkboxnum].toLowerCase() != checkboxname.toLowerCase()) {
      checkboxnum++;
    }
    if (checkboxnum >= settings.checkboxes.length) {
      return;
    }
    var allset = true;
    var checkbox;
    var row;
    for (row of bombody.childNodes) {
      checkbox = row.childNodes[checkboxnum + 1].childNodes[0];
      if (!checkbox.checked || checkbox.indeterminate) {
        allset = false;
        break;
      }
    }
    for (row of bombody.childNodes) {
      checkbox = row.childNodes[checkboxnum + 1].childNodes[0];
      checkbox.checked = !allset;
      checkbox.indeterminate = false;
      checkbox.onchange();
    }
  }
}

function createColumnHeader(name, cls, comparator) {
  var th = document.createElement("TH");
  th.innerHTML = name;
  th.classList.add(cls);
  th.style.cursor = "pointer";
  var span = document.createElement("SPAN");
  span.classList.add("sortmark");
  span.classList.add("none");
  th.appendChild(span);
  th.onclick = function() {
    if (currentSortColumn && this !== currentSortColumn) {
      // Currently sorted by another column
      currentSortColumn.childNodes[1].classList.remove(currentSortOrder);
      currentSortColumn.childNodes[1].classList.add("none");
      currentSortColumn = null;
      currentSortOrder = null;
    }
    if (currentSortColumn && this === currentSortColumn) {
      // Already sorted by this column
      if (currentSortOrder == "asc") {
        // Sort by this column, descending order
        bomSortFunction = function(a, b) {
          return -comparator(a, b);
        }
        currentSortColumn.childNodes[1].classList.remove("asc");
        currentSortColumn.childNodes[1].classList.add("desc");
        currentSortOrder = "desc";
      } else {
        // Unsort
        bomSortFunction = null;
        currentSortColumn.childNodes[1].classList.remove("desc");
        currentSortColumn.childNodes[1].classList.add("none");
        currentSortColumn = null;
        currentSortOrder = null;
      }
    } else {
      // Sort by this column, ascending order
      bomSortFunction = comparator;
      currentSortColumn = this;
      currentSortColumn.childNodes[1].classList.remove("none");
      currentSortColumn.childNodes[1].classList.add("asc");
      currentSortOrder = "asc";
    }
    populateBomBody();
  }
  return th;
}

function populateBomHeader() {
  while (bomhead.firstChild) {
    bomhead.removeChild(bomhead.firstChild);
  }
  var tr = document.createElement("TR");
  var th = document.createElement("TH");
  th.classList.add("numCol");
  tr.appendChild(th);
  var checkboxCompareClosure = function(checkbox) {
    return (a, b) => {
      var stateA = getCheckboxState(checkbox, a[3]);
      var stateB = getCheckboxState(checkbox, b[3]);
      if (stateA > stateB) return -1;
      if (stateA < stateB) return 1;
      return 0;
    }
  }
  if (settings.bommode == "netlist") {
    th = createColumnHeader("Net name", "bom-netname", (a, b) => {
      if (a > b) return -1;
      if (a < b) return 1;
      return 0;
    });
    tr.appendChild(th);
  } else {
    for (var checkbox of settings.checkboxes) {
      th = createColumnHeader(
        checkbox, "bom-checkbox", checkboxCompareClosure(checkbox));
      th.onclick = fancyDblClickHandler(
        th, th.onclick.bind(th), checkboxSetUnsetAllHandler(checkbox));
      tr.appendChild(th);
    }
    tr.appendChild(createColumnHeader("References", "References", (a, b) => {
      var i = 0;
      while (i < a[3].length && i < b[3].length) {
        if (a[3][i] != b[3][i]) return a[3][i] > b[3][i] ? 1 : -1;
        i++;
      }
      return a[3].length - b[3].length;
    }));
    // Extra fields
    if (config.extra_fields.length > 0) {
      var extraFieldCompareClosure = function(fieldIndex) {
        return (a, b) => {
          var fa = a[4][fieldIndex];
          var fb = b[4][fieldIndex];
          if (fa != fb) return fa > fb ? 1 : -1;
          else return 0;
        }
      }
      for (var i in config.extra_fields) {
        tr.appendChild(createColumnHeader(
          config.extra_fields[i], "extra", extraFieldCompareClosure(i)));
      }
    }
    tr.appendChild(createColumnHeader("Value", "Value", (a, b) => {
      return valueCompare(a[5], b[5], a[1], b[1]);
    }));
    tr.appendChild(createColumnHeader("Footprint", "Footprint", (a, b) => {
      if (a[2] != b[2]) return a[2] > b[2] ? 1 : -1;
      else return 0;
    }));
    if (settings.bommode == "grouped") {
      tr.appendChild(createColumnHeader("Quantity", "Quantity", (a, b) => {
        return a[3].length - b[3].length;
      }));
    }
  }
  bomhead.appendChild(tr);
}

function populateBomBody() {
  while (bom.firstChild) {
    bom.removeChild(bom.firstChild);
  }
  highlightHandlers = [];
  footprintIndexToHandler = {};
  netsToHandler = {};
  currentHighlightedRowId = null;
  var first = true;
  if (settings.bommode == "netlist") {
    bomtable = pcbdata.nets.slice();
  } else {
    switch (settings.canvaslayout) {
      case 'F':
        bomtable = pcbdata.bom.F.slice();
        break;
      case 'FB':
        bomtable = pcbdata.bom.both.slice();
        break;
      case 'B':
        bomtable = pcbdata.bom.B.slice();
        break;
    }
    if (settings.bommode == "ungrouped") {
      // expand bom table
      expandedTable = []
      for (var bomentry of bomtable) {
        for (var ref of bomentry[3]) {
          expandedTable.push([1, bomentry[1], bomentry[2], [ref], bomentry[4], bomentry[5]]);
        }
      }
      bomtable = expandedTable;
    }
  }
  if (bomSortFunction) {
    bomtable = bomtable.sort(bomSortFunction);
  }
  for (var i in bomtable) {
    var bomentry = bomtable[i];
    if (filter && !entryMatches(bomentry)) {
      continue;
    }
    var references = null;
    var netname = null;
    var tr = document.createElement("TR");
    var td = document.createElement("TD");
    var rownum = +i + 1;
    tr.id = "bomrow" + rownum;
    td.textContent = rownum;
    tr.appendChild(td);
    if (settings.bommode == "netlist") {
      netname = bomentry;
      td = document.createElement("TD");
      td.innerHTML = highlightFilter(netname ? netname : "&lt;no net&gt;");
      tr.appendChild(td);
    } else {
      if (reflookup) {
        references = findRefInEntry(bomentry);
        if (references.length == 0) {
          continue;
        }
      } else {
        references = bomentry[3];
      }
      // Checkboxes
      for (var checkbox of settings.checkboxes) {
        if (checkbox) {
          td = document.createElement("TD");
          var input = document.createElement("input");
          input.type = "checkbox";
          input.onchange = createCheckboxChangeHandler(checkbox, references, tr);
          setBomCheckboxState(checkbox, input, references);
          if (input.checked && settings.darkenWhenChecked == checkbox) {
            tr.classList.add("checked");
          }
          td.appendChild(input);
          tr.appendChild(td);
        }
      }
      // References
      td = document.createElement("TD");
      td.innerHTML = highlightFilter(references.map(r => r[0]).join(", "));
      tr.appendChild(td);
      // Extra fields
      for (var i in config.extra_fields) {
        td = document.createElement("TD");
        td.innerHTML = highlightFilter(bomentry[4][i]);
        tr.appendChild(td);
      }
      // Value
      td = document.createElement("TD");
      td.innerHTML = highlightFilter(bomentry[1]);
      tr.appendChild(td);
      // Footprint
      td = document.createElement("TD");
      td.innerHTML = highlightFilter(bomentry[2]);
      tr.appendChild(td);
      if (settings.bommode == "grouped") {
        // Quantity
        td = document.createElement("TD");
        td.textContent = bomentry[3].length;
        tr.appendChild(td);
      }
    }
    bom.appendChild(tr);
    var handler = createRowHighlightHandler(tr.id, references, netname);
    tr.onmousemove = handler;
    highlightHandlers.push({
      id: tr.id,
      handler: handler,
    });
    if (references !== null) {
      for (var refIndex of references.map(r => r[1])) {
        footprintIndexToHandler[refIndex] = handler;
      }
    }
    if (netname !== null) {
      netsToHandler[netname] = handler;
    }
    if ((filter || reflookup) && first) {
      handler();
      first = false;
    }
  }
  EventHandler.emitEvent(
    IBOM_EVENT_TYPES.BOM_BODY_CHANGE_EVENT,
    {
      filter: filter,
      reflookup: reflookup,
      checkboxes: settings.checkboxes,
      bommode: settings.bommode,
    });
}

function highlightPreviousRow() {
  if (!currentHighlightedRowId) {
    highlightHandlers[highlightHandlers.length - 1].handler();
  } else {
    if (highlightHandlers.length > 1 &&
      highlightHandlers[0].id == currentHighlightedRowId) {
      highlightHandlers[highlightHandlers.length - 1].handler();
    } else {
      for (var i = 0; i < highlightHandlers.length - 1; i++) {
        if (highlightHandlers[i + 1].id == currentHighlightedRowId) {
          highlightHandlers[i].handler();
          break;
        }
      }
    }
  }
  smoothScrollToRow(currentHighlightedRowId);
}

function highlightNextRow() {
  if (!currentHighlightedRowId) {
    highlightHandlers[0].handler();
  } else {
    if (highlightHandlers.length > 1 &&
      highlightHandlers[highlightHandlers.length - 1].id == currentHighlightedRowId) {
      highlightHandlers[0].handler();
    } else {
      for (var i = 1; i < highlightHandlers.length; i++) {
        if (highlightHandlers[i - 1].id == currentHighlightedRowId) {
          highlightHandlers[i].handler();
          break;
        }
      }
    }
  }
  smoothScrollToRow(currentHighlightedRowId);
}

function populateBomTable() {
  populateBomHeader();
  populateBomBody();
}

function footprintsClicked(footprintIndexes) {
  var lastClickedIndex = footprintIndexes.indexOf(lastClicked);
  for (var i = 1; i <= footprintIndexes.length; i++) {
    var refIndex = footprintIndexes[(lastClickedIndex + i) % footprintIndexes.length];
    if (refIndex in footprintIndexToHandler) {
      lastClicked = refIndex;
      footprintIndexToHandler[refIndex]();
      smoothScrollToRow(currentHighlightedRowId);
      break;
    }
  }
}

function netClicked(net) {
  if (net in netsToHandler) {
    netsToHandler[net]();
    smoothScrollToRow(currentHighlightedRowId);
  } else {
    clearHighlightedFootprints();
    highlightedNet = net;
    drawHighlights();
  }
}

function updateFilter(input) {
  filter = input.toLowerCase();
  populateBomTable();
}

function updateRefLookup(input) {
  reflookup = input.toLowerCase();
  populateBomTable();
}

function changeCanvasLayout(layout) {
  document.getElementById("fl-btn").classList.remove("depressed");
  document.getElementById("fb-btn").classList.remove("depressed");
  document.getElementById("bl-btn").classList.remove("depressed");
  switch (layout) {
    case 'F':
      document.getElementById("fl-btn").classList.add("depressed");
      if (settings.bomlayout != "bom-only") {
        canvassplit.collapse(1);
      }
      break;
    case 'B':
      document.getElementById("bl-btn").classList.add("depressed");
      if (settings.bomlayout != "bom-only") {
        canvassplit.collapse(0);
      }
      break;
    default:
      document.getElementById("fb-btn").classList.add("depressed");
      if (settings.bomlayout != "bom-only") {
        canvassplit.setSizes([50, 50]);
      }
  }
  settings.canvaslayout = layout;
  writeStorage("canvaslayout", layout);
  resizeAll();
  changeBomMode(settings.bommode);
}

function populateMetadata() {
  document.getElementById("title").innerHTML = pcbdata.metadata.title;
  document.getElementById("revision").innerHTML = "Rev: " + pcbdata.metadata.revision;
  document.getElementById("company").innerHTML = pcbdata.metadata.company;
  document.getElementById("filedate").innerHTML = pcbdata.metadata.date;
  if (pcbdata.metadata.title != "") {
    document.title = pcbdata.metadata.title + " BOM";
  }
  // Calculate board stats
  var fp_f = 0, fp_b = 0, pads_f = 0, pads_b = 0, pads_th = 0;
  for (var i = 0; i < pcbdata.footprints.length; i++) {
    if (pcbdata.bom.skipped.includes(i)) continue;
    var mod = pcbdata.footprints[i];
    if (mod.layer == "F") {
      fp_f++;
    } else {
      fp_b++;
    }
    for (var pad of mod.pads) {
      if (pad.type == "th") {
        pads_th++;
      } else {
        if (pad.layers.includes("F")) {
          pads_f++;
        }
        if (pad.layers.includes("B")) {
          pads_b++;
        }
      }
    }
  }
  document.getElementById("stats-components-front").innerHTML = fp_f;
  document.getElementById("stats-components-back").innerHTML = fp_b;
  document.getElementById("stats-components-total").innerHTML = fp_f + fp_b;
  document.getElementById("stats-groups-front").innerHTML = pcbdata.bom.F.length;
  document.getElementById("stats-groups-back").innerHTML = pcbdata.bom.B.length;
  document.getElementById("stats-groups-total").innerHTML = pcbdata.bom.both.length;
  document.getElementById("stats-smd-pads-front").innerHTML = pads_f;
  document.getElementById("stats-smd-pads-back").innerHTML = pads_b;
  document.getElementById("stats-smd-pads-total").innerHTML = pads_f + pads_b;
  document.getElementById("stats-th-pads").innerHTML = pads_th;
  // Update version string
  document.getElementById("github-link").innerHTML = "InteractiveHtmlBom&nbsp;" +
    /^v\d+\.\d+/.exec(pcbdata.ibom_version)[0];
}

function changeBomLayout(layout) {
  document.getElementById("bom-btn").classList.remove("depressed");
  document.getElementById("lr-btn").classList.remove("depressed");
  document.getElementById("tb-btn").classList.remove("depressed");
  switch (layout) {
    case 'bom-only':
      document.getElementById("bom-btn").classList.add("depressed");
      if (bomsplit) {
        bomsplit.destroy();
        bomsplit = null;
        canvassplit.destroy();
        canvassplit = null;
      }
      document.getElementById("frontcanvas").style.display = "none";
      document.getElementById("backcanvas").style.display = "none";
      document.getElementById("bot").style.height = "";
      break;
    case 'top-bottom':
      document.getElementById("tb-btn").classList.add("depressed");
      document.getElementById("frontcanvas").style.display = "";
      document.getElementById("backcanvas").style.display = "";
      document.getElementById("bot").style.height = "calc(100% - 80px)";
      document.getElementById("bomdiv").classList.remove("split-horizontal");
      document.getElementById("canvasdiv").classList.remove("split-horizontal");
      document.getElementById("frontcanvas").classList.add("split-horizontal");
      document.getElementById("backcanvas").classList.add("split-horizontal");
      if (bomsplit) {
        bomsplit.destroy();
        bomsplit = null;
        canvassplit.destroy();
        canvassplit = null;
      }
      bomsplit = Split(['#bomdiv', '#canvasdiv'], {
        sizes: [50, 50],
        onDragEnd: resizeAll,
        direction: "vertical",
        gutterSize: 5
      });
      canvassplit = Split(['#frontcanvas', '#backcanvas'], {
        sizes: [50, 50],
        gutterSize: 5,
        onDragEnd: resizeAll
      });
      break;
    case 'left-right':
      document.getElementById("lr-btn").classList.add("depressed");
      document.getElementById("frontcanvas").style.display = "";
      document.getElementById("backcanvas").style.display = "";
      document.getElementById("bot").style.height = "calc(100% - 80px)";
      document.getElementById("bomdiv").classList.add("split-horizontal");
      document.getElementById("canvasdiv").classList.add("split-horizontal");
      document.getElementById("frontcanvas").classList.remove("split-horizontal");
      document.getElementById("backcanvas").classList.remove("split-horizontal");
      if (bomsplit) {
        bomsplit.destroy();
        bomsplit = null;
        canvassplit.destroy();
        canvassplit = null;
      }
      bomsplit = Split(['#bomdiv', '#canvasdiv'], {
        sizes: [50, 50],
        onDragEnd: resizeAll,
        gutterSize: 5
      });
      canvassplit = Split(['#frontcanvas', '#backcanvas'], {
        sizes: [50, 50],
        gutterSize: 5,
        direction: "vertical",
        onDragEnd: resizeAll
      });
  }
  settings.bomlayout = layout;
  writeStorage("bomlayout", layout);
  changeCanvasLayout(settings.canvaslayout);
}

function changeBomMode(mode) {
  document.getElementById("bom-grouped-btn").classList.remove("depressed");
  document.getElementById("bom-ungrouped-btn").classList.remove("depressed");
  document.getElementById("bom-netlist-btn").classList.remove("depressed");
  switch (mode) {
    case 'grouped':
      document.getElementById("bom-grouped-btn").classList.add("depressed");
      break;
    case 'ungrouped':
      document.getElementById("bom-ungrouped-btn").classList.add("depressed");
      break;
    case 'netlist':
      document.getElementById("bom-netlist-btn").classList.add("depressed");
  }
  writeStorage("bommode", mode);
  if (mode != settings.bommode) {
    settings.bommode = mode;
    bomSortFunction = null;
    currentSortColumn = null;
    currentSortOrder = null;
    clearHighlightedFootprints();
  }
  populateBomTable();
}

function focusFilterField() {
  focusInputField(document.getElementById("filter"));
}

function focusRefLookupField() {
  focusInputField(document.getElementById("reflookup"));
}

function toggleBomCheckbox(bomrowid, checkboxnum) {
  if (!bomrowid || checkboxnum > settings.checkboxes.length) {
    return;
  }
  var bomrow = document.getElementById(bomrowid);
  var checkbox = bomrow.childNodes[checkboxnum].childNodes[0];
  checkbox.checked = !checkbox.checked;
  checkbox.indeterminate = false;
  checkbox.onchange();
}

function checkBomCheckbox(bomrowid, checkboxname) {
  var checkboxnum = 0;
  while (checkboxnum < settings.checkboxes.length &&
    settings.checkboxes[checkboxnum].toLowerCase() != checkboxname.toLowerCase()) {
    checkboxnum++;
  }
  if (!bomrowid || checkboxnum >= settings.checkboxes.length) {
    return;
  }
  var bomrow = document.getElementById(bomrowid);
  var checkbox = bomrow.childNodes[checkboxnum + 1].childNodes[0];
  checkbox.checked = true;
  checkbox.indeterminate = false;
  checkbox.onchange();
}

function setBomCheckboxes(value) {
  writeStorage("bomCheckboxes", value);
  settings.checkboxes = value.split(",").filter((e) => e);
  prepCheckboxes();
  populateBomTable();
  populateDarkenWhenCheckedOptions();
}

function setDarkenWhenChecked(value) {
  writeStorage("darkenWhenChecked", value);
  settings.darkenWhenChecked = value;
  populateBomTable();
}

function prepCheckboxes() {
  var table = document.getElementById("checkbox-stats");
  while (table.childElementCount > 1) {
    table.removeChild(table.lastChild);
  }
  if (settings.checkboxes.length) {
    table.style.display = "";
  } else {
    table.style.display = "none";
  }
  for (var checkbox of settings.checkboxes) {
    var tr = document.createElement("TR");
    var td = document.createElement("TD");
    td.innerHTML = checkbox;
    tr.appendChild(td);
    td = document.createElement("TD");
    td.id = "checkbox-stats-" + checkbox;
    var progressbar = document.createElement("div");
    progressbar.classList.add("bar");
    td.appendChild(progressbar);
    var text = document.createElement("div");
    text.classList.add("text");
    td.appendChild(text);
    tr.appendChild(td);
    table.appendChild(tr);
    updateCheckboxStats(checkbox);
  }
}

function populateDarkenWhenCheckedOptions() {
  var container = document.getElementById("darkenWhenCheckedContainer");

  if (settings.checkboxes.length == 0) {
    container.parentElement.style.display = "none";
    return;
  }

  container.innerHTML = '';
  container.parentElement.style.display = "inline-block";

  function createOption(name, displayName) {
    var id = "darkenWhenChecked-" + name;

    var div = document.createElement("div");
    div.classList.add("radio-container");

    var input = document.createElement("input");
    input.type = "radio";
    input.name = "darkenWhenChecked";
    input.value = name;
    input.id = id;
    input.onchange = () => setDarkenWhenChecked(name);
    div.appendChild(input);

    // Preserve the selected element when the checkboxes change
    if (name == settings.darkenWhenChecked) {
      input.checked = true;
    }

    var label = document.createElement("label");
    label.innerHTML = displayName;
    label.htmlFor = id;
    div.appendChild(label);

    container.appendChild(div);
  }
  createOption("", "None");
  for (var checkbox of settings.checkboxes) {
    createOption(checkbox, checkbox);
  }
}

function updateCheckboxStats(checkbox) {
  var checked = getStoredCheckboxRefs(checkbox).size;
  var total = pcbdata.footprints.length - pcbdata.bom.skipped.length;
  var percent = checked * 100.0 / total;
  var td = document.getElementById("checkbox-stats-" + checkbox);
  td.firstChild.style.width = percent + "%";
  td.lastChild.innerHTML = checked + "/" + total + " (" + Math.round(percent) + "%)";
}

document.onkeydown = function(e) {
  switch (e.key) {
    case "n":
      if (document.activeElement.type == "text") {
        return;
      }
      if (currentHighlightedRowId !== null) {
        checkBomCheckbox(currentHighlightedRowId, "placed");
        highlightNextRow();
        e.preventDefault();
      }
      break;
    case "ArrowUp":
      highlightPreviousRow();
      e.preventDefault();
      break;
    case "ArrowDown":
      highlightNextRow();
      e.preventDefault();
      break;
    default:
      break;
  }
  if (e.altKey) {
    switch (e.key) {
      case "f":
        focusFilterField();
        e.preventDefault();
        break;
      case "r":
        focusRefLookupField();
        e.preventDefault();
        break;
      case "z":
        changeBomLayout("bom-only");
        e.preventDefault();
        break;
      case "x":
        changeBomLayout("left-right");
        e.preventDefault();
        break;
      case "c":
        changeBomLayout("top-bottom");
        e.preventDefault();
        break;
      case "v":
        changeCanvasLayout("F");
        e.preventDefault();
        break;
      case "b":
        changeCanvasLayout("FB");
        e.preventDefault();
        break;
      case "n":
        changeCanvasLayout("B");
        e.preventDefault();
        break;
      default:
        break;
    }
    if (e.key >= '1' && e.key <= '9') {
      toggleBomCheckbox(currentHighlightedRowId, parseInt(e.key));
    }
  }
}

function hideNetlistButton() {
  document.getElementById("bom-ungrouped-btn").classList.remove("middle-button");
  document.getElementById("bom-ungrouped-btn").classList.add("right-most-button");
  document.getElementById("bom-netlist-btn").style.display = "none";
}

window.onload = function(e) {
  initUtils();
  initRender();
  initStorage();
  initDefaults();
  cleanGutters();
  populateMetadata();
  dbgdiv = document.getElementById("dbg");
  bom = document.getElementById("bombody");
  bomhead = document.getElementById("bomhead");
  filter = "";
  reflookup = "";
  if (!("nets" in pcbdata)) {
    hideNetlistButton();
  }
  initDone = true;
  prepCheckboxes();
  // Triggers render
  changeBomLayout(settings.bomlayout);

  // Users may leave fullscreen without touching the checkbox. Uncheck.
  document.addEventListener('fullscreenchange', () => {
    if (!document.fullscreenElement)
      document.getElementById('fullscreenCheckbox').checked = false;
  });
}

window.onresize = resizeAll;
window.matchMedia("print").addListener(resizeAll);

///////////////////////////////////////////////

///////////////////////////////////////////////
 
///////////////////////////////////////////////
  </script>
</head>

<body>
<!-- USERHEADER -->
<div id="topmostdiv" class="topmostdiv">
  <div id="top">
    <div style="float: right; height: 100%;">
      <div class="hideonprint menu" style="float: right; top: 8px;">
        <button class="menubtn"></button>
        <div class="menu-content">
          <label class="menu-label menu-label-top" style="width: calc(50% - 18px)">
            <input id="darkmodeCheckbox" type="checkbox" onchange="setDarkMode(this.checked)">
            Dark mode
          </label><!-- This comment eats space! All of it!
          --><label class="menu-label menu-label-top" style="width: calc(50% - 17px); border-left: 0;">
            <input id="fullscreenCheckbox" type="checkbox" onchange="setFullscreen(this.checked)">
            Full Screen
          </label>
          <label class="menu-label" style="width: calc(50% - 18px)">
            <input id="fabricationCheckbox" type="checkbox" checked onchange="fabricationVisible(this.checked)">
            Fab layer
          </label><!-- This comment eats space! All of it!
          --><label class="menu-label" style="width: calc(50% - 17px); border-left: 0;">
            <input id="silkscreenCheckbox" type="checkbox" checked onchange="silkscreenVisible(this.checked)">
            Silkscreen
          </label>
          <label class="menu-label" style="width: calc(50% - 18px)">
            <input id="referencesCheckbox" type="checkbox" checked onchange="referencesVisible(this.checked)">
            References
          </label><!-- This comment eats space! All of it!
          --><label class="menu-label" style="width: calc(50% - 17px); border-left: 0;">
            <input id="valuesCheckbox" type="checkbox" checked onchange="valuesVisible(this.checked)">
            Values
          </label>
          <div id="tracksAndZonesCheckboxes">
            <label class="menu-label" style="width: calc(50% - 18px)">
              <input id="tracksCheckbox" type="checkbox" checked onchange="tracksVisible(this.checked)">
              Tracks
            </label><!-- This comment eats space! All of it!
            --><label class="menu-label" style="width: calc(50% - 17px); border-left: 0;">
              <input id="zonesCheckbox" type="checkbox" checked onchange="zonesVisible(this.checked)">
              Zones
            </label>
          </div>
          <label class="menu-label" style="width: calc(50% - 18px)">
            <input id="padsCheckbox" type="checkbox" checked onchange="padsVisible(this.checked)">
            Pads
          </label><!-- This comment eats space! All of it!
          --><label class="menu-label" style="width: calc(50% - 17px); border-left: 0;">
            <input id="dnpOutlineCheckbox" type="checkbox" checked onchange="dnpOutline(this.checked)">
            DNP outlined
          </label>
          <label class="menu-label">
            <input id="highlightpin1Checkbox" type="checkbox" onchange="setHighlightPin1(this.checked)">
            Highlight first pin
          </label>
          <label class="menu-label">
            <input id="dragCheckbox" type="checkbox" checked onchange="setRedrawOnDrag(this.checked)">
            Continuous redraw on drag
          </label>
          <label class="menu-label">
            <input id="crosshairCheckbox" type="checkbox" checked onchange="setShowCrosshair(this.checked)">
            Show Crosshair
          </label>
          <label class="menu-label">
            <span>Board rotation</span>
            <span style="float: right"><span id="rotationDegree">0</span>&#176;</span>
            <input id="boardRotation" type="range" min="-36" max="36" value="0" class="slider" oninput="setBoardRotation(this.value)">
          </label>
          <label class="menu-label">
            <div style="margin-left: 5px">Bom checkboxes</div>
            <input id="bomCheckboxes" class="menu-textbox" type=text
                   oninput="setBomCheckboxes(this.value)">
          </label>
          <label class="menu-label">
            <div style="margin-left: 5px">Darken when checked</div>
            <div id="darkenWhenCheckedContainer"></div>
          </label>
          <label class="menu-label">
            <span class="shameless-plug">
              <span>Created using</span>
              <a id="github-link" target="blank" href="https://github.com/openscopeproject/InteractiveHtmlBom">InteractiveHtmlBom</a>
            </span>
          </label>
        </div>
      </div>
      <div class="button-container hideonprint"
           style="float: right; position: relative; top: 8px">
        <button id="fl-btn" class="left-most-button" onclick="changeCanvasLayout('F')"
                title="Front only">F
        </button>
        <button id="fb-btn" class="middle-button" onclick="changeCanvasLayout('FB')"
                title="Front and Back">FB
        </button>
        <button id="bl-btn" class="right-most-button" onclick="changeCanvasLayout('B')"
                title="Back only">B
        </button>
      </div>
      <div class="button-container hideonprint"
           style="float: right; position: relative; top: 8px">
        <button id="bom-btn" class="left-most-button" onclick="changeBomLayout('bom-only')"
                title="BOM only"></button>
        <button id="lr-btn" class="middle-button" onclick="changeBomLayout('left-right')"
                title="BOM left, drawings right"></button>
        <button id="tb-btn" class="right-most-button" onclick="changeBomLayout('top-bottom')"
                title="BOM top, drawings bot"></button>
      </div>
      <div class="button-container hideonprint"
           style="float: right; position: relative; top: 8px">
        <button id="bom-grouped-btn" class="left-most-button" onclick="changeBomMode('grouped')"
                title="Grouped BOM"></button>
        <button id="bom-ungrouped-btn" class="middle-button" onclick="changeBomMode('ungrouped')"
                title="Ungrouped BOM"></button>
        <button id="bom-netlist-btn" class="right-most-button" onclick="changeBomMode('netlist')"
                title="Netlist"></button>
      </div>
      <div class="hideonprint menu" style="float: right; top: 8px;">
        <button class="statsbtn"></button>
        <div class="menu-content">
          <table class="stats">
            <tbody>
              <tr>
                <td width="40%">Board stats</td>
                <td>Front</td>
                <td>Back</td>
                <td>Total</td>
              </tr>
              <tr>
                <td>Components</td>
                <td id="stats-components-front">~</td>
                <td id="stats-components-back">~</td>
                <td id="stats-components-total">~</td>
              </tr>
              <tr>
                <td>Groups</td>
                <td id="stats-groups-front">~</td>
                <td id="stats-groups-back">~</td>
                <td id="stats-groups-total">~</td>
              </tr>
              <tr>
                <td>SMD pads</td>
                <td id="stats-smd-pads-front">~</td>
                <td id="stats-smd-pads-back">~</td>
                <td id="stats-smd-pads-total">~</td>
              </tr>
              <tr>
                <td>TH pads</td>
                <td colspan=3 id="stats-th-pads">~</td>
              </tr>
            </tbody>
          </table>
          <table class="stats">
            <col width="40%"/><col />
            <tbody id="checkbox-stats">
              <tr>
                <td colspan=2 style="border-top: 0">Checkboxes</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="hideonprint menu" style="float: right; top: 8px;">
        <button class="iobtn"></button>
        <div class="menu-content">
          <div class="menu-label menu-label-top">
            <div style="margin-left: 5px;">Save board image</div>
            <div class="flexbox">
              <input id="render-save-width" class="menu-textbox" type="text" value="1000" placeholder="Width"
                  style="flex-grow: 1; width: 50px;" oninput="validateSaveImgDimension(this)">
              <span>X</span>
              <input id="render-save-height" class="menu-textbox" type="text" value="1000" placeholder="Height"
                  style="flex-grow: 1; width: 50px;" oninput="validateSaveImgDimension(this)">
            </div>
            <label>
              <input id="render-save-transparent" type="checkbox">
              Transparent background
            </label>
            <div class="flexbox">
              <button class="savebtn" onclick="saveImage('F')">Front</button>
              <button class="savebtn" onclick="saveImage('B')">Back</button>
            </div>
          </div>
          <div class="menu-label">
            <span style="margin-left: 5px;">Config and checkbox state</span>
            <div class="flexbox">
              <button class="savebtn" onclick="saveSettings()">Export</button>
              <button class="savebtn" onclick="loadSettings()">Import</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="fileinfodiv" style="overflow: auto;">
      <table class="fileinfo">
        <tbody>
          <tr>
            <td id="title" class="title" style="width: 70%">
              Title
            </td>
            <td id="revision" class="title" style="width: 30%">
              Revision
            </td>
          </tr>
          <tr>
            <td id="company">
              Company
            </td>
            <td id="filedate">
              Date
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div id="bot" class="split" style="height: calc(100% - 80px)">
    <div id="bomdiv" class="split split-horizontal">
      <div style="width: 100%">
        <input id="reflookup" class="textbox searchbox reflookup hideonprint" type="text" placeholder="Ref lookup"
               oninput="updateRefLookup(this.value)">
        <input id="filter" class="textbox searchbox filter hideonprint" type="text" placeholder="Filter"
               oninput="updateFilter(this.value)">
        <div class="button-container hideonprint" style="float: left; margin: 0;">
          <button id="copy" title="Copy bom table to clipboard"
               onclick="copyToClipboard()"></button>
        </div>
      </div>
      <div id="dbg"></div>
      <table class="bom">
        <thead id="bomhead">
        </thead>
        <tbody id="bombody">
        </tbody>
      </table>
    </div>
    <div id="canvasdiv" class="split split-horizontal">
      <div id="frontcanvas" class="split" touch-action="none" style="overflow: hidden">
        <div style="position: relative; width: 100%; height: 100%;">
          <canvas id="F_bg" style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>
          <canvas id="F_fab" style="position: absolute; left: 0; top: 0; z-index: 1;"></canvas>
          <canvas id="F_slk" style="position: absolute; left: 0; top: 0; z-index: 2;"></canvas>
          <canvas id="F_hl" style="position: absolute; left: 0; top: 0; z-index: 3;"></canvas>
        </div>
      </div>
      <div id="backcanvas" class="split" touch-action="none" style="overflow: hidden">
        <div style="position: relative; width: 100%; height: 100%;">
          <canvas id="B_bg" style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>
          <canvas id="B_fab" style="position: absolute; left: 0; top: 0; z-index: 1;"></canvas>
          <canvas id="B_slk" style="position: absolute; left: 0; top: 0; z-index: 2;"></canvas>
          <canvas id="B_hl" style="position: absolute; left: 0; top: 0; z-index: 3;"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- USERFOOTER -->
</body>

</html>
